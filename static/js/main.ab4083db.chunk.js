(this.webpackJsonpsocial_media=this.webpackJsonpsocial_media||[]).push([[0],{190:function(e,t,n){},315:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n(0),s=n.n(c),o=n(14),i=n.n(o),l=(n(190),n(41)),u=n(10),d=n.n(u),j=n(17),b=n(16),f=n(31),h=n(149),p=n.n(h).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ca0951c1-2a9d-481e-a273-3d5f60141d92"}}),m=function(){return p.get("auth/me").then((function(e){return e.data}))},g=function(e){return p.post("/auth/login",e).then((function(e){return e.data}))},x=function(){return p.delete("auth/login").then((function(e){return e.data}))},O=function(){return p.get("security/get-captcha-url").then((function(e){return e.data}))};!function(e){e[e.success=0]="success",e[e.error=1]="error",e[e.captcha=10]="captcha"}(r||(r={}));var v=Object(f.b)({name:"auth",initialState:{id:null,email:null,login:null,isAuth:!1,captchaUrl:null,errorMessage:null},reducers:{setCaptchaUrl:function(e,t){e.captchaUrl=t.payload},setauthUserData:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)},setErrorMessage:function(e,t){e.errorMessage=t.payload}}}),w=v.actions,y=w.setCaptchaUrl,k=w.setauthUserData,N=w.setErrorMessage,C=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e);case 2:(a=t.sent).resultCode===r.success?n(I()):(a.resultCode===r.captcha&&n(function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:n=e.sent,r=n.url,t(y(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=a.messages.length>0?a.messages[0]:"Some Error",n(N(c)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(){return function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:(n=e.sent).resultCode===r.success&&t(k(Object(b.a)(Object(b.a)({},n.data),{},{isAuth:!0})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=v.reducer,F=n(7),L=n(359),D=n(320),A=n(378),R=n(365),E=n(380),B=n(366),P=n(159),U=n.n(P),z=n(47),W=n(158),M=n.n(W),T=n(356),q=Object(T.a)((function(e){return{root:{padding:e.spacing(5),flexDirection:"column",justifyContent:"flex-end",textAlign:"center",margin:"auto auto",background:"#2f3136",width:500,color:"white",borderRadius:20,"&>*":{paddingBottom:e.spacing(1)}},icon:{fontSize:90,width:"100%",color:e.palette.primary.main},captcha:{margin:"0 auto",width:"100px"},error:{color:"red"}}})),J=n(27),H=function(e){return p.get("profile/"+e).then((function(e){return e.data}))},V=function(e){return p.get("profile/status/"+e).then((function(e){return e.data}))},Y=function(e){return p.put("profile/status/",{status:e}).then((function(e){return e.data}))},_=function(e){var t=new FormData;return t.append("image",e),p.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},G=function(e){return p.get("follow/".concat(e)).then((function(e){return e.data}))},K=function(e){return p.put("profile",e).then((function(e){return e.data}))},Z=function(e,t,n,r){return p.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n,"&friend=").concat(r)).then((function(e){return e.data}))},X=function(e){return p.post("follow/".concat(e)).then((function(e){return e.data}))},$=function(e){return p.delete("follow/".concat(e)).then((function(e){return e.data}))},Q=Object(f.b)({name:"profile",initialState:{authUser:{},profile:{},status:"",posts:[{userId:null,body:"Hello world!",date:"10/10/20",likesCount:14,isLiked:!0},{userId:1,body:"Lorem uae odit blanditiis temporibusinus odio consequatur placeat accusamus ex",date:"8/11/20",likesCount:1,isLiked:!1},{userId:null,body:"Lorem ipsum dolor sit amet, ct blanditiis temporibus hic ipsum eaque, totam magnam minus eum dolorum reprehenderit rem odio consequatur placeat accusamus ex",date:"10/12/20",likesCount:66,isLiked:!1}],isLoading:!0,isError:"",avatarIsLoading:!1},reducers:{setUserProfile:function(e,t){var n=t.payload;e.profile=n},setUserStatus:function(e,t){var n=t.payload;e.status=n},setauthUser:function(e,t){var n=t.payload;e.authUser=n},setNewAvatar:function(e,t){var n=t.payload;e.authUser.photos=e.profile.photos=n},setUserFollowStatus:function(e,t){var n=t.payload;e.profile=Object(b.a)(Object(b.a)({},e.profile),{},{followed:n})},setPost:function(e,t){var n=t.payload;e.posts.push(n)},setLike:function(e,t){var n=t.payload,r=e.posts[n.idx];r.isLiked=n.like.checked,n.like.checked?++r.likesCount:--r.likesCount},setIsLoading:function(e,t){var n=t.payload;e.isLoading=n},setIsError:function(e,t){var n=t.payload;e.isError=n},setAvatarIsLoading:function(e,t){var n=t.payload;e.avatarIsLoading=n}}}),ee=Q.actions,te=ee.setAvatarIsLoading,ne=ee.setIsError,re=ee.setIsLoading,ae=ee.setLike,ce=ee.setPost,se=ee.setUserFollowStatus,oe=ee.setUserProfile,ie=ee.setUserStatus,le=ee.setauthUser,ue=ee.setNewAvatar,de=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){var r,a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(re(!0)),t.next=4,H(e);case 4:return r=t.sent,t.next=7,V(e);case 7:return a=t.sent,t.next=10,G(e);case 10:c=t.sent,n(oe(r)),n(ie(a)),n(se(c)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),n(ne(t.t0));case 19:return t.prev=19,n(re(!1)),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[0,16,19,22]])})));return function(e){return t.apply(this,arguments)}}()},je=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(e);case 2:r=t.sent,n(le(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},be=Q.reducer,fe=Object(f.b)({name:"users",initialState:{users:[],pageSize:100,totalUsersCount:5e3,currentPage:0,isFetching:!0,followingInProgress:[],filter:{searchTerm:"",friend:"null"}},reducers:{setIsFetching:function(e,t){e.isFetching=t.payload},setUsers:function(e,t){e.users=t.payload},setCurrentPage:function(e,t){e.currentPage=t.payload},setTotalUsersCount:function(e,t){e.totalUsersCount=t.payload},toggleFollow:function(e,t){var n=t.payload;e.users=e.users.map((function(e){return e.id===n?Object(b.a)(Object(b.a)({},e),{},{followed:!e.followed}):e}))},setFollowingInProgress:function(e,t){var n=t.payload,r=n.isFetching,a=n.userId;e.followingInProgress=r?[].concat(Object(J.a)(e.followingInProgress),[a]):e.followingInProgress.filter((function(e){return e!==a}))},setPageSize:function(e,t){var n=t.payload;e.currentPage=0,e.pageSize=n},setFilter:function(e,t){var n=t.payload;e.currentPage=0,e.filter=Object(b.a)(Object(b.a)({},e.filter),n)}}}),he=fe.actions,pe=he.setFilter,me=he.setCurrentPage,ge=he.setPageSize,xe=he.setIsFetching,Oe=he.setUsers,ve=he.setTotalUsersCount,we=he.toggleFollow,ye=he.setFollowingInProgress,ke=fe.reducer,Ne=Object(f.b)({name:"app",initialState:{isInit:!1},reducers:{setInit:function(e){e.isInit=!0}}}),Ce=Ne.actions.setInit,Ie=Ne.reducer,Se=function(){return p.get("/dialogs").then((function(e){return e.data}))},Fe=function(e,t){return p.post("/dialogs/".concat(e,"/messages"),{body:t}).then((function(e){return e.data}))},Le=function(e){return p.get("/dialogs/".concat(e,"/messages")).then((function(e){return e.data}))},De=function(){return p.get("/dialogs/messages/new/count").then((function(e){return e.data}))},Ae=function(e){return p.delete("/dialogs/messages/".concat(e,"\n\t\t")).then((function(e){return e.data}))},Re=Object(f.b)({name:"dialogs",initialState:{dialogs:[],messages:[],dialogsFetching:!0,messagesFething:!0,newMessagesCount:null},reducers:{setDialogsFetching:function(e,t){var n=t.payload;e.dialogsFetching=n},setMessagesFetching:function(e,t){var n=t.payload;e.messagesFething=n},setDialogs:function(e,t){var n=t.payload;e.dialogs=n},setMessages:function(e,t){var n=t.payload;e.messages=n.items},setNewMessagesCount:function(e,t){var n=t.payload;e.newMessagesCount=n},setDeletedMessage:function(e,t){var n=t.payload;e.messages=e.messages.filter((function(e){return e.id!==n}))}}}),Ee=Re.actions,Be=Ee.setDeletedMessage,Pe=Ee.setNewMessagesCount,Ue=Ee.setMessagesFetching,ze=Ee.setDialogsFetching,We=Ee.setDialogs,Me=Ee.setMessages,Te=function(){return function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De();case 2:n=e.sent,t(Pe(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},qe=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Ue(!0)),t.next=3,Le(e);case 3:return r=t.sent,n(Ue(!1)),n(Me(r)),t.next=8,Se();case 8:a=t.sent,n(We(a));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Je=Re.reducer,He={"messages-received":[],"status-changed":[]},Ve=null,Ye=function(){Xe("pending"),setTimeout($e,3e3)},_e=function(e){var t=JSON.parse(e.data);He["messages-received"].forEach((function(e){return e(t)}))},Ge=function(){Xe("ready")},Ke=function(){Xe("error"),console.error("REFRESH PAGE")},Ze=function(){var e,t,n,r;null===(e=Ve)||void 0===e||e.removeEventListener("close",Ye),null===(t=Ve)||void 0===t||t.removeEventListener("message",_e),null===(n=Ve)||void 0===n||n.removeEventListener("open",Ge),null===(r=Ve)||void 0===r||r.removeEventListener("error",Ke)},Xe=function(e){He["status-changed"].forEach((function(t){return t(e)}))};function $e(){var e;Ze(),null===(e=Ve)||void 0===e||e.close(),Ve=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),Xe("pending"),Ve.addEventListener("close",Ye),Ve.addEventListener("message",_e),Ve.addEventListener("open",Ge),Ve.addEventListener("error",Ke)}var Qe=function(){$e()},et=function(){var e;He["messages-received"]=[],He["status-changed"]=[],Ze(),null===(e=Ve)||void 0===e||e.close()},tt=function(e,t){return He[e].push(t),function(){He[e]=He[e].filter((function(e){return e!==t}))}},nt=function(e,t){He[e]=He[e].filter((function(e){return e!==t}))},rt=function(e){var t;null===(t=Ve)||void 0===t||t.send(e)},at=n(377),ct=Object(f.b)({name:"chat",initialState:{messages:[],status:"pending"},reducers:{messagesReceived:function(e,t){var n=t.payload;e.messages.length!=n.length&&(e.messages=[].concat(Object(J.a)(e.messages),Object(J.a)(n.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{id:Object(at.a)()})})))).filter((function(e,t,n){return t>=n.length-100})))},statusChanged:function(e,t){var n=t.payload;e.status=n}}}),st=ct.actions,ot=st.messagesReceived,it=st.statusChanged,lt=null,ut=function(e){return null===lt&&(lt=function(t){e(ot(t))}),lt},dt=null,jt=function(e){return null===dt&&(dt=function(t){e(it(t))}),dt},bt=ct.reducer,ft=Object(f.a)({reducer:{app:Ie,users:ke,chat:bt,auth:S,profile:be,dialogs:Je},middleware:function(e){return e({serializableCheck:!1})}}),ht=function(){return Object(F.b)()},pt=ft,mt=function(){var e=Object(F.c)((function(e){return e.auth})),t=e.captchaUrl,n=e.errorMessage,r=ht(),c=q(),s={email:"secondjump@bk.ru",password:"qwaszx",rememberMe:!0},o=Object(l.a)({initialValues:{email:"",password:"",rememberMe:!1,captcha:""},validationSchema:z.a({email:z.b().email("Insert correct email ").required("Required"),password:z.b().min(4,"Password must be longer than 4 characters.").max(12,"Password must be shorter than 12 characters.").required("Required")}),onSubmit:function(e){"free@free.com"===e.email.trim()?r(C(s)):r(C(e))}}),i=o.handleSubmit,u=o.handleChange,d=o.values,j=o.errors,b=o.touched,f=o.handleBlur;return Object(a.jsxs)(L.a,{container:!0,component:"form",onSubmit:i,className:c.root,children:[Object(a.jsx)(M.a,{className:c.icon}),Object(a.jsx)(D.a,{variant:"h6",className:c.error,children:n}),Object(a.jsx)(A.a,{label:"Email",onBlur:f,size:"small",onChange:u,id:"email",name:"email",value:d.email}),j.email&&b.email&&Object(a.jsx)("div",{className:c.error,children:j.email}),Object(a.jsx)(A.a,{label:"Password",onBlur:f,size:"small",type:"password",onChange:u,variant:"standard",id:"password",name:"password",value:d.password}),j.password&&b.password&&Object(a.jsx)("div",{className:c.error,children:j.password}),Object(a.jsx)(R.a,{control:Object(a.jsx)(E.a,{checked:d.rememberMe,onChange:u,name:"rememberMe",color:"primary"}),label:"Remember me"}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{className:c.captcha,src:t,width:"100px",alt:"captcha"}),Object(a.jsx)(A.a,{label:"Captcha",onBlur:f,onChange:u,id:"captcha",size:"small",name:"captcha",value:d.captcha})]}),Object(a.jsx)(B.a,{variant:"contained",startIcon:Object(a.jsx)(U.a,{}),size:"large",type:"submit",color:"primary",children:"Log In"}),Object(a.jsx)("p",{children:"\u0414\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0430\u0440\u0443 \u043b\u043e\u0433\u0438\u043d/\u043f\u0430\u0440\u043e\u043b\u044c: "}),Object(a.jsx)("p",{children:" free@free.com / free"}),Object(a.jsx)("p",{children:"\u0414\u043b\u044f \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0443 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441\u043e \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u043c\u0438 cookie(ex. safari: settings - privacy)"})]})},gt=(n(315),function(){return Object(a.jsx)("div",{className:"loader",children:"Loading..."})}),xt=n.p+"static/media/defaultAvatar.832028ea.png",Ot=n(19),vt=n(383),wt=Object(T.a)((function(e){return{name:{color:"white",marginLeft:20,fontSize:16,overflowWrap:"break-word",maxWidth:200,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","&:hover":{color:e.palette.primary.main}},root:{overflowY:"scroll",height:420,padding:10},userWrapper:{"&:hover":{background:"linear-gradient(to right, #8e9eab, #eef2f0)",borderRadius:15,color:e.palette.primary.main},padding:4},friendBtn:{width:90,margin:5},notfound:{color:"white",textAlign:"center",fontSize:50},avatar:{width:50,height:50}}})),yt=n(65),kt=function(e){var t=e.id,n=e.followed,r=Object(yt.a)(e,["id","followed"]),c=Object(F.c)((function(e){return e.users.followingInProgress})),s=Object(F.b)();return Object(a.jsx)(B.a,Object(b.a)(Object(b.a)({},r),{},{color:n?"secondary":"primary",variant:"contained",disabled:c.some((function(e){return e===t})),onClick:function(){var e,r;s((e=+t,r=n,function(){var t=Object(j.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(ye({isFetching:!0,userId:e})),r){t.next=7;break}return t.next=4,X(e);case 4:t.t0=t.sent,t.next=10;break;case 7:return t.next=9,$(e);case 9:t.t0=t.sent;case 10:return a=t.t0,t.next=13,G(e);case 13:c=t.sent,0===a.resultCode&&(n(we(e)),n(se(c))),n(ye({isFetching:!1,userId:e}));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:n?"Unfriend":"Friend"}))},Nt=function(){var e=Object(F.c)((function(e){return e.users.users})),t=Object(F.c)((function(e){return e.users.isFetching})),n=wt();return t?Object(a.jsx)(gt,{}):Object(a.jsxs)(L.a,{container:!0,direction:"row",justify:"center",className:n.root,children:[0===e.length&&Object(a.jsx)("div",{className:n.notfound,children:"User not found"}),e&&e.map((function(e){return Object(a.jsx)(L.a,{item:!0,xs:6,md:6,lg:4,children:Object(a.jsxs)(L.a,{container:!0,direction:"row",justify:"space-between",className:n.userWrapper,children:[Object(a.jsx)(Ot.d,{to:"profile/"+e.id,children:Object(a.jsxs)(L.a,{container:!0,direction:"row",alignItems:"center",children:[Object(a.jsx)(vt.a,{className:n.avatar,src:(null===e||void 0===e?void 0:e.photos.large)||xt}),Object(a.jsx)("p",{className:n.name,children:null===e||void 0===e?void 0:e.name})]})}),Object(a.jsx)(kt,{id:e.id,followed:e.followed,className:n.friendBtn})]})})}))]})},Ct=n(363),It=n(384),St=n(376),Ft=n(374),Lt=n(32),Dt=function(e,t){var n=Object(c.useState)(e),r=Object(Lt.a)(n,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){var n=setTimeout((function(){s(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a},At=Object(T.a)((function(){return{root:{display:"flex",flexDirection:"column",alignItems:"center",padding:10}}})),Rt=function(){var e=Object(F.c)((function(e){return e.users.currentPage})),t=Object(F.c)((function(e){return e.users.pageSize})),n=Object(F.c)((function(e){return e.users.totalUsersCount})),r=Object(F.c)((function(e){return e.users.filter})),s=At(),o=Object(F.b)(),i=Dt(r.searchTerm,1e3),l=Dt(e,1e3),u=Dt(t,1e3),b=Dt(r.friend,1e3);Object(c.useEffect)((function(){return o(function(e,t,n,r){return function(){var a=Object(j.a)(d.a.mark((function a(c){var s;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c(xe(!0)),c(me(e)),a.next=4,Z(e+1,t,n,r);case 4:s=a.sent,c(Oe(s.items)),c(ve(s.totalCount)),c(xe(!1));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(l,u,i,b)),function(){o(Oe([]))}}),[o,l,u,i,b]);return Object(a.jsxs)(L.a,{container:!0,className:s.root,children:[Object(a.jsx)(A.a,{label:"Search people",onChange:function(e){o(pe({searchTerm:e.target.value}))},id:"searchTerm",name:"searchTerm",value:r.searchTerm}),Object(a.jsx)(Ct.a,{component:"fieldset",children:Object(a.jsx)(It.a,{row:!0,"aria-label":"position",name:"position",value:r.friend,onChange:function(e){return o(pe({friend:e.target.value}))},children:[{value:"null",label:"All"},{value:"true",label:"Friends"},{value:"false",label:"Without friend"}].map((function(e){return Object(a.jsx)(R.a,{value:e.value,control:Object(a.jsx)(St.a,{size:"small",color:"primary"}),label:e.label},e.label)}))})}),Object(a.jsx)(Ft.a,{component:"div",count:n,page:e,onChangePage:function(e,t){o(me(t))},rowsPerPage:t,labelRowsPerPage:"rows/page",onChangeRowsPerPage:function(e){o(ge(parseInt(e.target.value,10)))}})]})},Et=function(){return Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsxs)("div",{style:{background:"#2f3136",borderRadius:"0px 0px 15px 15px",height:600,position:"relative"},children:[Object(a.jsx)(Rt,{}),Object(a.jsx)(Nt,{})]})]})},Bt=n(22),Pt=Object(T.a)((function(){return{root:{background:"#2f3136",color:"white",borderRadius:"0 0 0 15px",height:600,alignItems:"center",padding:15},fullName:{fontWeight:700,fontSize:20,textAlign:"center",wordBreak:"break-all"},friends:{borderTop:"1px solid grey",paddingTop:5,width:"100%"},friendButton:{margin:20,width:200},pmButton:{margin:20,color:"black",width:200}}})),Ut=Object(T.a)((function(e){return{friendsWrapper:{margin:"15px 0",alignItems:"flex-start",height:200},name:{textAlign:"center",wordBreak:"break-word"},avatar:{width:50,height:50,marginBottom:10},friendItemWrapper:{color:"grey",padding:10,flexDirection:"column",alignItems:"center","&:hover":{color:e.palette.primary.main}},friendsLabel:{color:"grey",textAlign:"center",fontSize:13,fontWeight:700}}})),zt=s.a.memo((function(){var e=Object(F.c)((function(e){return e.users.users})),t=Object(F.c)((function(e){return e.users.isFetching})),n=function(e,t){var n=e.slice().sort((function(){return Math.random()-.5}));return n.length=t,n}(e,6),r=ht();s.a.useEffect((function(){var t;e.length||r((t="true",function(){var e=Object(j.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(xe(!0)),e.next=3,Z(1,100,"",t);case 3:r=e.sent,n(Oe(r.items)),n(xe(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]);var c=Ut();return Object(a.jsx)(L.a,{container:!0,justify:"center",style:{position:"relative",height:250},children:t?Object(a.jsx)(gt,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{className:c.friendsLabel,children:[" Friends: ",Object(a.jsx)(Ot.c,{onClick:function(){return r(pe({friend:"true"}))},to:"/users",children:e.length})," "]}),Object(a.jsx)(L.a,{container:!0,className:c.friendsWrapper,children:n.map((function(e){var t;return Object(a.jsx)(L.a,{item:!0,xs:4,children:Object(a.jsx)(Ot.c,{to:"/profile/".concat(e.id),children:Object(a.jsxs)(L.a,{container:!0,className:c.friendItemWrapper,children:[Object(a.jsx)("div",{children:Object(a.jsx)(vt.a,{className:c.avatar,src:null===(t=e.photos)||void 0===t?void 0:t.large})}),Object(a.jsx)("div",{className:c.name,children:e.name})]})})},e.id)}))})]})})})),Wt=n(321),Mt=n(160),Tt=n.n(Mt),qt=n(5),Jt=n(367),Ht=Object(T.a)((function(e){return{avatar:{width:150,height:150},uploadButton:{"&:hover":{color:e.palette.secondary.main}},root:{position:"relative",height:150}}})),Vt=Object(qt.a)((function(){return{badge:{backgroundColor:"transparent",position:"absolute",top:140,right:5}}}))(Jt.a),Yt=s.a.memo((function(e){var t,n,c=e.profile,s=e.routerId,o=Ht(),i=Object(F.c)((function(e){return e.profile.avatarIsLoading})),l=ht();return Object(a.jsx)("div",{className:o.root,children:i?Object(a.jsx)(gt,{}):s?Object(a.jsx)(vt.a,{className:o.avatar,alt:"user foto",src:(null===(n=c.photos)||void 0===n?void 0:n.large)||xt}):Object(a.jsx)(Vt,{badgeContent:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{accept:"image/*",id:"contained-button-file",type:"file",style:{display:"none"},onChange:function(e){return e.target.files&&l((t=e.target.files[0],function(){var e=Object(j.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(te(!0)),e.next=3,_(t);case 3:(a=e.sent).resultCode===r.success&&n(ue(a.data.photos)),n(te(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t}}),Object(a.jsx)("label",{htmlFor:"contained-button-file",children:Object(a.jsx)(Wt.a,{color:"primary",className:o.uploadButton,component:"span",children:Object(a.jsx)(Tt.a,{})})})]}),color:"secondary",children:Object(a.jsx)(vt.a,{className:o.avatar,alt:"user foto",src:null===(t=c.photos)||void 0===t?void 0:t.large})})})})),_t=n(161),Gt=n.n(_t),Kt=n(163),Zt=n.n(Kt),Xt=n(162),$t=n.n(Xt),Qt=n(176),en=function(){var e=Object(c.useState)(!1),t=Object(Lt.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),o=Object(Lt.a)(s,2),i=o[0],l=o[1],u=Object(F.c)((function(e){return e.profile.status})),b=ht();Object(c.useEffect)((function(){l(u)}),[u]);return[function(e){l(e.target.value)},function(e){return function(){e?(a(!1),b(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:t.sent.resultCode===r.success&&n(ie(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i))):(l(u),a(!1))}},n,a,i,u]},tn=Object(T.a)((function(e){return{status:{cursor:"pointer",fontSize:16,"&:hover":{color:e.palette.secondary.main},color:e.palette.primary.main,wordBreak:"break-word",padding:10},icon:{margin:"0 5px 0 10px",fontSize:20,cursor:"pointer"},input:{width:300,fontSize:20,marginRight:10,textAlign:"center"},root:{minHeight:70,padding:5}}})),nn=s.a.memo((function(e){var t=e.routerId,n=en(),r=Object(Lt.a)(n,6),c=r[0],s=r[1],o=r[2],i=r[3],l=r[4],u=r[5],d=tn();return Object(a.jsx)("div",{className:d.root,children:o&&!t?Object(a.jsx)(L.a,{component:"form",onSubmit:s(!0),children:Object(a.jsx)(Qt.a,{className:d.input,autoFocus:!0,onChange:c,value:l,endAdornment:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Gt.a,{fontSize:"small",color:"primary",className:d.icon,onClick:s(!0)}),Object(a.jsx)($t.a,{fontSize:"small",color:"secondary",className:d.icon,onClick:s(!1)})]})})}):Object(a.jsx)(L.a,{children:Object(a.jsxs)("span",{className:d.status,onClick:function(){i(!0)},children:[u,Object(a.jsx)("span",{children:!t&&Object(a.jsx)(Zt.a,{className:d.icon,color:"inherit"})})]})})})})),rn=s.a.memo((function(e){var t,n=e.routerId,r=Object(F.c)((function(e){return e.profile.profile})),c=Pt();return Object(a.jsxs)(L.a,{container:!0,className:c.root,direction:"column",justify:"space-around",children:[Object(a.jsx)(Yt,{profile:r,routerId:n}),Object(a.jsx)(L.a,{item:!0,className:c.fullName,children:null===(t=r.fullName)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsxs)(L.a,{children:[" ",Object(a.jsx)(nn,{routerId:n})]}),n?Object(a.jsx)(L.a,{item:!0,children:n&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)(kt,{className:c.friendButton,id:n,followed:r.followed})}),Object(a.jsx)("div",{children:Object(a.jsx)(Ot.c,{to:"/messenger/".concat(n),children:Object(a.jsx)(B.a,{color:"secondary",variant:"contained",className:c.pmButton,children:"White a message"})})})]})}):Object(a.jsx)(L.a,{item:!0,className:c.friends,children:Object(a.jsx)(zt,{})})]})})),an=n(164),cn=n.n(an),sn=Object(T.a)((function(e){return{root:{height:600,maxWidth:300,padding:2,justifyContent:"space-around",alignItems:"center",flexDirection:"column",color:"grey",textAlign:"center"},descriptionLabel:{color:e.palette.secondary.main,fontSize:16,fontWeight:700}}})),on=s.a.memo((function(e){var t=e.setEditForm,n=e.routerId,r=Object(F.c)((function(e){return e.profile.profile})),c=r.contacts&&Object.values(r.contacts).find((function(e){return!!e})),s=sn();return Object(a.jsxs)(L.a,{container:!0,className:s.root,children:[(null===r||void 0===r?void 0:r.aboutMe)&&Object(a.jsxs)(L.a,{item:!0,children:[Object(a.jsx)("p",{className:s.descriptionLabel,children:"About me:"}),Object(a.jsx)("p",{children:null===r||void 0===r?void 0:r.aboutMe})]}),(null===r||void 0===r?void 0:r.lookingForAJobDescription)&&Object(a.jsxs)(L.a,{item:!0,children:[Object(a.jsx)("p",{className:s.descriptionLabel,children:" Skills: "}),Object(a.jsx)("p",{children:null===r||void 0===r?void 0:r.lookingForAJobDescription}),Object(a.jsx)(R.a,{value:"best",control:Object(a.jsx)(St.a,{checked:null===r||void 0===r?void 0:r.lookingForAJob,color:"primary",disabled:!0}),label:"Looking for a job"})]}),c&&Object(a.jsxs)(L.a,{item:!0,children:[Object(a.jsx)("p",{className:s.descriptionLabel,children:"Contacts:"}),r.contacts&&Object.keys(r.contacts).map((function(e){return r.contacts[e]&&Object(a.jsx)(L.a,{item:!0,children:Object(a.jsxs)("a",{href:"//".concat(r.contacts[e]),children:[r.contacts[e]," "]})},e)}))]}),!n&&Object(a.jsx)(L.a,{item:!0,children:Object(a.jsx)(Wt.a,{onClick:function(){t(!0)},color:"secondary",children:Object(a.jsx)(cn.a,{})})})]})})),ln=n(166),un=n.n(ln),dn=n(165),jn=n.n(dn),bn=Object(T.a)((function(){return{root:{alignItems:"center",height:600,width:"100%",display:"flex",justifyContent:"space-around",flexDirection:"column"},leftBlock:{display:"flex",flexDirection:"column",color:"white",textAlign:"center",justifyContent:"space-around","&>*":{margin:30},marginLeft:100},rightBlock:{display:"flex",flexDirection:"column",color:"white",textAlign:"center",justifyContent:"space-around","&>*":{margin:27},marginRight:100},job:{color:"white"},error:{color:"red"},buttons:{margin:20}}})),fn=function(e){var t=e.label,n=e.errors,r=e.touched,c=Object(yt.a)(e,["label","errors","touched"]);return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h2",{children:[" ",t,": "]}),Object(a.jsx)(A.a,Object(b.a)({type:"text",size:"small",multiline:!0,rowsMax:2},c)),n&&r&&Object(a.jsx)("div",{style:{color:"red"},children:n})]})},hn=function(e){var t=e.setEditForm,n=Object(F.c)((function(e){return e.profile})).profile,c=Object(F.b)(),s=bn(),o=Object(l.a)({initialValues:n,onSubmit:function(e){c(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e);case 2:t.sent.resultCode===r.success&&(n(de(e.userId)),n(je(e.userId)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),t(!1)},validationSchema:z.a({fullName:z.b().min(4,"Name must be longer than 4 characters.").max(30,"Name must be shorter than 30 characters.").required("Required"),aboutMe:z.b().max(100,"Description must be shorter than 100 characters.").required("Required"),lookingForAJobDescription:z.b().max(100,"Description must be shorter than 100 characters.").required("Required")})}),i=o.handleSubmit,u=o.handleChange,b=o.values,f=o.errors,h=o.touched,p=o.handleBlur;return Object(a.jsxs)(L.a,{component:"form",onSubmit:i,className:s.root,children:[Object(a.jsxs)(L.a,{container:!0,direction:"row",justify:"space-around",alignItems:"center",children:[Object(a.jsxs)("div",{className:s.leftBlock,children:[Object(a.jsx)(fn,{label:"Name",id:"fullName",errors:f.fullName,touched:h.fullName,onBlur:p,onChange:u,value:b.fullName}),Object(a.jsx)("div",{children:Object(a.jsx)(fn,{label:"About me",id:"aboutMe",errors:f.aboutMe,touched:h.aboutMe,onBlur:p,onChange:u,value:b.aboutMe})}),Object(a.jsx)("div",{children:Object(a.jsx)(fn,{label:"Skills",id:"lookingForAJobDescription",errors:f.lookingForAJobDescription,touched:h.lookingForAJobDescription,onBlur:p,onChange:u,value:b.lookingForAJobDescription})})]}),Object(a.jsxs)("div",{className:s.rightBlock,children:[Object(a.jsx)("h2",{children:"Contacts:"}),["vk","facebook","github"].map((function(e){return Object(a.jsx)(A.a,{value:(null===b||void 0===b?void 0:b.contacts[e])||"",name:"contacts."+e,id:e,type:"text",size:"small",label:e,onChange:u},e)}))]})]}),Object(a.jsx)("div",{children:Object(a.jsx)(R.a,{className:s.job,labelPlacement:"start",control:Object(a.jsx)(E.a,{size:"small",checked:null===b||void 0===b?void 0:b.lookingForAJob,onChange:u,color:"primary",id:"lookingForAJob"}),label:"Are you looking for a job?"})}),Object(a.jsx)("div",{className:s.buttons,children:Object(a.jsxs)(L.a,{container:!0,justify:"center",children:[Object(a.jsx)(Wt.a,{type:"submit",children:Object(a.jsx)(jn.a,{color:"primary"})}),Object(a.jsx)(Wt.a,{onClick:function(){return t(!1)},type:"submit",children:Object(a.jsx)(un.a,{color:"secondary"})})]})})]})},pn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:108e5,n=new Date(e).getTime(),r=new Date(n+t).toLocaleTimeString("ru",{hour:"2-digit",minute:"2-digit"}),a=new Date(n+t).toLocaleDateString(),c=(new Date).toLocaleDateString(),s=new Date(Date.now()-864e5+t).toLocaleDateString(),o=a===c?"today "+r:a===s?"yesterday "+r:a;return o},mn=n(368),gn=n(369),xn=Object(T.a)((function(){return{root:{overflowY:"auto",height:500,width:"100%",marginTop:20,paddingRight:3},container:{color:"grey",display:"flex",flexDirection:"column-reverse",justifyContent:"flex-end",width:"100%",wordBreak:"break-word"},postWrapper:{width:"100%",display:"flex",backgroundColor:"#202225",padding:10,marginBottom:10,borderRadius:5},date:{color:"white",fontSize:9},body:{width:"100%",paddingTop:40},avatar:{marginRight:20},fullName:{marginRight:10,color:"orange"}}})),On=function(){var e=Object(F.c)((function(e){return e.profile})),t=e.authUser,n=e.posts,r=e.profile,c=ht(),s=xn();return Object(a.jsx)("div",{className:s.root,children:Object(a.jsx)("div",{className:s.container,children:null===n||void 0===n?void 0:n.map((function(e,n){var o,i;return Object(a.jsxs)("div",{className:s.postWrapper,children:[Object(a.jsx)(vt.a,{className:s.avatar,src:e.userId?null===(o=t.photos)||void 0===o?void 0:o.small:null===(i=r.photos)||void 0===i?void 0:i.small}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(L.a,{container:!0,direction:"row",alignItems:"center",children:[Object(a.jsx)("p",{className:s.fullName,children:e.userId?t.fullName:r.fullName}),Object(a.jsx)("p",{className:s.date,children:pn(e.date,0)})]}),Object(a.jsx)("span",{className:s.body,children:e.body}),Object(a.jsx)(L.a,{container:!0,alignItems:"center",children:Object(a.jsx)(R.a,{onChange:function(e){return c(ae({like:e.target,idx:n}))},control:Object(a.jsx)(E.a,{checked:e.isLiked,icon:Object(a.jsx)(mn.a,{}),checkedIcon:Object(a.jsx)(gn.a,{}),name:"checkedH\t"}),label:e.likesCount})})]})]},e.date)}))})})},vn=Object(T.a)((function(){return{root:{backgroundColor:"#2f3136",height:600,padding:10,borderRadius:"0 0 15px 0"}}})),wn=Object(T.a)((function(e){return{root:{backgroundColor:"#40444b",alignItems:"center",marginTop:10,borderRadius:7,width:"100%"},input:{color:"white",marginLeft:15,width:"100%",paddingRight:20,padding:4},sendIcon:{fontSize:13,color:e.palette.primary.main}}})),yn=n(167),kn=n.n(yn),Nn=function(e){var t=e.handleSubmit,n=Object(yt.a)(e,["handleSubmit"]),r=wn();return Object(a.jsx)(L.a,{component:"form",onSubmit:t,className:r.root,children:Object(a.jsx)(Qt.a,{inputProps:Object(b.a)({},n),className:r.input,type:"text",autoFocus:!0,placeholder:"write a message",name:"message",id:"message",endAdornment:Object(a.jsx)(Wt.a,{type:"submit",children:Object(a.jsx)(kn.a,{color:"inherit",className:r.sendIcon})})})})},Cn=s.a.memo((function(){var e=Object(F.c)((function(e){return e.profile.authUser.userId})),t=ht(),n=vn(),r=Object(l.a)({initialValues:{message:""},onSubmit:function(n){var r=n.message;t(ce({userId:e,body:r,date:(new Date).toJSON(),likesCount:0,isLiked:!1})),i()}}),c=r.handleSubmit,s=r.handleChange,o=r.values,i=r.resetForm;return Object(a.jsxs)(L.a,{className:n.root,children:[Object(a.jsx)(Nn,{onChange:s,handleSubmit:c,value:o.message}),Object(a.jsx)(On,{})]})})),In=Object(T.a)((function(){return{root:{backgroundColor:"#36393f",borderRadius:"0 0 15px 15px",position:"relative",width:"100%",minHeight:600,justifyContent:"center",display:"flex",flexDirection:"row"},rightBlockWrapper:{minHeight:600}}})),Sn=n(381),Fn=n(375);function Ln(e){return Object(a.jsx)(Fn.a,Object(b.a)({elevation:6,variant:"filled"},e))}var Dn=Object(Bt.g)((function(e){var t=e.match,n=Object(F.c)((function(e){return e.auth.id})),r=t.params.userId,s=r||n,o=ht(),i=Object(c.useState)(!1),l=Object(Lt.a)(i,2),u=l[0],d=l[1],j=In(),b=Object(F.c)((function(e){return e.profile.isLoading})),f=Object(F.c)((function(e){return e.profile.isError}));Object(c.useEffect)((function(){s&&o(de(s))}),[o,s]);var h=function(){o(ne(""))};return b?Object(a.jsx)("div",{className:j.root,children:Object(a.jsx)(gt,{})}):Object(a.jsxs)("div",{className:j.root,children:[Object(a.jsx)(Sn.a,{open:!!f,autoHideDuration:5e3,onClose:h,children:Object(a.jsx)(Ln,{onClose:h,severity:"error",children:"Fetch error"})}),Object(a.jsx)(L.a,{item:!0,xs:4,children:Object(a.jsx)(rn,{routerId:r})}),Object(a.jsx)(L.a,{item:!0,xs:8,className:j.rightBlockWrapper,children:u?Object(a.jsx)(hn,{setEditForm:d}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(L.a,{container:!0,children:[Object(a.jsx)(L.a,{children:Object(a.jsx)(on,{routerId:r,setEditForm:d})}),Object(a.jsx)(L.a,{item:!0,xs:!0,children:Object(a.jsx)(Cn,{})})]})})})]})})),An=function(){var e=Object(F.c)((function(e){return e.chat})).status,t=ht(),n=Object(l.a)({initialValues:{message:""},onSubmit:function(e){var n=e.message;n&&t(function(e){return Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:rt(e);case 1:case"end":return t.stop()}}),t)})))}(n)),o()}}),r=n.handleSubmit,c=n.handleChange,s=n.values,o=n.resetForm;return Object(a.jsx)(Nn,{handleSubmit:r,onChange:c,value:s.message,disabled:"ready"!==e})},Rn=Object(T.a)((function(){return{root:{backgroundColor:"#36393f",padding:15},senderName:{color:"white",fontWeight:700},messageBody:{color:"#dcddde",wordBreak:"break-word"},messagesWrapper:{overflowY:"auto",height:500,padding:8},message:{padding:"14px 0",borderTop:"1px solid #40444b",display:"flex",flexDirection:"row"}}})),En=function(){var e=Object(F.c)((function(e){return e.chat.messages})),t=Object(c.useRef)(null),n=Rn();return Object(c.useEffect)((function(){t.current&&t.current.scrollIntoView(!1)}),[e]),Object(a.jsx)(L.a,{xs:!0,className:n.root,children:Object(a.jsxs)(L.a,{item:!0,children:[Object(a.jsx)(L.a,{className:n.messagesWrapper,children:null===e||void 0===e?void 0:e.map((function(e,r){return Object(a.jsxs)(L.a,{className:n.message,children:[Object(a.jsx)(L.a,{item:!0,children:Object(a.jsx)(vt.a,{alt:"avatar",src:null===e||void 0===e?void 0:e.photo})}),Object(a.jsxs)(L.a,{item:!0,style:{marginLeft:10},children:[Object(a.jsxs)("p",{className:n.senderName,children:[" ",e.userName]}),Object(a.jsxs)("p",{className:n.messageBody,children:[e.message," "]})]}),Object(a.jsx)("div",{ref:t})]},r)}))}),Object(a.jsx)(An,{})]})})},Bn=n(385),Pn=n.p+"static/media/devs.b3345405.jpg",Un=Object(T.a)((function(){return{root:{padding:"15px",background:"#2f3136",color:"white",display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"0px 0px 0px 15px",height:600},pmWrapper:{overflowY:"auto",padding:"0 5px"},chip:{width:150,justifyContent:"flex-start",margin:"5px 0",background:"#40444b"}}})),zn=Object(qt.a)((function(){return{badge:{position:"absolute",top:21,right:15}}}))(Jt.a),Wn=function(){var e=Object(F.c)((function(e){return e.dialogs})).dialogs,t=ht();Object(c.useEffect)((function(){t(function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ze(!0)),e.next=3,Se();case 3:n=e.sent,t(ze(!1)),t(We(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var n=Un();return Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)("h4",{children:"Chat rooms: "}),Object(a.jsx)(Ot.d,{to:"/messenger",activeClassName:"navchat",children:Object(a.jsx)(vt.a,{src:Pn})}),Object(a.jsx)("h4",{children:"PM: "}),Object(a.jsx)("div",{className:n.pmWrapper,children:e.map((function(e,t){var r;return Object(a.jsx)(Ot.d,{to:"/messenger/".concat(e.id),activeClassName:"navchat",children:Object(a.jsx)(zn,{badgeContent:e.newMessagesCount,color:"secondary",children:Object(a.jsx)(Bn.a,{className:n.chip,avatar:Object(a.jsx)(vt.a,{src:(null===e||void 0===e||null===(r=e.photos)||void 0===r?void 0:r.small)||xt}),label:null===e||void 0===e?void 0:e.userName,clickable:!0},t)})},e.id)}))})]})},Mn=function(e){var t=e.routerId,n=ht(),r=Object(l.a)({initialValues:{message:""},onSubmit:function(e){var r,a,c=e.message;n((r=t,a=c,function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(r,a);case 2:return t(qe(r)),e.next=5,Se();case 5:n=e.sent,t(We(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),i()}}),c=r.handleSubmit,s=r.handleChange,o=r.values,i=r.resetForm;return Object(a.jsx)(Nn,{handleSubmit:c,onChange:s,value:o.message})},Tn=n(169),qn=n.n(Tn),Jn=n(168),Hn=n.n(Jn),Vn=Object(T.a)((function(){return{root:{backgroundColor:"#36393f",padding:15},messagesWrapper:{overflowY:"auto",height:500,padding:8,position:"relative"},messageBody:{color:"#dcddde",wordBreak:"break-word"},doneIcon:{color:"orange",fontSize:12},doneAllIcon:{color:"green",fontSize:12},addedAt:{fontSize:10,color:"grey"},senderName:{color:"#fff",fontWeight:700,marginRight:10},messageContent:{display:"flex",padding:"9px 0",borderTop:"1px solid #40444b",alignItems:"center","&:hover":{"&>*":{"&>*":{"&>*":{opacity:1}}}}},deleteIcon:{cursor:"pointer",opacity:0,fontSize:15,marginLeft:5},messageTitle:{display:"flex",alignItems:"center","&:hover":{"&>*":{opacity:1}}},avatar:{marginRight:15}}})),Yn=n(170),_n=n.n(Yn),Gn=function(e){var t=e.routerId,n=e.recipient,r=ht(),s=Vn(),o=Object(F.c)((function(e){return e.dialogs.messages})),i=Object(F.c)((function(e){return e.dialogs.messagesFething})),l=Object(F.c)((function(e){return e.profile})).authUser,u=Object(c.useRef)(null);return Object(c.useEffect)((function(){r(Me([])),r(qe(t))}),[t]),Object(c.useEffect)((function(){r(Te()),u.current&&u.current.scrollIntoView(!1)}),[o]),Object(a.jsxs)(L.a,{item:!0,xs:!0,className:s.root,children:[Object(a.jsxs)(L.a,{className:s.messagesWrapper,children:[i&&!o?Object(a.jsx)(gt,{}):Object(a.jsx)(a.Fragment,{children:null===o||void 0===o?void 0:o.map((function(e,c){var o,i;return Object(a.jsxs)(L.a,{item:!0,className:s.messageContent,children:[Object(a.jsx)(vt.a,{alt:"avatar",className:s.avatar,src:e.senderId===(null===l||void 0===l?void 0:l.userId)?null===l||void 0===l||null===(o=l.photos)||void 0===o?void 0:o.large:null===n||void 0===n||null===(i=n.photos)||void 0===i?void 0:i.large}),Object(a.jsxs)(L.a,{container:!0,children:[Object(a.jsx)("span",{className:s.senderName,children:e.senderName}),Object(a.jsxs)(L.a,{className:s.messageTitle,children:[Object(a.jsx)("span",{children:e.senderId===(null===l||void 0===l?void 0:l.userId)&&(e.viewed?Object(a.jsx)(Hn.a,{className:s.doneAllIcon}):Object(a.jsx)(qn.a,{className:s.doneIcon}))}),Object(a.jsx)("span",{className:s.addedAt,children:pn(e.addedAt)}),Object(a.jsx)(_n.a,{onClick:function(){return r((n=e.id,a=t,function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(n);case 2:0===e.sent.resultCode&&(t(qe(a)),t(Be(n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n,a},className:s.deleteIcon,color:"secondary"})]}),Object(a.jsx)(L.a,{container:!0,spacing:2,alignItems:"center",className:s.messageBody,children:Object(a.jsx)(L.a,{item:!0,children:e.body})})]})]},c)}))}),Object(a.jsx)("div",{ref:u})]}),Object(a.jsx)(L.a,{container:!0,children:Object(a.jsx)(Mn,{routerId:t})})]})},Kn=Object(T.a)((function(e){return{root:{width:250,padding:"100px 0px",background:"#2f3136",borderRadius:"0 0 15px 0",color:"#8e9297",position:"relative",height:600,"&:hover":{color:e.palette.primary.main}},avatar:{borderRadius:"50%",width:250,height:250,padding:30}}})),Zn=function(e){var t=e.recipient,n=e.routerId,r=Kn();return Object(a.jsx)(Ot.c,{to:"/profile/"+n,children:Object(a.jsxs)(L.a,{container:!0,direction:"column",alignItems:"center",justify:"space-around",className:r.root,children:[Object(a.jsx)("h2",{children:null===t||void 0===t?void 0:t.userName}),Object(a.jsx)(vt.a,{alt:"profile avatar",src:(null===t||void 0===t?void 0:t.photos.large)||xt,className:r.avatar}),Object(a.jsxs)(L.a,{container:!0,direction:"column",alignItems:"center",children:[Object(a.jsx)("div",{children:" Was online:"}),Object(a.jsx)("div",{children:(null===t||void 0===t?void 0:t.lastUserActivityDate)&&pn(null===t||void 0===t?void 0:t.lastUserActivityDate)})]})]})})},Xn=Object(T.a)((function(e){return{root:{width:250,padding:"20px 0px",background:"#2f3136",color:"white",display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"0 0 15px 0",height:600},user:{color:"#8e9297",fontSize:14,padding:"10px 20px","&:hover":{background:"rgba(79,84,92,0.32)",color:e.palette.primary.main,borderRadius:7}},avatar:{width:30,height:30},usersWrapper:{overflowY:"auto",margin:"16px 0px"}}})),$n=Object(qt.a)((function(e){return{badge:{backgroundColor:"#44b700",boxShadow:"0 0 0 1px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%"}}}}))(Jt.a),Qn=function(){var e,t=Object(F.c)((function(e){return e.chat})).messages.filter((e=Object.create(null),function(t){return!e[t.userId]&&(e[t.userId]=!0)})),n=Xn();return Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsxs)("h4",{children:["Users \u2014 ",null===t||void 0===t?void 0:t.length]}),Object(a.jsx)("div",{className:n.usersWrapper,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(a.jsx)(Ot.c,{to:"/messenger/".concat(e.userId||e.id),children:Object(a.jsxs)(L.a,{container:!0,alignItems:"center",className:n.user,children:[Object(a.jsx)(L.a,{item:!0,children:Object(a.jsx)($n,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(a.jsx)(vt.a,{alt:"Remy Sharp",src:null===e||void 0===e?void 0:e.photo,className:n.avatar})})}),Object(a.jsx)("p",{style:{marginLeft:12},children:e.userName})]})},t)}))})]})},er=Object(Bt.g)((function(e){var t=e.match,n=Object(F.c)((function(e){return e.dialogs})).dialogs,r=t.params.userId,s=n.filter((function(e){return e.id==r}))[0],o=Object(F.c)((function(e){return e.chat})).status,i=ht();return Object(c.useEffect)((function(){return i(function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qe(),tt("messages-received",ut(t)),tt("status-changed",jt(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){i(function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nt("messages-received",ut(t)),nt("status-changed",jt(t)),et();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),[]),Object(a.jsxs)(L.a,{container:!0,direction:"row",justify:"center",children:[Object(a.jsx)(L.a,{item:!0,xs:2,children:Object(a.jsx)(Wn,{})}),Object(a.jsx)(L.a,{item:!0,xs:10,children:Object(a.jsx)(L.a,{container:!0,children:r?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Gn,{routerId:r,recipient:s}),Object(a.jsx)(Zn,{routerId:r,recipient:s})]}):Object(a.jsxs)(a.Fragment,{children:["error"===o&&Object(a.jsx)("div",{children:"Some error occured. Please refresh the page"}),Object(a.jsx)(En,{}),Object(a.jsx)(Qn,{})]})})})]})})),tr=n(370),nr=n(171),rr=n.n(nr),ar=Object(T.a)((function(){return{wrapper:{color:"white",display:"flex",alignItems:"center",padding:"10px 30px",width:1240},authUserWrapper:{justifyContent:"flex-end",alignItems:"center",paddingRight:50},root:{background:"linear-gradient(to top, #232526, #414345)",borderRadius:"15px 15px 0 0"}}})),cr=function(){var e,t,n=ar(),c=Object(F.c)((function(e){return e.profile.authUser})),o=Object(F.c)((function(e){return e.auth})),i=o.isAuth,l=o.id,u=Object(F.b)(),b=Object(F.c)((function(e){return e.dialogs})).newMessagesCount;s.a.useEffect((function(){l&&(u(je(l)),u(Te()))}),[u,l]);return Object(a.jsx)("div",{className:n.root,children:Object(a.jsxs)("div",{className:n.wrapper,children:[Object(a.jsx)(L.a,{container:!0,spacing:6,children:["profile","users","messenger"].map((function(e){return Object(a.jsx)(L.a,{item:!0,children:Object(a.jsx)(Ot.d,{to:"/"+e,activeClassName:"header",children:Object(a.jsxs)("h2",{children:[" ",e.toLocaleUpperCase()]})})},e)}))}),i&&Object(a.jsxs)(L.a,{container:!0,spacing:3,className:n.authUserWrapper,children:[Object(a.jsx)(L.a,{item:!0,children:Object(a.jsx)("a",{href:"https://docs.google.com/document/d/1ZSXmTzkgq_Kj1VbWuq8fTv_DPD95GFDvPZgqFeIYGoM/edit#",children:Object(a.jsx)("h2",{children:"API"})})}),Object(a.jsx)(L.a,{item:!0,children:Object(a.jsx)(Ot.c,{to:"/profile",children:Object(a.jsx)("h4",{children:null===c||void 0===c?void 0:c.fullName})})}),Object(a.jsx)(L.a,{item:!0,children:b?Object(a.jsx)(Ot.c,{to:"/messenger",children:Object(a.jsx)(Jt.a,{badgeContent:b,color:"secondary",children:Object(a.jsx)(vt.a,{alt:"Remy Sharp",src:null===c||void 0===c||null===(e=c.photos)||void 0===e?void 0:e.small})})}):Object(a.jsx)(vt.a,{alt:"Remy Sharp",src:null===c||void 0===c||null===(t=c.photos)||void 0===t?void 0:t.small})}),Object(a.jsx)(L.a,{item:!0,children:Object(a.jsx)(Wt.a,{onClick:function(){return u(function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:e.sent.resultCode===r.success&&t(k({id:null,email:null,login:null,isAuth:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:Object(a.jsx)(rr.a,{color:"secondary"})})})]})]})})};var sr=function(){var e=Object(F.c)((function(e){return e.app.isInit})),t=Object(F.c)((function(e){return e.auth.isAuth})),n=Object(F.c)((function(e){return e.auth.id})),r=ht();return Object(c.useEffect)((function(){return r((function(e){e(I()).then((function(){e(Ce())}))}))}),[r]),Object(a.jsx)(tr.a,{style:{width:1240},children:e?t?Object(a.jsxs)("div",{children:[Object(a.jsx)(cr,{}),Object(a.jsxs)(Bt.d,{children:[Object(a.jsx)(Bt.b,{exact:!0,path:"/profile/"+n,render:function(){return Object(a.jsx)(Bt.a,{to:"/profile"})}}),Object(a.jsx)(Bt.b,{exact:!0,path:"/profile/:userId?",render:function(){return Object(a.jsx)(Dn,{})}}),Object(a.jsx)(Bt.b,{exact:!0,path:"/users",render:function(){return Object(a.jsx)(Et,{})}}),Object(a.jsx)(Bt.b,{exact:!0,path:"/messenger/"+n,render:function(){return Object(a.jsx)(Bt.a,{to:"/messenger"})}}),Object(a.jsx)(Bt.b,{exact:!0,path:"/messenger/:userId?",render:function(){return Object(a.jsx)(er,{})}}),Object(a.jsx)(Bt.b,{exact:!0,path:"*",render:function(){return Object(a.jsx)(Bt.a,{to:"/profile"})}})]})]}):Object(a.jsx)(mt,{}):Object(a.jsx)(gt,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var or=n(172),ir=n(371),lr=n(372),ur=Object(or.a)({palette:{type:"dark",primary:{main:"#00BFFF"},secondary:{main:"#B22222"}}});i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(Ot.a,{children:Object(a.jsx)(F.a,{store:pt,children:Object(a.jsx)(ir.a,{theme:ur,children:Object(a.jsxs)(Ot.b,{children:[Object(a.jsx)(lr.a,{}),Object(a.jsx)(sr,{})]})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[319,1,2]]]);
//# sourceMappingURL=main.ab4083db.chunk.js.map