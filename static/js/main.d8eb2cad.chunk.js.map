{"version":3,"sources":["common/types/types.ts","app/api/api.ts","app/api/auth-api.ts","app/reducers/auth-reducer.ts","pages/LoginPage/login_styles.tsx","app/api/profile-api.ts","app/api/users-api.ts","app/reducers/profile-reducer.ts","common/posts.js","app/reducers/users-reducer.ts","app/reducers/app-reducer.ts","app/api/dialogs-api.ts","app/reducers/dialogs-reducer.ts","app/api/chat-api.ts","app/reducers/chat-reducer.ts","app/store.ts","pages/LoginPage/LoginPage.tsx","common/preloader2.js","common/assets/img/defaultAvatar.png","pages/UsersPage/UsersList/usersList_styles.tsx","components/FriendButton/FriendButton.tsx","pages/UsersPage/UsersList/UsersList.tsx","common/useDebounce.js","pages/UsersPage/UsersFilter/usersFilter_styles.tsx","pages/UsersPage/UsersFilter/UsersFilter.tsx","pages/UsersPage/Users.tsx","pages/ProfilePage/ProfileMain/profileMain_styles.tsx","pages/ProfilePage/ProfileMain/ProfileFriends/profileFriends_style.tsx","pages/ProfilePage/ProfileMain/ProfileFriends/ProfileFriends.tsx","common/randomArray.js","pages/ProfilePage/ProfileMain/ProfileAvatar/profileAvatar_styles.tsx","pages/ProfilePage/ProfileMain/ProfileAvatar/ProfileAvatar.tsx","pages/ProfilePage/ProfileMain/ProfileStatus/useStatus.js","pages/ProfilePage/ProfileMain/ProfileStatus/profileStatus_styles.tsx","pages/ProfilePage/ProfileMain/ProfileStatus/ProfileStatus.tsx","pages/ProfilePage/ProfileMain/ProfileMain.tsx","pages/ProfilePage/ProfileInfo/profileInfo_styles.tsx","pages/ProfilePage/ProfileInfo/ProfileInfo.tsx","pages/ProfilePage/ProfileInfo/ProfileEditForm/profileEditForm_style.tsx","pages/ProfilePage/ProfileInfo/ProfileEditForm/ProfileEditForm.tsx","common/dateHelper.js","pages/ProfilePage/ProfileWall/ProfilePost/profilePosts_styles.tsx","pages/ProfilePage/ProfileWall/ProfilePost/ProfilePosts.tsx","pages/ProfilePage/ProfileWall/profileWall_styles.tsx","pages/ProfilePage/ProfileWall/ProfileWall.tsx","pages/ProfilePage/profile_styles.tsx","pages/ProfilePage/ProfilePage.tsx","components/ChatInput/chatInput_styles.tsx","components/ChatInput/ChatInput.tsx","pages/MessangerPage/ChatMessages/ChatForm/ChatForm.tsx","pages/MessangerPage/ChatMessages/chatMessages_styles.tsx","pages/MessangerPage/ChatMessages/ChatMessages.tsx","common/assets/img/devs.jpg","components/ChatNavBar/chatNavBar_styles.tsx","components/ChatNavBar/ChatNavBar.tsx","pages/MessangerPage/privateMessages/PrivateForm/PrivateForm.tsx","pages/MessangerPage/privateMessages/privateMessages_styles.tsx","pages/MessangerPage/privateMessages/PrivateMessages.tsx","pages/MessangerPage/privateUserInfo/privateUserInfo_styles.tsx","pages/MessangerPage/privateUserInfo/PrivateUserInfo.tsx","pages/MessangerPage/ChatUsersList/chatUsersList_styles.tsx","pages/MessangerPage/ChatUsersList/ChatUsersList.tsx","pages/MessangerPage/MessengerPage.tsx","common/preloader.jsx","components/Header/header_styles.tsx","components/Header/Header.tsx","App.jsx","serviceWorker.js","index.tsx"],"names":["resultCodeEnum","instance","axios","create","withCredentials","baseURL","headers","login","email","password","rememberMe","authAPI","get","then","res","data","loginUserData","post","delete","authSlice","createSlice","name","initialState","id","isAuth","captchaUrl","errorMessage","reducers","setCaptchaUrl","state","action","payload","setauthUserData","setErrorMessage","actions","getAuthUserData","dispatch","a","response","resultCode","success","loginStyles","makeStyles","theme","root","padding","spacing","flexDirection","textAlign","margin","background","height","width","color","borderRadius","paddingBottom","icon","fontSize","palette","primary","main","captcha","error","profileAPI","userId","status","put","photo","formData","FormData","append","profile","usersAPI","currentPage","pageSize","searchTerm","friend","profileSlice","authUser","posts","body","date","likesCount","isLiked","isLoading","isError","setUserProfile","setUserStatus","setauthUser","setNewAvatar","photos","setUserFollowStatus","followed","setPost","push","setLike","item","idx","like","checked","setIsLoading","setIsError","getUserProfile","profileData","profileStatus","followStatus","getAuthUser","usersSlice","users","totalUsersCount","isFetching","followingInProgress","filter","setIsFetching","setUsers","console","log","setCurrentPage","setTotalUsersCount","toggleFollow","map","user","setFollowingInProgress","setPageSize","setFilter","appSlice","isInit","setInit","dialogsAPI","messageId","dialogsSlice","dialogs","messages","dialogsFetching","messagesFething","newMessagesCount","setDialogsFetching","setMessagesFetching","setDialogs","setMessages","items","setNewMessagesCount","setDeletedMessage","getNewMessagesCount","count","getMessages","subcribers","ws","closeHandler","notifySubscribersAboutStatus","setTimeout","createChannel","messageHandler","e","newMessages","JSON","parse","forEach","s","openHandler","errorHandler","cleanUp","removeEventListener","close","WebSocket","addEventListener","chatAPI","eventName","callback","message","send","chatSlice","messagesReceived","length","m","v1","index","array","statusChanged","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","store","configureStore","reducer","app","appReducer","usersReducer","chat","chatReducer","auth","authReducer","profileReducer","dialogsReducer","middleware","getDefaultMiddleware","serializableCheck","useAppDispatch","useDispatch","LoginPage","useSelector","classes","useFormik","initialValues","validationSchema","Yup","required","min","max","onSubmit","loginData","url","serverError","sendLogin","handleSubmit","handleChange","values","errors","touched","handleBlur","Grid","container","component","className","Typography","variant","TextField","label","onBlur","size","onChange","value","type","FormControlLabel","control","Checkbox","src","alt","Button","startIcon","Preloader2","usersList","overflowY","paddingLeft","card","backgroundColor","cardmedia","notfound","FriendButton","fullWidth","disabled","some","onClick","follow","UsersList","React","memo","xs","Card","CardActionArea","to","CardMedia","image","large","defaultAvatar","title","CardContent","useDebounce","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","clearTimeout","usersFilter","display","alignItems","UsersFilter","debouncedSearchTerm","debouncedCurrentPage","page","totalCount","getUsers","event","target","FormControl","RadioGroup","row","aria-label","Radio","TablePagination","onChangePage","newPage","rowsPerPage","onChangeRowsPerPage","parseInt","Users","style","position","profileMain","fullName","fontWeight","wordBreak","friends","borderTop","paddingTop","friendButton","pmButton","profileFreinds","friendsWrapper","avatar","marginBottom","friendItemWrapper","friendsLabel","ProfileFriends","randomUsers","arr","len","sorted","slice","sort","Math","random","randomArray","justify","Avatar","profileAvatar","uploadButton","secondary","StyledBadge","withStyles","badge","top","right","Badge","ProfileAvatar","routerId","badgeContent","accept","files","file","htmlFor","IconButton","useStatus","editMode","setEditMode","userStatus","updateStatus","cursor","input","marginRight","minHeight","ProfileStatus","onStatusChange","deactivateMode","InputBase","autoFocus","endAdornment","ProfileMain","direction","toUpperCase","profileInfoStyles","maxWidth","justifyContent","descriptionLabel","ProfileInfo","setEditForm","isContacts","contacts","Object","find","i","aboutMe","lookingForAJobDescription","lookingForAJob","keys","key","href","profileEditForm","leftBlock","rightBlock","job","buttons","ProfileEditForm","putNewProfile","placeholder","rowsMax","multiline","labelPlacement","dateHelper","timeZone","ruTime","Date","getTime","currentTime","toLocaleTimeString","hour","minute","formatedDate","toLocaleDateString","currentDate","yesterdayDate","now","visibleDate","profilePosts","paddingRight","postWrapper","marginTop","ProfilePosts","small","FavoriteBorder","checkedIcon","Favorite","profileWall","wrapper","marginLeft","inputWrapper","ProfileWall","toJSON","resetForm","profileStyles","rightBlockWrapper","Alert","props","elevation","withRouter","match","authUserId","params","profileUserId","editForm","handleClose","Snackbar","open","autoHideDuration","onClose","severity","chatForm","ChatInput","inputProps","ChatForm","sendMessage","chatMessages","senderName","messageBody","messagesWrapper","ChatMessages","messagesEndRef","useRef","current","scrollIntoView","userName","ref","messengerNavBar","pmWrapper","chip","NavBadge","ChatNavBar","activeClassName","devs","Chip","clickable","PrivateForm","privateMessages","doneIcon","doneAllIcon","addedAt","messageContent","opacity","deleteIcon","messageTitle","PrivateMessages","recipient","senderId","viewed","privateUserInfo","PrivateUserInfo","lastUserActivityDate","chatUsersList","usersWrapper","boxShadow","paper","left","ChatUsersList","temp","overlap","anchorOrigin","vertical","horizontal","Preloader","CircularProgress","header","authUserWrapper","Header","toLocaleUpperCase","App","Container","exact","path","render","Boolean","window","location","hostname","createMuiTheme","ReactDOM","StrictMode","ThemeProvider","CssBaseline","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d8eb2cad.chunk.js","sourcesContent":["export enum resultCodeEnum {\r\n\tsuccess = 0,\r\n\terror = 1,\r\n\tcaptcha = 10\r\n}\r\n\r\nexport type loginUserData = {\r\n\temail: string\r\n\tpassword: string\r\n\trememberMe: boolean\r\n\tcaptcha: string\r\n}\r\n\r\nexport type profileDataType = {\r\n\tuserId: number\r\n\taboutMe: string | null\r\n\tlookingForAJob: boolean\r\n\tlookingForAJobDescription: string | null\r\n\tfullName: string | null\r\n\tfollowed: boolean\r\n\tphotos: photosType\r\n\tcontacts: {\r\n\t\t[facebook: string]: string | null\r\n\t\tinstagram: string | null\r\n\t\tvk: string | null\r\n\t\tgithub: string | null\r\n\t\tmainLink: string | null\r\n\t\ttwitter: string | null\r\n\t\twebsite: string | null\r\n\t\tyoutube: string | null\r\n\t}\r\n}\r\n\r\n\r\nexport type responseResultObject = {\r\n\tdata: {}\r\n\tfieldsErrors: Array<string>\r\n\tmessages: Array<string>\r\n\tresultCode: resultCodeEnum\r\n}\r\nexport type photosType = {\r\n\tlarge: string\r\n\tsmall: string\r\n}\r\nexport type usersSearchType = {\r\n\tcurrentPage: number,\r\n\tpageSize: number,\r\n\tsearchTerm: string,\r\n\tfriend: string,\r\n}\r\nexport type allUsersItemType = {\r\n\tfollowed: boolean\r\n\tid: number\r\n\tname: string\r\n\tphotos: photosType\r\n\tstatus: null | string\r\n\tuniqueUrlName: null | string\r\n}\r\nexport type dialogsArrayType = {\r\n\thasNewMessages: boolean\r\n\tid: number\r\n\tlastDialogActivityDate: string\r\n\tlastUserActivityDate: string\r\n\tnewMessagesCount: number\r\n\tphotos: photosType\r\n\tuserName: string\r\n}\r\n\r\nexport type messagesArrayType = {\r\n\taddedAt: string\r\n\tbody: string\r\n\tdeletedByRecipient?: boolean\r\n\tdeletedBySender?: boolean\r\n\tdistributionId?: number | null\r\n\tid: string\r\n\tisSpam?: boolean\r\n\trecipientId: number\r\n\trecipientName?: string\r\n\tsenderId: number\r\n\tsenderName: string\r\n\ttranslatedBody: null\r\n\tviewed?: boolean\r\n}\r\nexport type postType = {\r\n\tuserId: number | null\r\n\tdate: string\r\n\tbody: string\r\n\tlikesCount: number\r\n\tisLiked: boolean\r\n}\r\n\r\n\r\n","import axios from \"axios\";\r\n\r\nexport const instance = axios.create({\r\n\twithCredentials: true, //? withCredentials() makes your browser include cookies and authentication headers in your XHR request.\r\n\tbaseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n\theaders: { \"API-KEY\": \"ca0951c1-2a9d-481e-a273-3d5f60141d92\" },\r\n});\r\n","import { loginUserData, resultCodeEnum } from \"../../common/types/types\";\r\nimport { instance } from \"./api\";\r\nconst login ={\r\n\temail: 'secondjump@bk.ru',\r\n\tpassword: 'qwaszx',\r\n\trememberMe: true\r\n}\r\n\t//апи\r\nexport const authAPI = {\r\n\tme() {\r\n\t\treturn instance.get<responseIsAuthUser>(`auth/me`).then((res) => res.data);\r\n\t},\r\n\tlogin(loginUserData: loginUserData) {\r\n\t\treturn instance.post<responseLoginUser>('/auth/login', login).then((res) => res.data);\r\n\t},\r\n\tlogout() {\r\n\t\treturn instance.delete<responseLogoutUser>(`auth/login`).then(res => res.data);\r\n\t},\r\n\tgetCaptchaUrl() {\r\n\t\treturn instance.get<responseCaptchaUrl>(`security/get-captcha-url`).then(res => res.data)\r\n\t},\r\n};\r\n\r\n\t//типы\r\ntype responseIsAuthUser = {\r\n\tdata: { id: number, email: string, login: string }\r\n\tresultCode: resultCodeEnum\r\n\tmessages: Array<string>\r\n\tfieldsErrors:Array<string>\r\n}\r\ntype responseLoginUser = {\r\n\tdata: { userId: number }\r\n\tresultCode: resultCodeEnum\r\n\tmessages: Array<string>\r\n}\r\ntype responseLogoutUser = {\r\n\tresultCode: resultCodeEnum\r\n}\r\ntype responseCaptchaUrl = {\r\n\turl: string\r\n}\r\n\r\n","import { createSlice } from '@reduxjs/toolkit'\r\nimport { authAPI } from '../api/auth-api'\r\nimport { loginUserData, resultCodeEnum } from '../../common/types/types'\r\nimport { AppDispatch } from '../store'\r\n\r\n//типы\r\nconst initialState = {\r\n\tid: null as number | null,\r\n\temail: null as string | null,\r\n\tlogin: null as string | null,\r\n\tisAuth: false ,\r\n\tcaptchaUrl: null as string | null,\r\n\terrorMessage: null as string | null\r\n}\r\n\r\nexport const authSlice = createSlice({\r\n\tname: 'auth',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetCaptchaUrl: (state, action) => { state.captchaUrl = action.payload },\r\n\t\tsetauthUserData: (state, action) => {\r\n\t\t\treturn { ...state, ...action.payload }\r\n\t\t},\r\n\t\tsetErrorMessage: (state, action) => { state.errorMessage = action.payload },\r\n\t},\r\n})\r\n//actions\r\nexport const { setCaptchaUrl, setauthUserData, setErrorMessage } = authSlice.actions\r\n//thunks\r\nexport const getCaptcha = () => async (dispatch: AppDispatch) => {\r\n\tconst { url } = await authAPI.getCaptchaUrl()\r\n\tdispatch(setCaptchaUrl(url))\r\n}\r\nexport const logout = () => async (dispatch: AppDispatch) => {\t\r\n\tconst response = await authAPI.logout()\r\n\tif (response.resultCode === resultCodeEnum.success) {\r\n\t\tdispatch(setauthUserData({ id: null, email: null, login: null, isAuth: false }))\r\n\t}\r\n}\r\nexport const sendLogin = (loginUserData: loginUserData) => async (dispatch: AppDispatch) => {\r\n\tconst loginData = await authAPI.login(loginUserData)\r\n\tif (loginData.resultCode === resultCodeEnum.success) {\r\n\t\tdispatch(getAuthUserData())\r\n\t} else {\r\n\t\tif (loginData.resultCode === resultCodeEnum.captcha) {\r\n\t\t\tdispatch(getCaptcha())\r\n\t\t}\r\n\t\tconst serverError = loginData.messages.length > 0 ? loginData.messages[0] : 'Some Error'\r\n\t\tdispatch(setErrorMessage(serverError))\r\n\t}\r\n}\r\nexport const getAuthUserData = () => async (dispatch: AppDispatch) => {\r\n\tconst response = await authAPI.me()\r\n\tif (response.resultCode === resultCodeEnum.success) { \r\n\t\tdispatch(setauthUserData({...response.data,isAuth:true})\r\n\t\t)\r\n\t}\r\n}\r\nexport default authSlice.reducer\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nexport const loginStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(5),\r\n\t\tflexDirection: 'column',\r\n\t\ttextAlign: 'center',\r\n\t\tmargin: '0 auto',\r\n\t\tbackground: '#2f3136',\r\n\t\theight: '100%',\r\n\t\twidth: 500,\r\n\t\tcolor: 'white',\r\n\t\tborderRadius: 20,\r\n\t\t'&>*': { paddingBottom: theme.spacing(1) },\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 90,\r\n\t\twidth: '100%',\r\n\t\tcolor: theme.palette.primary.main,\r\n\t},\r\n\tcaptcha:\r\n\t{\r\n\t\tmargin: '0 auto',\r\n\t\twidth: '100px'\r\n\t},\r\n\terror: {\r\n\t\tcolor: 'red',\r\n\t}\r\n}))\r\n","import { instance } from \"./api\";\r\nimport { resultCodeEnum, responseResultObject, photosType, profileDataType } from \"../../common/types/types\";\r\n\r\nexport const profileAPI = {\r\n\tgetProfile(userId: number | null) {\r\n\t\treturn instance.get<responseGetUserProfile>(`profile/` + userId).then((res) => res.data);\r\n\t},\r\n\tgetStatus(userId: number | null) {\r\n\t\treturn instance.get<string>(`profile/status/` + userId).then((res) => res.data); //запрос статуса отдельно с сервера\r\n\t},\r\n\tupdateStatus(status: string) {\r\n\t\treturn instance\r\n\t\t\t.put<responseResultObject>(`profile/status/`, { status: status })\r\n\t\t\t.then((res) => res.data);\r\n\t},\r\n\tupdateAvatar(photo: File) {\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"image\", photo);\r\n\t\treturn instance.put<responseUpdatePhoto>(`profile/photo`, formData, {\r\n\t\t\theaders: { \"Content-Type\": \"multipart/form-data\" },\r\n\t\t})\r\n\t\t\t.then((res) => res.data);\r\n\t},\r\n\tgetFollowStatus(userId: number | null) {\r\n\t\treturn instance.get<responseResultObject>(`follow/${userId}`).then(res => res.data)\r\n\t},\r\n\r\n\tupdateProfile(profile: profileDataType) {\r\n\t\treturn instance.put<responseUpdatePhoto>(`profile`, profile).then((res) => res.data);\r\n\t},\r\n};\r\n\r\n//типы\r\ntype responseGetUserProfile = {\r\n\tuserId: number\r\n\taboutMe: string | null\r\n\tlookingForAJob: boolean\r\n\tlookingForAJobDescription: string | null\r\n\tfullName: string\r\n\tphotos: photosType\r\n\tcontacts: {\r\n\t\tfacebook: string | null\r\n\t\tinstagram: string | null\r\n\t\tvk: string | null\r\n\t\tgithub: string | null\r\n\t\tmainLink: string | null\r\n\t\ttwitter: string | null\r\n\t\twebsite: string | null\r\n\t\tyoutube: string | null\r\n\t}\r\n}\r\ntype responseUpdatePhoto = {\r\n\tdata: {\r\n\t\tphotos: photosType\r\n\t}\r\n\tfieldsErrors: Array<string>\r\n\tmessages: Array<string>\r\n\tresultCode: resultCodeEnum\r\n}\r\n","import { responseResultObject ,allUsersItemType } from \"../../common/types/types\";\r\nimport { instance } from \"./api\";\r\n\r\n\r\nexport const usersAPI = {\r\n\tgetUsers(currentPage: number, pageSize: number, searchTerm: string, friend: string) {\r\n\t\treturn instance.get<responseGetUsers>(`users?page=${currentPage}&count=${pageSize}&term=${searchTerm}&friend=${friend}`)\r\n\t\t\t.then(res => res.data)\r\n\t},\r\n\tfollowAPI(userId: number) {\r\n\t\treturn instance.post<responseResultObject>(`follow/${userId}`).then(res => res.data)\r\n\t},\r\n\tunFollowAPI(userId: number) {\r\n\t\treturn instance.delete<responseResultObject>(`follow/${userId}`).then(res => res.data)\r\n\t}\r\n}\r\n\r\n//типы\r\ntype responseGetUsers = {\r\n\terror: boolean\r\n\titems: Array<allUsersItemType>\r\n\ttotalCount: number\r\n}","import { profileAPI } from \"../api/profile-api\";\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport { postType, profileDataType, resultCodeEnum } from '../../common/types/types'\r\nimport { posts } from \"../../common/posts\";\r\nimport { AppDispatch } from \"../store\";\r\n\r\nexport const profileSlice = createSlice({\r\n\tname: 'profile',\r\n\tinitialState: {\r\n\t\tauthUser: {} as profileDataType,\r\n\t\tprofile: {} as profileDataType,\r\n\t\tstatus: \"\",\r\n\t\tposts: posts as Array<postType>,\r\n\t\tisLoading: true,\r\n\t\tisError: '' as string\r\n\t},\r\n\treducers: {\r\n\t\tsetUserProfile: (state, { payload }) => { state.profile = payload },\r\n\t\tsetUserStatus: (state, { payload }) => { state.status = payload },\r\n\t\tsetauthUser: (state, { payload }) => { state.authUser = payload },\r\n\t\tsetNewAvatar: (state, { payload }) => { state.authUser.photos = state.profile.photos = payload },\r\n\t\tsetUserFollowStatus: (state, { payload }) => { state.profile = { ...state.profile, followed: payload } },\r\n\t\tsetPost: (state, { payload }) => {\r\n\t\t\tstate.posts.push(payload)\r\n\t\t},\r\n\t\tsetLike: (state, { payload }) => {\r\n\t\t\tconst item = state.posts[payload.idx]\r\n\t\t\titem.isLiked = payload.like.checked\r\n\t\t\tpayload.like.checked ? ++item.likesCount : --item.likesCount\r\n\t\t},\r\n\t\tsetIsLoading: (state, {payload}) => { state.isLoading = payload },\r\n\t\tsetIsError: (state, {payload}) => { state.isError = payload }\r\n\t}\r\n})\r\n//action\r\nexport const { setIsError, setIsLoading, setLike, setPost, setUserFollowStatus, setUserProfile, setUserStatus, setauthUser, setNewAvatar } = profileSlice.actions;\r\n//thunk\r\nexport const getUserProfile = (id: number) => async (dispatch: AppDispatch) => {\r\n\ttry {\r\n\t\tdispatch(setIsLoading(true))\r\n\t\tconst profileData = await profileAPI.getProfile(id)\r\n\t\tconst profileStatus = await profileAPI.getStatus(id)\r\n\t\tconst followStatus = await profileAPI.getFollowStatus(id)\r\n\t\tdispatch(setUserProfile(profileData))\r\n\t\tdispatch(setUserStatus(profileStatus))\r\n\t\tdispatch(setUserFollowStatus(followStatus))\r\n\t}\r\n\tcatch (error) {\r\n\t\tdispatch(setIsError(error))\r\n\t}\r\n\tfinally {\r\n\t\tdispatch(setIsLoading(false))\r\n\t}\r\n}\r\nexport const getAuthUser = (id: number) => async (dispatch: AppDispatch) => {\r\n\tconst data = await profileAPI.getProfile(id)\r\n\tdispatch(setauthUser(data))\r\n}\r\nexport const updateAvatar = (file: File) => async (dispatch: AppDispatch) => {\r\n\tconst data = await profileAPI.updateAvatar(file)\r\n\tif (data.resultCode === resultCodeEnum.success) {\r\n\t\tdispatch(setNewAvatar(data.data.photos))\r\n\t}\r\n}\r\nexport const updateStatus = (status: string) => async (dispatch: AppDispatch) => {\r\n\tconst data = await profileAPI.updateStatus(status)\r\n\tif (data.resultCode === resultCodeEnum.success) {\r\n\t\tdispatch(setUserStatus(status))\r\n\t}\r\n}\r\nexport const putNewProfile = (profile: profileDataType) => async (dispatch: AppDispatch) => {\r\n\tconst data = await profileAPI.updateProfile(profile)\r\n\tif (data.resultCode === resultCodeEnum.success) {\r\n\t\tdispatch(getUserProfile(profile.userId))\r\n\t\tdispatch(getAuthUser(profile.userId))\r\n\t}\r\n}\r\nexport default profileSlice.reducer;\r\n\r\n\r\n\r\n","export const posts = [{\r\n\tuserId: null,\r\n\tbody: \"Hello world!\",\r\n\tdate: '10/10/20',\r\n\tlikesCount: 14,\r\n\tisLiked: true,\r\n},\r\n{\r\n\tuserId: 1,\r\n\tbody: \"Lorem uae odit blanditiis temporibusinus odio consequatur placeat accusamus ex\",\r\n\tdate: '8/11/20',\r\n\tlikesCount: 1,\r\n\tisLiked: false,\r\n},\r\n{\r\n\tuserId: null,\r\n\tbody: \"Lorem ipsum dolor sit amet, ct blanditiis temporibus hic ipsum eaque, totam magnam minus eum dolorum reprehenderit rem odio consequatur placeat accusamus ex\",\r\n\tdate: '10/12/20',\r\n\tlikesCount: 66,\r\n\tisLiked: false,\r\n}]","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { profileAPI } from \"../api/profile-api\";\r\nimport { usersAPI } from \"../api/users-api\";\r\nimport { allUsersItemType } from \"../../common/types/types\";\r\nimport { AppDispatch } from \"../store\";\r\nimport { setUserFollowStatus } from \"./profile-reducer\";\r\n\r\nconst initialState = {\r\n\tusers: [] as Array<allUsersItemType>,\r\n\tpageSize: 100,\r\n\ttotalUsersCount: 5000,\r\n\tcurrentPage: 0,\r\n\tisFetching: true,\r\n\tfollowingInProgress: [] as number[],\r\n\tfilter: {\r\n\t\tsearchTerm: \"\",\r\n\t\tfriend: 'null',\r\n\t}\r\n}\r\n\r\nexport const usersSlice = createSlice({\r\n\tname: \"users\",\r\n\tinitialState\r\n\t,\r\n\treducers: {\r\n\t\tsetIsFetching: (state, action) => { state.isFetching = action.payload; },\r\n\t\tsetUsers: (state, action) => { state.users = action.payload; console.log(state.users)},\r\n\t\tsetCurrentPage: (state, action) => { state.currentPage = action.payload; },\r\n\t\tsetTotalUsersCount: (state, action) => { state.totalUsersCount = action.payload; },\r\n\t\ttoggleFollow: (state, { payload }) => {\r\n\t\t\tstate.users = state.users.map(user => {\r\n\t\t\t\tif (user.id === payload) { return { ...user, followed: !user.followed } }\r\n\t\t\t\treturn user\r\n\t\t\t})\r\n\t\t},\r\n\t\tsetFollowingInProgress: (state, { payload: { isFetching, userId } }) => {\r\n\t\t\tstate.followingInProgress = isFetching ? [...state.followingInProgress, userId]\r\n\t\t\t\t: state.followingInProgress.filter(id => id !== userId)\r\n\t\t},\r\n\t\tsetPageSize: (state, { payload }) => {\r\n\t\t\tstate.pageSize = payload\r\n\t\t\tstate.currentPage = 0\r\n\t\t},\r\n\t\tsetFilter: (state, { payload }) => { \r\n\t\t\tstate.currentPage = 0\r\n\t\t\tstate.filter = { ...state.filter, ...payload }\r\n\t\t},\r\n\t}\r\n});\r\n//actions\r\nexport const { setFilter,\r\n\tsetCurrentPage,\r\n\tsetPageSize,\r\n\tsetIsFetching,\r\n\tsetUsers,\r\n\tsetTotalUsersCount,\r\n\ttoggleFollow,\r\n\tsetFollowingInProgress,\r\n} = usersSlice.actions;\r\n//thunk\r\nexport const getUsers = (page:number, pageSize:number, searchTerm:string, friend:string) => {\r\n\treturn async (dispatch: AppDispatch) => {\r\n\t\tdispatch(setIsFetching(true));\r\n\t\tdispatch(setCurrentPage(page));\r\n\t\tconst data = await usersAPI.getUsers(page + 1, pageSize, searchTerm, friend);\r\n\t\tdispatch(setIsFetching(false));\r\n\t\tdispatch(setUsers(data.items));\r\n\t\tdispatch(setTotalUsersCount(data.totalCount));\r\n\t};\r\n};\r\nexport const getFriends = (friend:string) => {\r\n\treturn async (dispatch: AppDispatch) => {\r\n\t\tdispatch(setIsFetching(true));\r\n\t\tconst data = await usersAPI.getUsers(1, 100, '', friend);\r\n\t\tdispatch(setUsers(data.items))\r\n\t\tdispatch(setIsFetching(false));\r\n\r\n\t}\r\n}\r\nexport const followUser = (userId:number, follow:boolean) => {\r\n\treturn async (dispatch: AppDispatch) => {\r\n\t\tdispatch(setFollowingInProgress({ isFetching: true, userId }))\r\n\t\tconst response = !follow ? await usersAPI.followAPI(userId) : await usersAPI.unFollowAPI(userId)\r\n\t\tconst followStatus = await profileAPI.getFollowStatus(userId)\r\n\t\tif (response.resultCode === 0) {\r\n\t\t\tdispatch(toggleFollow(userId))\r\n\t\t\tdispatch(setUserFollowStatus(followStatus))\r\n\t\t}\r\n\t\tdispatch(setFollowingInProgress({ isFetching: false, userId }))\r\n\t}\r\n}\r\n\r\nexport default usersSlice.reducer;\r\n","import { getAuthUserData } from \"./auth-reducer\";\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport { AppDispatch } from \"../store\";\r\n\r\n\r\n\r\nexport const appSlice = createSlice({\r\n\tname: \"app\",\r\n\tinitialState: {\r\n\t\tisInit: false,\r\n\t},\r\n\treducers: {\r\n\t\tsetInit: (state) => {\r\n\t\t\tstate.isInit = true;\r\n\t\t},\r\n\t},\r\n});\r\n\r\n//action\r\nexport const { setInit } = appSlice.actions;\r\n//thunk\r\nexport const init = () => (dispatch: AppDispatch) => {\r\n\tdispatch(getAuthUserData()).then(() => {\r\n\t\tdispatch(setInit());\r\n\t});\r\n};\r\n\r\nexport default appSlice.reducer;\r\n\r\n\r\n","import { instance } from \"./api\";\r\nimport { resultCodeEnum, responseResultObject, messagesArrayType, dialogsArrayType } from \"../../common/types/types\";\r\n\r\nexport const dialogsAPI = {\r\n\tgetDialogs() {\r\n\t\treturn instance.get(`/dialogs`).then(res => res.data)\r\n\r\n\t},\r\n\tsendMessage(userId: number, body: string) {\r\n\t\treturn instance.post<Array<dialogsArrayType>>(`/dialogs/${userId}/messages`, { body: body }).then(res => res.data)\r\n\t},\r\n\tgetMessages(userId: number) {\r\n\t\treturn instance.get<responseSendMsg>(`/dialogs/${userId}/messages`).then(res => res.data)\r\n\t},\r\n\tdeleteMessages(messageId: number) {\r\n\t\treturn instance.delete(`/dialogs/messages/${messageId}`).then(res => res.data)\r\n\t},\r\n\tgetNewMessagesCount() {\r\n\t\treturn instance.get<responseGetMessages>(`/dialogs/messages/new/count`).then(res => res.data)\r\n\t},\r\n\tstartDialog(userId: number) {\r\n\t\treturn instance.put<responseResultObject>(`/dialogs/${userId}`).then(res => res.data)\r\n\t},\r\n\tdeleteMessage(messageId: string) {\r\n\t\treturn instance.delete<responseResultObject>(`/dialogs/messages/${messageId}\r\n\t\t`).then(res => res.data)\r\n\t}\r\n}\r\n\r\n//типы\r\ntype responseSendMsg = {\r\n\tdata: {\r\n\t\tmessage: messagesArrayType\r\n\t}\r\n\tfieldsErrors: Array<string>\r\n\tmessages: Array<string>\r\n\tresultCode: resultCodeEnum\r\n}\r\ntype responseGetMessages = {\r\n\terror: boolean\r\n\titems: Array<messagesArrayType>\r\n\ttotalCount: number\r\n}\r\n\r\n","import { dialogsArrayType, messagesArrayType } from '../../common/types/types'\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport { dialogsAPI } from \"../api/dialogs-api\";\r\nimport { AppDispatch } from '../store';\r\n\r\n//типы\r\nconst initialState = {\r\n\tdialogs: [] as dialogsArrayType[],\r\n\tmessages: [] as messagesArrayType[] ,\r\n\tdialogsFetching: true,\r\n\tmessagesFething: true,\r\n\tnewMessagesCount: null as number | null\r\n};\r\n\r\nexport const dialogsSlice = createSlice({\r\n\tname: \"dialogs\",\r\n\tinitialState,\r\n\treducers: {\r\n\t\tsetDialogsFetching: (state, { payload }) => { state.dialogsFetching = payload },\r\n\t\tsetMessagesFetching: (state, { payload }) => {\r\n\t\t\tstate.messagesFething = payload\r\n\t\t},\r\n\t\tsetDialogs: (state, { payload }) => {\r\n\t\t\tstate.dialogs = payload\r\n\t\t},\r\n\t\tsetMessages: (state, { payload }) => {\r\n\t\t\tstate.messages = payload.items\r\n\t\t},\r\n\t\tsetNewMessagesCount: (state, { payload }) => {\r\n\t\t\tstate.newMessagesCount = payload\r\n\t\t},\r\n\t\tsetDeletedMessage(state, { payload }) {\r\n\t\t\tstate.messages = state.messages.filter(item => item.id !== payload)\r\n\t\t}\r\n\t}\r\n})\r\n\r\n//actions\r\nexport const { setDeletedMessage, setNewMessagesCount, setMessagesFetching, setDialogsFetching, setDialogs, setMessages } = dialogsSlice.actions;\r\n//thunks\r\nexport const getNewMessagesCount = () => async (dispatch: AppDispatch) => {\r\n\tconst count = await dialogsAPI.getNewMessagesCount()\r\n\tdispatch(setNewMessagesCount(count))\r\n}\r\nexport const getDialogs = () => async (dispatch: AppDispatch) => {\r\n\tdispatch(setDialogsFetching(true));\r\n\t// обновить chatnavbar\r\n\tconst data = await dialogsAPI.getDialogs();\r\n\tdispatch(setDialogsFetching(false));\r\n\tdispatch(setDialogs(data))\r\n}\r\nexport const getMessages = (id: number) => async (dispatch: AppDispatch) => {\r\n\tdispatch(setMessagesFetching(true));\r\n\tconst response = await dialogsAPI.getMessages(id);\r\n\tdispatch(setMessagesFetching(false));\r\n\tdispatch(setMessages(response))\r\n\t// обновить chatnavbar\r\n\tconst data = await dialogsAPI.getDialogs()\r\n\tdispatch(setDialogs(data))\r\n}\r\nexport const sendMessage = (userId: number, body: string) => async (dispatch: AppDispatch) => {\r\n\tawait dialogsAPI.sendMessage(userId, body)\r\n\tdispatch(getMessages(userId))\r\n\t// обновить chatnavbar\r\n\tconst data = await dialogsAPI.getDialogs()\r\n\tdispatch(setDialogs(data))\r\n}\r\nexport const deleteMessage = (messageId: string, userId: number) => async (dispatch: AppDispatch) => {\r\n\tconst data = await dialogsAPI.deleteMessage(messageId)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(getMessages(userId))\r\n\t\tdispatch(setDeletedMessage(messageId))\r\n\t}\r\n}\r\n\r\nexport default dialogsSlice.reducer;\r\n","const subcribers = {\r\n    'messages-received': [] as MessagesReceivedSubscriberType[],\r\n    'status-changed': [] as StatusChangedSubscriberType[]\r\n}\r\n\r\nlet ws: WebSocket | null = null\r\ntype EventsNamesType = 'messages-received' | 'status-changed'\r\n\r\nconst closeHandler = () => {\r\n    notifySubscribersAboutStatus('pending')\r\n    setTimeout(createChannel, 3000)\r\n}\r\nconst messageHandler = (e: MessageEvent) => {\r\n    const newMessages = JSON.parse(e.data)\r\n    subcribers['messages-received'].forEach(s => s(newMessages))\r\n}\r\nconst openHandler = () => {\r\n    notifySubscribersAboutStatus('ready')\r\n}\r\nconst errorHandler = () => {\r\n    notifySubscribersAboutStatus('error')\r\n    console.error('REFRESH PAGE')\r\n}\r\nconst cleanUp = () => {\r\n    ws?.removeEventListener('close', closeHandler)\r\n    ws?.removeEventListener('message', messageHandler)\r\n    ws?.removeEventListener('open', openHandler)\r\n    ws?.removeEventListener('error', errorHandler)\r\n}\r\nconst notifySubscribersAboutStatus = (status: StatusType) => {\r\n    subcribers['status-changed'].forEach(s => s(status))\r\n}\r\n\r\nfunction createChannel() {\r\n    cleanUp()\r\n    ws?.close()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    notifySubscribersAboutStatus('pending')\r\n    ws.addEventListener('close', closeHandler)\r\n    ws.addEventListener('message', messageHandler)\r\n    ws.addEventListener('open', openHandler)\r\n    ws.addEventListener('error', errorHandler)\r\n}\r\n\r\n\r\nexport const chatAPI = {\r\n    start() {\r\n        createChannel()\r\n    },\r\n    stop() {\r\n        subcribers['messages-received'] = []\r\n        subcribers['status-changed'] = []\r\n        cleanUp()\r\n        ws?.close()\r\n    },\r\n    subscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subcribers[eventName].push(callback)\r\n        return () => {\r\n            // @ts-ignore\r\n            subcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n        }\r\n    },\r\n    unsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subcribers[eventName] = subcribers[eventName].filter(s => s !== callback)\r\n    },\r\n    sendMessage(message: string) {\r\n        ws?.send(message)\r\n    }\r\n}\r\n\r\ntype MessagesReceivedSubscriberType = (messages: ChatMessageAPIType[]) => void\r\ntype StatusChangedSubscriberType = (status: StatusType) => void\r\n\r\nexport type ChatMessageAPIType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n}\r\nexport type StatusType = 'pending' | 'ready' | 'error'","\r\nimport { chatAPI, ChatMessageAPIType, StatusType } from '../api/chat-api'\r\nimport { v1 } from 'uuid'\r\nimport { AppDispatch } from '../store'\r\nimport { createSlice } from '@reduxjs/toolkit';\r\n\r\ntype ChatMessageType = ChatMessageAPIType & { id: string }\r\n\r\nexport const chatSlice = createSlice({\r\n\tname: \"chat\",\r\n\tinitialState: {\r\n\t\tmessages: [] as ChatMessageType[],\r\n\t\tstatus: 'pending' as StatusType\r\n\t},\r\n\treducers: {\r\n\t\tmessagesReceived: (state, { payload }) => { \r\n\t\t\tif (state.messages.length != payload.length)  {state.messages = [...state.messages, ...payload.map((m: any) => ({ ...m, id: v1() }))]\r\n\t\t\t\t.filter((m, index, array) => index >= array.length - 100)\r\n\t\t}},\r\n\t\tstatusChanged: (state, { payload }) => {\r\n\t\t\tstate.status = payload\r\n\t\t}\r\n\r\n\t}\r\n})\r\n\r\nexport const { messagesReceived, statusChanged } = chatSlice.actions;\r\n\r\nlet _newMessageHandler: ((messages: ChatMessageAPIType[]) => void) | null = null\r\n\r\n\r\nconst newMessageHandlerCreator = (dispatch: AppDispatch) => {\r\n\tif (_newMessageHandler === null) {\r\n\t\t_newMessageHandler = (messages) => {\r\n\t\t\tdispatch(messagesReceived(messages))\r\n\t\t}\r\n\t}\r\n\treturn _newMessageHandler\r\n}\r\n\r\nlet _statusChangedHandler: ((status: StatusType) => void) | null = null\r\n\r\n\r\nconst statusChangedHandlerCreator = (dispatch: AppDispatch) => {\r\n\tif (_statusChangedHandler === null) {\r\n\t\t_statusChangedHandler = (status) => {\r\n\t\t\tdispatch(statusChanged(status))\r\n\t\t}\r\n\t}\r\n\treturn _statusChangedHandler\r\n}\r\n\r\nexport const startMessagesListening = () => async (dispatch: AppDispatch) => {\r\n\tchatAPI.start()\r\n\tchatAPI.subscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n\tchatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n\r\n}\r\nexport const stopMessagesListening = () => async (dispatch: AppDispatch) => {\r\n\tchatAPI.unsubscribe('messages-received', newMessageHandlerCreator(dispatch))\r\n\tchatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch))\r\n\tchatAPI.stop()\r\n}\r\n\r\nexport const sendMessage = (message: string) => async () => {\r\n\tchatAPI.sendMessage(message)\r\n}\r\n\r\n\r\nexport default chatSlice.reducer\r\n\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport usersReducer from \"./reducers/users-reducer\";\r\nimport authReducer from \"./reducers/auth-reducer\";\r\nimport appReducer from \"./reducers/app-reducer\";\r\nimport profileReducer from \"./reducers/profile-reducer\";\r\nimport dialogsReducer from \"./reducers/dialogs-reducer\";\r\nimport chatReducer from \"./reducers/chat-reducer\";\r\nimport { useDispatch } from 'react-redux';\r\n\r\nconst store = configureStore({\r\n\treducer: {\r\n\t\tapp: appReducer,\r\n\t\tusers: usersReducer,\r\n\t\tchat:chatReducer,\r\n\t\tauth: authReducer,\r\n\t\tprofile: profileReducer,\r\n\t\tdialogs: dialogsReducer,\r\n\t\t\r\n\t},\r\n\tmiddleware: (getDefaultMiddleware) =>\r\n    getDefaultMiddleware({\r\n      serializableCheck: false, //!почитать \r\n    }),\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>\r\nexport type AppDispatch = typeof store.dispatch\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\r\nexport default store","import { useFormik } from 'formik';\r\nimport { sendLogin } from '../../app/reducers/auth-reducer';\r\nimport { useSelector } from 'react-redux';\r\nimport { TextField, Button, Checkbox, Grid, FormControlLabel, Typography } from '@material-ui/core/';\r\nimport VpnKeyRoundedIcon from '@material-ui/icons/VpnKeyRounded';\r\nimport * as Yup from 'yup';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport { loginStyles } from './login_styles';\r\nimport { RootState } from '../../app/store';\r\nimport { loginUserData } from '../../common/types/types';\r\nimport { useAppDispatch } from '../../app/store';\r\n\r\nexport const LoginPage: React.FC = () => {\r\n\tconst { captchaUrl, errorMessage } = useSelector((state: RootState) => state.auth);\r\n\tconst dispatch = useAppDispatch();\r\n\tconst classes = loginStyles();\r\n\tconst { handleSubmit, handleChange, values, errors, touched, handleBlur } = useFormik({\r\n\t\tinitialValues: {\r\n\t\t\temail: '',\r\n\t\t\tpassword: '',\r\n\t\t\trememberMe: false,\r\n\t\t\tcaptcha: '',\r\n\t\t},\r\n\t\tvalidationSchema: Yup.object({\r\n\t\t\temail: Yup.string().email('Insert correct email ').required('Required'),\r\n\t\t\tpassword: Yup.string()\r\n\t\t\t\t.min(4, 'Password must be longer than 4 characters.')\r\n\t\t\t\t.max(12, 'Password must be shorter than 12 characters.')\r\n\t\t\t\t.required('Required'),\r\n\t\t}),\r\n\t\tonSubmit: (loginUserData: loginUserData) => {\r\n\t\t\tdispatch(sendLogin(loginUserData));\r\n\t\t},\r\n\t});\r\n\treturn (\r\n\t\t<Grid container component='form' onSubmit={handleSubmit} className={classes.root}>\r\n\t\t\t<ExitToAppIcon className={classes.icon} />\r\n\t\t\t<Typography variant='h6' className={classes.error}>\r\n\t\t\t\t{errorMessage}\r\n\t\t\t</Typography>\r\n\t\t\t<TextField label='Email' onBlur={handleBlur} size='small' onChange={handleChange} id='email' name='email' value={values.email} />\r\n\t\t\t{errors.email && touched.email && <div className={classes.error}>{errors.email}</div>}\r\n\t\t\t<TextField\r\n\t\t\t\tlabel='Password'\r\n\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\tsize='small'\r\n\t\t\t\ttype='password'\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\tvariant='standard'\r\n\t\t\t\tid='password'\r\n\t\t\t\tname='password'\r\n\t\t\t\tvalue={values.password}\r\n\t\t\t/>\r\n\t\t\t{errors.password && touched.password && <div className={classes.error}>{errors.password}</div>}\r\n\t\t\t<FormControlLabel\r\n\t\t\t\tcontrol={<Checkbox checked={values.rememberMe} onChange={handleChange} name='rememberMe' color='primary' />}\r\n\t\t\t\tlabel='Remember me'\r\n\t\t\t/>\r\n\t\t\t{captchaUrl && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<img className={classes.captcha} src={captchaUrl} width='100px' alt='captcha' />\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tlabel='Captcha'\r\n\t\t\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\tid='captcha'\r\n\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\tname='captcha'\r\n\t\t\t\t\t\tvalue={values.captcha}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t\t<Button variant='contained' startIcon={<VpnKeyRoundedIcon />} size='large' type='submit' color='primary'>\r\n\t\t\t\tLog In\r\n\t\t\t</Button>\r\n\t\t\t<p>Для тестового просмотра используйте пару логин/пароль: </p>\r\n\t\t\t<p> free@samuraijs.com / free</p>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","import  './preloader2.scss'\r\n\r\nexport const Preloader2 = () => {\r\n\treturn (\r\n<div className=\"container\">\r\n\t<div className=\"📦\"></div>\r\n\t<div className=\"📦\"></div>\r\n\t<div className=\"📦\"></div>\r\n\t<div className=\"📦\"></div>\r\n\t<div className=\"📦\"></div>\r\n</div>\r\n\t)\r\n}","export default __webpack_public_path__ + \"static/media/defaultAvatar.832028ea.png\";","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport const usersList = makeStyles((theme) => ({\r\n\tname: {\r\n\t\tcolor: 'black',\r\n\t\tfontSize: 15,\r\n\t\ttextAlign: 'center',\r\n\t},\r\n\troot: {\r\n\t\toverflowY: 'scroll',\r\n\t\twidth: '100%',\r\n\t\theight: 430,\r\n\t\tpaddingLeft: 30,\r\n\t},\r\n\tcard: {\r\n\t\theight: 150,\r\n\t\tbackgroundColor:'grey',\r\n\r\n\t\t'&>:hover': {\r\n\t\t\tbackground: 'linear-gradient(to right, #8e9eab, #eef2f3)',\r\n\t\t},\r\n\t},\r\n\tcardmedia: {\r\n\t\theight: 90,\r\n\t},\r\n\tnotfound:{\r\n\t\tcolor: 'white',\r\n\t\t textAlign: 'center', \r\n\t\t fontSize: 50, \r\n\t\t margin: '0 auto' \r\n\t}\r\n}))\r\n","import { Button } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { followUser } from '../../app/reducers/users-reducer';\r\nimport React from 'react';\r\nimport { RootState } from '../../app/store';\r\n\r\ninterface IProps {\r\n\tid: number,\r\n\tfollowed: boolean\r\n}\r\n//\r\nexport const FriendButton: React.FC<IProps> = ({ id, followed }) => {\r\n\tconst followingInProgress = useSelector((state: RootState) => state.users.followingInProgress);\r\n\tconst dispatch = useDispatch();\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tcolor={followed ? 'secondary' : 'primary'}\r\n\t\t\tfullWidth\r\n\t\t\tvariant='contained'\r\n\t\t\tdisabled={followingInProgress.some((item) => item === id)}\r\n\t\t\tonClick={() => {\r\n\t\t\t\tdispatch(followUser(+id, followed));\r\n\t\t\t}}>\r\n\t\t\t{followed ? 'Unfriend' : 'Friend'}\r\n\t\t</Button>\r\n\t);\r\n};\r\n\r\n","import { Preloader2 } from '../../../common/preloader2';\r\nimport defaultAvatar from '../../../common/assets/img/defaultAvatar.png';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Card, CardActionArea, CardContent, CardMedia, Grid } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { usersList } from './usersList_styles';\r\nimport { allUsersItemType } from '../../../common/types/types'\r\nimport { FriendButton } from '../../../components/FriendButton/FriendButton';\r\n\r\n\r\n\r\ntype PropsType = {\r\n\tusers: allUsersItemType[],\r\n\tisFetching: boolean\r\n}\r\nexport const UsersList: React.FC<PropsType> = React.memo(({ users, isFetching }) => {\r\n\tconst classes = usersList();\r\n\treturn isFetching ? (\r\n\t\t<Preloader2 />\r\n\t) : (\r\n\t\t\t<Grid container spacing={4} className={classes.root}>\r\n\t\t\t\t{users.length === 0 && <div className={classes.notfound}>User not found</div>}\r\n\t\t\t\t{users &&\r\n\t\t\t\t\tusers\r\n\t\t\t\t\t\t.map((user) => (\r\n\t\t\t\t\t\t\t<Grid item xs={2} key={user.id}>\r\n\t\t\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t\t\t<div className={classes.card}>\r\n\t\t\t\t\t\t\t\t\t\t<CardActionArea>\r\n\t\t\t\t\t\t\t\t\t\t\t<NavLink to={'/profile/' + user.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CardMedia\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.cardmedia}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\timage={user?.photos.large || defaultAvatar}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle='user photo'\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className={classes.name}>{user?.name}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</CardContent>\r\n\t\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t\t\t</CardActionArea>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<FriendButton id={user.id} followed={user.followed} />\r\n\t\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t))}\r\n\t\t\t</Grid>\r\n\t\t);\r\n});\r\n","import { useState, useEffect } from \"react\";\r\n\r\nexport const useDebounce = (value, delay) => {\r\n  // дебаунс для инпутов\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [value, delay]);\r\n  return debouncedValue;\r\n};\r\n","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nexport const usersFilter = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center',\r\n\t\tpadding: 10,\r\n\t},\r\n}))\r\n","import { FormControl, FormControlLabel, Grid, Radio, RadioGroup, TextField } from '@material-ui/core';\r\nimport { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getUsers, setCurrentPage, setFilter, setPageSize, setUsers } from '../../../app/reducers/users-reducer';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport { useDebounce } from '../../../common/useDebounce';\r\nimport { RootState } from '../../../app/store';\r\nimport { usersFilter } from './usersFilter_styles'\r\n\r\n\r\nexport const UsersFilter: React.FC = () => {\r\n\tconst { currentPage, pageSize, totalUsersCount, filter } = useSelector((state: RootState) => state.users);\r\n\tconst classes = usersFilter();\r\n\tconst dispatch = useDispatch();\r\n\tconst debouncedSearchTerm = useDebounce(filter.searchTerm, 1000);\r\n\tconst debouncedCurrentPage = useDebounce(currentPage, 500)\r\n\t// получения списка пользователей и обновление его при изменении параметров\r\n\t\r\n\tuseEffect(() => {\r\n\t\tdispatch(getUsers(debouncedCurrentPage, pageSize, debouncedSearchTerm, filter.friend))\r\n\t\treturn () => {\r\n\t\t\tdispatch(setUsers([]))\r\n\t\t}\r\n\t}, [dispatch, debouncedCurrentPage, pageSize, debouncedSearchTerm, filter.friend])\r\n\r\n\r\n\r\n\r\n\tconst radioValues = [\r\n\t\t{ value: 'null', label: 'All' },\r\n\t\t{ value: 'true', label: 'Friends' },\r\n\t\t{ value: 'false', label: 'Without friend' },\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Grid container className={classes.root}>\r\n\t\t\t<TextField label='Search people'\r\n\t\t\t\tonChange={(event: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\t\t\t\tdispatch(setFilter({ searchTerm: event.target.value }))\r\n\t\t\t\t}}\r\n\t\t\t\tid='searchTerm'\r\n\t\t\t\tname='searchTerm'\r\n\t\t\t\tvalue={filter.searchTerm} />\r\n\t\t\t<FormControl component='fieldset' >\r\n\t\t\t\t<RadioGroup row aria-label='position'\r\n\t\t\t\t\tname='position'\r\n\t\t\t\t\tvalue={filter.friend}\r\n\t\t\t\t\tonChange={(e: React.ChangeEvent<HTMLInputElement>) => dispatch(setFilter({ friend: e.target.value }))}  >\r\n\t\t\t\t\t{radioValues.map((item) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<FormControlLabel key={item.label}\r\n\t\t\t\t\t\t\t\tvalue={item.value}\r\n\t\t\t\t\t\t\t\tcontrol={<Radio size='small' color='primary' />}\r\n\t\t\t\t\t\t\t\tlabel={item.label}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</RadioGroup>\r\n\t\t\t</FormControl>\r\n\t\t\t<TablePagination\r\n\t\t\t\tcomponent='div'\r\n\t\t\t\tcount={totalUsersCount}\r\n\t\t\t\tpage={currentPage}\r\n\t\t\t\tonChangePage={(e, newPage: number) => { dispatch(setCurrentPage(newPage)) }}\r\n\t\t\t\trowsPerPage={pageSize}\r\n\t\t\t\tonChangeRowsPerPage={(event: React.ChangeEvent<HTMLInputElement>) => { dispatch(setPageSize(parseInt(event.target.value, 10))) }}\r\n\t\t\t/>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","import { UsersList } from './UsersList/UsersList';\r\nimport { UsersFilter } from './UsersFilter/UsersFilter';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../app/store';\r\nexport const Users = () => {\r\n\tconst { users, isFetching } = useSelector((state:RootState) => state.users);\r\n\treturn (\r\n\t\t<>\t<div style={{background: '#2f3136',borderRadius:\"0px 0px 15px 15px\",height:600,position:'relative'}}>\r\n\t\t\t<UsersFilter />\r\n\t\t\t<UsersList users={users} isFetching={isFetching} />\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n","import { makeStyles } from '@material-ui/core';\r\nexport const profileMain = makeStyles((theme) => ({\r\n\t\r\n\troot: {\r\n\t\tbackground: '#2f3136',\r\n\t\tcolor: 'white',\r\n\t\tborderRadius: '0 0 0 15px',\r\n\t\theight: 600,\r\n\t\talignItems: 'center',\r\n\t\tpadding: 15\r\n\t},\r\n\r\n\tfullName: {\r\n\t\tfontWeight: 700,\r\n\t\tfontSize: 20,\r\n\t\ttextAlign: 'center',\r\n\t\twordBreak: 'break-all',\r\n\t},\r\n\tfriends: {\r\n\t\tborderTop: '1px solid grey',\r\n\t\tpaddingTop: 5,\r\n\t\twidth: '100%'\r\n\t},\r\n\tfriendButton: {\r\n\t\tmargin: 20,\r\n\t\twidth: 200\r\n\r\n\t},\r\n\tpmButton: {\r\n\t\tmargin: 20,\r\n\t\tcolor: 'black',\r\n\t\t\r\n\t\twidth: 200\r\n\t}\r\n\r\n}))\r\n","import { makeStyles } from '@material-ui/core';\r\nexport const profileFreinds = makeStyles((theme) => ( {\r\n\tfriendsWrapper: {\r\n\t\tmargin: '15px 0',\r\n\t\talignItems: 'flex-start',\r\n\t\theight:200\r\n\t},\r\n\tname: {\r\n\t\ttextAlign: 'center',\r\n\t\twordBreak: 'break-word'\r\n\t},\r\n\tavatar: {\r\n\t\twidth: 50,\r\n\t\theight: 50,\r\n\t\tmarginBottom:10\r\n\t},\r\n\tfriendItemWrapper: {\r\n\t\tcolor: 'grey',\r\n\t\tpadding: 10,\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center',\r\n\t\t'&:hover': {\r\n\t\t\tcolor: theme.palette.primary.main\r\n\t\t},\r\n\t},\r\n\tfriendsLabel: {\r\n\t\tcolor: 'grey',\r\n\t\ttextAlign: 'center',\r\n\t\tfontSize: 13,\r\n\t\tfontWeight: 700,\r\n\t},\r\n}));\r\n\r\n\r\n\r\n","import { Grid, Avatar } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\nimport { profileFreinds } from './profileFriends_style';\r\nimport React from 'react'\r\nimport { randomArray } from '../../../../common/randomArray';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../../../app/store';\r\nimport { allUsersItemType } from '../../../../common/types/types';\r\nimport { useAppDispatch } from '../../../../app/store';\r\nimport { getFriends, setFilter } from '../../../../app/reducers/users-reducer';\r\n\r\nexport const ProfileFriends: React.FC = React.memo(() => {\r\n\tconst users = useSelector((state: RootState) => state.users.users)\r\n\tconst randomUsers = randomArray(users, 6) as allUsersItemType[];\r\n\tconst dispatch = useAppDispatch()\r\n\tconsole.log('render')\r\n\r\n\tReact.useEffect(() => {dispatch(getFriends('true')) }\r\n\t\r\n\t\t, []);\r\n\tconst classes = profileFreinds();\r\n\treturn (\r\n\t\t<Grid container justify='center'>\r\n\t\t\t<p className={classes.friendsLabel}> Friends: <Link onClick={() => dispatch(setFilter({ friend: 'true' }))} to={`/users`}>{users.length}</Link> </p>\r\n\t\t\t<Grid container className={classes.friendsWrapper}>\r\n\t\t\t\t{randomUsers.map((item) => (\r\n\t\t\t\t\t<Grid item xs={4} key={item.id} >\r\n\t\t\t\t\t\t<Link to={`/profile/${item.id}`}>\r\n\t\t\t\t\t\t\t<Grid container className={classes.friendItemWrapper} >\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<Avatar className={classes.avatar} src={item.photos?.large} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className={classes.name}>{item.name}</div>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t))}\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t);\r\n});\r\n","export const randomArray = (arr , len)  => {  \r\n\tconst sorted = arr.slice().sort(() => Math.random() - 0.5);\r\n\tsorted.length = len\r\n\treturn sorted;\r\n}\r\n\r\n// перемешать и вытащить N рандомных элементов из массива\r\n//array is frozen in strict mode, you'll need to copy the array before sorting it","import { Badge, makeStyles, withStyles } from '@material-ui/core';\r\nexport const profileAvatar = makeStyles((theme) => ({\r\n\tavatar: {\r\n\t\twidth: 150,\r\n\t\theight: 150,\r\n\t},\r\n\tuploadButton: {\r\n\t\t\"&:hover\": {\r\n\t\t\tcolor: theme.palette.secondary.main\r\n\t\t}\r\n\t}\r\n\r\n}));\r\nexport const StyledBadge = withStyles((theme) => ({\r\n\tbadge: {\r\n\t\tbackgroundColor: 'transparent',\r\n\t\tposition: 'absolute',\r\n\t\ttop: 140,\r\n\t\tright: 5,\r\n\t},\r\n}))(Badge);\r\n","import { Avatar, IconButton } from '@material-ui/core';\r\nimport AddAPhotoOutlinedIcon from '@material-ui/icons/AddAPhotoOutlined';\r\nimport { updateAvatar } from '../../../../app/reducers/profile-reducer';\r\nimport { profileAvatar, StyledBadge } from './profileAvatar_styles';\r\nimport React from 'react';\r\nimport { profileDataType } from '../../../../common/types/types';\r\nimport { useAppDispatch } from '../../../../app/store';\r\n\r\ntype PropsType = {\r\n\tprofile: profileDataType\r\n\trouterId: number\r\n}\r\n\r\n\r\nexport const ProfileAvatar: React.FC<PropsType> = React.memo(({ profile, routerId }) => {\r\n\tconst classes = profileAvatar();\r\n\tconst dispatch = useAppDispatch();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{!routerId ? (\r\n\t\t\t\t<StyledBadge\r\n\t\t\t\t\tbadgeContent={\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\taccept='image/*'\r\n\t\t\t\t\t\t\t\tid='contained-button-file'\r\n\t\t\t\t\t\t\t\ttype='file'\r\n\t\t\t\t\t\t\t\tstyle={{ display: 'none' }}\r\n\t\t\t\t\t\t\t\tonChange={(e) => e.target.files && dispatch(updateAvatar(e.target.files[0]))}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label htmlFor='contained-button-file'>\r\n\t\t\t\t\t\t\t\t<IconButton color='primary' className={classes.uploadButton} component='span'>\r\n\t\t\t\t\t\t\t\t\t<AddAPhotoOutlinedIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcolor='secondary'>\r\n\t\t\t\t\t<Avatar className={classes.avatar} alt='user foto' src={profile.photos?.large} />\r\n\t\t\t\t</StyledBadge>\r\n\t\t\t) : (\r\n\t\t\t\t\t<Avatar className={classes.avatar} alt='user foto' src={profile.photos?.large} />\r\n\t\t\t\t)}\r\n\t\t</>\r\n\t);\r\n});\r\n","import { updateStatus } from '../../../../app/reducers/profile-reducer';\r\nimport { useEffect, useState } from 'react';\r\nimport { useSelector} from 'react-redux';\r\nimport {  useAppDispatch } from '../../../../app/store';\r\n\r\nexport const useStatus = () => {\r\n\tconst [editMode, setEditMode] = useState(false);\r\n\tconst [userStatus, setUserStatus] = useState('');\r\n\tconst status = useSelector((state) => state.profile.status);\r\n\r\n\tconst dispatch = useAppDispatch();\r\n\tuseEffect(() => {\r\n\t\tsetUserStatus(status);\r\n\t}, [status]);\r\n\r\n\r\n\tconst deactivateMode = (action) => () => {\r\n\t\tif (!action) {\r\n\t\t\tsetUserStatus(status);\r\n\t\t\tsetEditMode(false);\r\n\t\t} else {\r\n\t\t\tsetEditMode(false);\r\n\t\t\tdispatch(updateStatus(userStatus));\r\n\t\t}\r\n\t};\r\n\tconst onStatusChange = (e => {\r\n\t\tsetUserStatus(e.target.value);\r\n\t})\r\n\r\n\r\n\treturn [onStatusChange, deactivateMode, editMode, setEditMode, userStatus, status]\r\n}","import { makeStyles } from '@material-ui/core';\r\nexport const profileStatus = makeStyles((theme) => ({\r\n\tstatus: {\r\n\t\tcursor: 'pointer',\r\n\t\tfontSize: 16,\r\n\t\t\"&:hover\": { color: theme.palette.secondary.main },\r\n\t\tcolor: theme.palette.primary.main,\r\n\t\twordBreak: 'break-word',\r\n\t\tpadding: 10,\r\n\t},\r\n\ticon: {\r\n\t\tmargin:'0 5px 0 10px',\r\n\t\tfontSize: 20,\r\n\t\tcursor:'pointer',\r\n\t},\r\n\tinput: {\r\n\t\twidth: 300,\r\n\t\tfontSize: 20,\r\n\t\tmarginRight:10,\r\n\t\ttextAlign:'center'\r\n\t\t\r\n\t},\r\n\troot:{\r\n\t\tminHeight:70,\r\n\t\tpadding:5,\r\n\t}\r\n}))\r\n","import React from 'react';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { Grid, InputBase } from '@material-ui/core';\r\nimport { useStatus } from './useStatus';\r\nimport { profileStatus } from './profileStatus_styles';\r\n\r\ntype PropsType = {\r\n\trouterId: number\r\n}\r\nexport const ProfileStatus: React.FC<PropsType> = React.memo(({ routerId }) => {\r\n\tconst [onStatusChange, deactivateMode, editMode, setEditMode, userStatus, status] = useStatus();\r\n\tconst classes = profileStatus();\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t{editMode && !routerId ? (\r\n\t\t\t\t<Grid component='form' onSubmit={deactivateMode(true)}>\r\n\t\t\t\t\t<InputBase\r\n\t\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\t\tautoFocus={true}\r\n\t\t\t\t\t\tonChange={onStatusChange}\r\n\t\t\t\t\t\tvalue={userStatus}\r\n\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<SaveIcon fontSize='small' color='primary' className={classes.icon} onClick={deactivateMode(true)}/>\r\n\t\t\t\t\t\t\t\t\t<CloseIcon fontSize='small' color='secondary'className={classes.icon}  onClick={deactivateMode(false)}/>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t} />\r\n\t\t\t\t</Grid>\r\n\t\t\t) : (\r\n\t\t\t\t\t<Grid>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclassName={classes.status}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetEditMode(true);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{status}\r\n\t\t\t\t\t\t\t<span>{!routerId && <EditIcon className={classes.icon} color='inherit' />}</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n});\r\n","import { profileMain } from './profileMain_styles';\r\nimport { Button, Grid } from '@material-ui/core';\r\nimport { ProfileFriends } from './ProfileFriends/ProfileFriends';\r\nimport { ProfileAvatar } from './ProfileAvatar/ProfileAvatar';\r\nimport React from 'react';\r\nimport { ProfileStatus } from './ProfileStatus/ProfileStatus';\r\nimport { FriendButton } from '../../../components/FriendButton/FriendButton';\r\nimport { Link } from 'react-router-dom';\r\nimport { RootState } from '../../../app/store';\r\nimport { useSelector } from 'react-redux';\r\n\r\ntype PropsType = {\r\n\trouterId: number\r\n}\r\n\r\nexport const ProfileMain: React.FC<PropsType> = ({ routerId }) => {\r\n\tconst profile = useSelector((state: RootState) => state.profile.profile);\r\n\r\n\tconst classes = profileMain();\r\n\treturn (\r\n\t\t<Grid container className={classes.root} direction='column' justify='space-around'>\r\n\t\t\t<ProfileAvatar profile={profile} routerId={routerId} />\r\n\t\t\t<Grid item className={classes.fullName}>\r\n\t\t\t\t{profile.fullName?.toUpperCase()}\r\n\t\t\t</Grid>\r\n\t\t\t<Grid>\r\n\t\t\t\t{' '}\r\n\t\t\t\t<ProfileStatus routerId={routerId} />\r\n\t\t\t</Grid>\r\n\t\t\t{!routerId ? (\r\n\t\t\t\t<Grid item className={classes.friends}>\r\n\t\t\t\t\t<ProfileFriends />\r\n\t\t\t\t</Grid>\r\n\t\t\t) : (\r\n\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t{routerId && (\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<div className={classes.friendButton}>\r\n\t\t\t\t\t\t\t\t\t<FriendButton id={routerId} followed={profile.followed} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div >\r\n\t\t\t\t\t\t\t\t\t<Link to={`/messenger/${routerId}`}>\r\n\t\t\t\t\t\t\t\t\t\t<Button color='secondary' variant='contained' className={classes.pmButton} >\r\n\t\t\t\t\t\t\t\t\t\t\tWhite a message\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nexport const profileInfoStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\theight: 600,\r\n\t\tmaxWidth: 300,\r\n\t\tpadding: 2,\r\n\t\tjustifyContent: 'space-around',\r\n\t\talignItems: 'center',\r\n\t\tflexDirection: 'column',\r\n\t\tcolor: 'grey', \r\n\t\ttextAlign: 'center'\r\n\t},\r\n\tdescriptionLabel:{\r\n\t\tcolor:theme.palette.secondary.main,\r\n\t\tfontSize:16,\r\n\t\tfontWeight:700\r\n\t}\r\n}))\r\n","import React, { Dispatch } from 'react';\r\nimport { FormControlLabel, Grid, IconButton, Radio } from '@material-ui/core';\r\nimport { useSelector } from 'react-redux';\r\nimport SettingsSharpIcon from '@material-ui/icons/SettingsSharp';\r\nimport { RootState } from '../../../app/store';\r\nimport { profileInfoStyles } from './profileInfo_styles'\r\n\r\n\r\n\r\n\r\ntype PropsType = {\r\n\tsetEditForm: Dispatch<boolean>\r\n\trouterId: number\r\n}\r\nexport const ProfileInfo: React.FC<PropsType> = React.memo(({ setEditForm, routerId }) => {\r\n\tconst  profile  = useSelector((state: RootState) => state.profile.profile);\r\n\tconst isContacts = profile.contacts && Object.values(profile.contacts).find((i) => !!i);\r\n\tconst classes = profileInfoStyles();\r\n\tconst editHandler = () => {\r\n\t\tsetEditForm(true);\r\n\t};\r\n\treturn (\r\n\t\t<Grid container className={classes.root}>\r\n\t\t\t{profile?.aboutMe && (\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<p className={classes.descriptionLabel}>About me:</p>\r\n\t\t\t\t\t<p>{profile?.aboutMe}</p>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{profile?.lookingForAJobDescription && (\r\n\t\t\t\t<Grid item >\r\n\t\t\t\t\t<p className={classes.descriptionLabel}> Skills: </p>\r\n\t\t\t\t\t<p>{profile?.lookingForAJobDescription}</p>\r\n\r\n\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\tvalue='best'\r\n\t\t\t\t\t\tcontrol={<Radio checked={profile?.lookingForAJob} color='primary' disabled />}\r\n\t\t\t\t\t\tlabel='Looking for a job'\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{isContacts && (\r\n\t\t\t\t<Grid item >\r\n\t\t\t\t\t<p className={classes.descriptionLabel}>Contacts:</p>\r\n\t\t\t\t\t{profile.contacts &&\r\n\t\t\t\t\t\tObject.keys(profile.contacts).map((key) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\tprofile.contacts[key] && (\r\n\t\t\t\t\t\t\t\t\t<Grid key={key} item>\r\n\t\t\t\t\t\t\t\t\t\t<a href={`//${profile.contacts[key]}`}>\r\n\t\t\t\t\t\t\t\t\t\t\t{profile.contacts[key]} </a>\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{!routerId && (\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<IconButton onClick={editHandler} color='secondary'>\r\n\t\t\t\t\t\t<SettingsSharpIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t</Grid>\r\n\t);\r\n});\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nexport const profileEditForm = makeStyles((theme) => ({\r\n\troot: {\r\n\t\talignItems: 'center',\r\n\t\theight: 600,\r\n\t\twidth: '100%',\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'space-around',\r\n\t\tflexDirection: 'column'\r\n\t},\r\n\tleftBlock: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\tcolor: 'white',\r\n\t\ttextAlign: 'center',\r\n\t\tjustifyContent: 'space-around',\r\n\t\t\"&>*\": { margin: 30 }\r\n\r\n\t},\r\n\trightBlock: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\tcolor: 'white',\r\n\t\ttextAlign: 'center',\r\n\t\tjustifyContent: 'space-around'\r\n\t},\r\n\tcontacts: {\r\n\t\tmargin: 30\r\n\t},\r\n\tjob: {\r\n\r\n\t\tcolor: 'white',\r\n\t},\r\n\terror: {\r\n\t\tcolor: 'red'\r\n\t},\r\n\tbuttons: {\r\n\t\tmargin: 20,\r\n\t}\r\n}));","import { Grid, TextField, Checkbox, FormControlLabel, IconButton } from '@material-ui/core';\r\nimport { useFormik } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { putNewProfile } from '../../../../app/reducers/profile-reducer';\r\nimport CloseRoundedIcon from '@material-ui/icons/CloseRounded';\r\nimport AddRoundedIcon from '@material-ui/icons/AddRounded';\r\nimport { profileEditForm } from './profileEditForm_style';\r\nimport * as Yup from 'yup';\r\nimport { Dispatch } from 'react';\r\nimport { RootState } from '../../../../app/store';\r\n\r\ntype PropsType = {\r\n\tsetEditForm: Dispatch<boolean>\r\n}\r\nexport const ProfileEditForm: React.FC<PropsType> = ({ setEditForm }) => {\r\n\tconst { profile } = useSelector((state: RootState) => state.profile);\r\n\tconst dispatch = useDispatch();\r\n\tconst classes = profileEditForm();\r\n\tconst { handleSubmit, handleChange, values, errors, touched, handleBlur } = useFormik({\r\n\t\tinitialValues: profile,\r\n\t\tonSubmit: (e) => {\r\n\r\n\t\t\tdispatch(putNewProfile(e));\r\n\t\t\tsetEditForm(false);\r\n\t\t},\r\n\t\tvalidationSchema: Yup.object({\r\n\t\t\tfullName: Yup.string()\r\n\t\t\t\t.min(4, 'Name must be longer than 4 characters.')\r\n\t\t\t\t.max(30, 'Name must be shorter than 30 characters.')\r\n\t\t\t\t.required('Required'),\r\n\t\t\taboutMe: Yup.string().max(100, 'Description must be shorter than 100 characters.').required('Required'),\r\n\t\t\tlookingForAJobDescription: Yup.string().max(100, 'Description must be shorter than 100 characters.').required('Required'),\r\n\t\t}),\r\n\t});\r\n\r\n\tconst contactsName = ['vk', 'facebook', 'github'];\r\n\treturn (\r\n\t\t<Grid component='form' onSubmit={handleSubmit} className={classes.root}>\r\n\t\t\t<Grid container direction='row' justify='center' alignItems='center'>\r\n\t\t\t\t<div className={classes.leftBlock}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h2> Name: </h2>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tvalue={values?.fullName}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tplaceholder={'Enter your name'}\r\n\t\t\t\t\t\t\tid='fullName'\r\n\t\t\t\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{errors.fullName && touched.fullName && <div className={classes.error}>{errors.fullName}</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h2> About: </h2>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\t\t\t\trowsMax={2}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tvalue={values?.aboutMe}\r\n\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tid='aboutMe'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{errors.aboutMe && touched.aboutMe && <div className={classes.error}>{errors.aboutMe}</div>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h2> Skills: </h2>\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\trowsMax={2}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tvalue={values?.lookingForAJobDescription}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tid='lookingForAJobDescription'\r\n\t\t\t\t\t\t\tonBlur={handleBlur}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t{errors.lookingForAJobDescription && touched.lookingForAJobDescription && (\r\n\t\t\t\t\t\t\t<div className={classes.error}>{errors.lookingForAJobDescription}</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={classes.rightBlock}>\r\n\t\t\t\t\t<h2>Contacts:</h2>\r\n\t\t\t\t\t{contactsName.map((item) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tkey={item}\r\n\t\t\t\t\t\t\t\tclassName={classes.contacts}\r\n\t\t\t\t\t\t\t\tvalue={values?.contacts[item] || ''}\r\n\t\t\t\t\t\t\t\tname={'contacts.' + item}\r\n\t\t\t\t\t\t\t\tid={item}\r\n\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\tsize='small'\r\n\t\t\t\t\t\t\t\tlabel={item}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</Grid>\r\n\t\t\t<div>\r\n\t\t\t\t<FormControlLabel\r\n\t\t\t\t\tclassName={classes.job}\r\n\t\t\t\t\tlabelPlacement='start'\r\n\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t<Checkbox size='small' checked={values?.lookingForAJob} onChange={handleChange} color='primary' id='lookingForAJob' />\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlabel='Are you looking for a job?'\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className={classes.buttons}>\r\n\t\t\t\t<Grid container justify='center'>\r\n\t\t\t\t\t<IconButton type='submit'>\r\n\t\t\t\t\t\t<AddRoundedIcon color='primary' />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton onClick={() => setEditForm(false)} type='submit'>\r\n\t\t\t\t\t\t<CloseRoundedIcon color='secondary' />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","\r\nexport const dateHelper = (date,timeZone=10800000) => {\r\n\t// работает,но че-т хрень какая-то)\r\n\t\r\n\tconst ruTime = new Date(date).getTime()\r\n\tconst currentTime = new Date(ruTime+timeZone).toLocaleTimeString('ru', {hour: '2-digit', minute:'2-digit'})\r\n\tconst formatedDate = new Date(ruTime+timeZone).toLocaleDateString()\r\n\tconst currentDate = new Date().toLocaleDateString()\r\n\tconst yesterdayDate = new Date(Date.now() - 86400000+ timeZone).toLocaleDateString()\r\n\t\r\n\r\n\r\n\tconst visibleDate =\r\n\t\tformatedDate === currentDate ?\r\n\t\t\t'today ' + currentTime\r\n\t\t\t:\r\n\t\t\tformatedDate === yesterdayDate ?\r\n\t\t\t\t'yesterday ' + currentTime\r\n\t\t\t\t:\r\n\t\t\t\tformatedDate\r\n\r\n\treturn visibleDate\r\n}","import { makeStyles } from '@material-ui/core';\r\nexport const profilePosts = makeStyles((theme) => ({\r\n\troot: {\r\n\t\toverflowY: 'auto',\r\n\t\theight: 450,\r\n\t\twidth: '100%',\r\n\r\n\t},\r\n\tcontainer: {\r\n\t\tpaddingRight: 30,\r\n\t\tcolor: 'grey',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column-reverse',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\toverflowY: 'auto',\r\n\t\twidth: '100%',\r\n\t\twordBreak: 'break-word'\r\n\r\n\t},\r\n\tpostWrapper: {\r\n\t\twidth: '100%',\r\n\t\tdisplay: 'flex',\r\n\t\tbackgroundColor: '#202225',\r\n\t\tpadding: 10,\r\n\t\tmarginTop: 20,\r\n\t\tborderRadius: 5\r\n\r\n\t},\r\n\tdate: {\r\n\t\tcolor: 'white',\r\n\t\tfontSize: 9\r\n\t},\r\n\tbody: {\r\n\t\twidth: '100%',\r\n\t\tpaddingTop: 40\r\n\t},\r\n\tavatar: {\r\n\t\tmarginRight: 20\r\n\t},\r\n\tfullName: {\r\n\t\tmarginRight: 10,\r\n\t\tcolor: 'orange'\r\n\t}\r\n}));","import { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../../../../app/store\";\r\nimport { dateHelper } from '../../../../common/dateHelper'\r\nimport { Favorite, FavoriteBorder } from '@material-ui/icons';\r\nimport { Avatar, Checkbox, FormControlLabel, Grid } from '@material-ui/core';\r\nimport { useAppDispatch } from '../../../../app/store';\r\nimport { setLike } from \"../../../../app/reducers/profile-reducer\";\r\nimport { profilePosts } from \"./profilePosts_styles\";\r\n\r\nexport const ProfilePosts: React.FC = () => {\r\n\tconst { authUser, posts, profile } = useSelector((state: RootState) => state.profile);\r\n\tconst dispatch = useAppDispatch()\r\n\tconst classes = profilePosts()\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<div className={classes.container}>\r\n\t\t\t\t{posts?.map((item, idx) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={item.date} className={classes.postWrapper}>\r\n\t\t\t\t\t\t\t<Avatar className={classes.avatar} src={item.userId ? authUser.photos?.small : profile.photos?.small} />\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<Grid container direction='row' alignItems='center' >\r\n\t\t\t\t\t\t\t\t\t<p className={classes.fullName}>{item.userId ? authUser.fullName : profile.fullName}</p>\r\n\t\t\t\t\t\t\t\t\t<p className={classes.date}>{dateHelper(item.date, 0)}</p>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<span className={classes.body}>{item.body}</span>\r\n\t\t\t\t\t\t\t\t<Grid container alignItems='center'>\r\n\t\t\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => dispatch(setLike({ like: e.target, idx }))}\r\n\t\t\t\t\t\t\t\t\t\tcontrol={\r\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox checked={item.isLiked} icon={<FavoriteBorder />} checkedIcon={<Favorite />} name='checkedH\t' />\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlabel={item.likesCount}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}","import { makeStyles } from '@material-ui/core';\r\nexport const profileWall = makeStyles((theme) => ({\r\n\r\n\troot: {\r\n\t\tbackgroundColor: '#2f3136',\r\n\t\theight: 600,\r\n\t\tpadding: 30,\r\n\t\tborderRadius: '0 0 15px 0'\r\n\t},\r\n\twrapper: {\r\n\t\tbackgroundColor: '#202225',\r\n\t\tmarginBottom: 20,\r\n\t\tcolor: 'white',\r\n\t\tpadding: 10,\r\n\t\twidth: '95%',\r\n\t\tborderRadius: 8,\r\n\t\twordBreak: 'break-word'\r\n\t},\r\n\tinput: {\r\n\t\twidth: '90%',\r\n\t\tmarginLeft: 20\r\n\t},\r\n\tinputWrapper: {\r\n\t\tmarginLeft: 20\r\n\t}\r\n}))","import { Avatar, Grid, IconButton, InputBase } from '@material-ui/core';\r\nimport { useFormik } from 'formik';\r\nimport { useSelector } from 'react-redux';\r\nimport SendRoundedIcon from '@material-ui/icons/SendRounded';\r\nimport { RootState } from '../../../app/store';\r\nimport { useAppDispatch } from '../../../app/store';\r\nimport { setPost } from '../../../app/reducers/profile-reducer';\r\nimport { ProfilePosts } from './ProfilePost/ProfilePosts';\r\nimport { profileWall } from './profileWall_styles';\r\nimport React from 'react'\r\n\r\n\r\n\r\nexport const ProfileWall: React.FC = React.memo(() => {\r\n\tconst authUser = useSelector((state: RootState) => state.profile.authUser);\r\n\tconst dispatch = useAppDispatch();\r\n\tconst classes = profileWall()\r\n\tconst { handleSubmit, handleChange, values, resetForm } = useFormik({\r\n\t\tinitialValues: {\r\n\t\t\tbody: '',\r\n\t\t},\r\n\t\tonSubmit: ({ body }) => {\r\n\t\t\tdispatch(\r\n\t\t\t\tsetPost({\r\n\t\t\t\t\tuserId: authUser.userId,\r\n\t\t\t\t\tbody: body,\r\n\t\t\t\t\tdate: new Date().toJSON(),\r\n\t\t\t\t\tlikesCount: 0,\r\n\t\t\t\t\tisLiked: false,\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tresetForm();\r\n\t\t},\r\n\t});\r\n\r\n\treturn (\r\n\t\t<Grid className={classes.root}>\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tdirection='row'\r\n\t\t\t\talignItems='center'\r\n\t\t\t\tclassName={classes.wrapper}>\r\n\t\t\t\t<Avatar src={authUser.photos?.small} />\r\n\t\t\t\t<Grid item xs component='form' className={classes.inputWrapper} onSubmit={handleSubmit}>\r\n\t\t\t\t\t<InputBase\r\n\t\t\t\t\t\tplaceholder='Write something'\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\tcolor='primary'\r\n\t\t\t\t\t\tname='body'\r\n\t\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\t\tvalue={values.body}\r\n\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t<IconButton type='submit'>\r\n\t\t\t\t\t\t\t\t<SendRoundedIcon color='inherit' fontSize='small' />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t\t<ProfilePosts />\r\n\t\t</Grid>\r\n\t);\r\n});\r\n","import { makeStyles } from '@material-ui/core';\r\nexport const profileStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tbackgroundColor: '#36393f',\r\n\t\tborderRadius: '0 0 15px 15px',\r\n\t\tposition: 'relative',\r\n\t\twidth: '100%',\r\n\t\theight: 600,\r\n\t\tjustifyContent: 'center',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\r\n\t},\r\n\trightBlockWrapper: {\r\n\t\theight: 600\r\n\t}\r\n}));","import { useSelector } from 'react-redux';\r\nimport { getUserProfile, setIsError, setIsLoading } from '../../app/reducers/profile-reducer';\r\nimport { useEffect, useState } from 'react';\r\nimport { Grid } from '@material-ui/core';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Preloader2 } from '../../common/preloader2';\r\nimport { ProfileMain } from './ProfileMain/ProfileMain';\r\nimport { ProfileInfo } from './ProfileInfo/ProfileInfo';\r\nimport { ProfileEditForm } from './ProfileInfo/ProfileEditForm/ProfileEditForm';\r\nimport { ProfileWall } from './ProfileWall/ProfileWall';\r\nimport { RootState } from '../../app/store';\r\nimport { useAppDispatch } from '../../app/store';\r\nimport { profileStyles } from './profile_styles'\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\r\n\r\nfunction Alert(props: AlertProps) {\r\n\treturn <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\nconst ProfilePage: React.FC = ({ match }: any) => {\r\n\t//TODO обработать ошибки сервера\r\n\tconst authUserId = useSelector((state: RootState) => state.auth.id);\r\n\tconst routerId = match.params.userId;\r\n\tconst profileUserId = routerId || authUserId;\r\n\tconst dispatch = useAppDispatch();\r\n\tconst [editForm, setEditForm] = useState(false);\r\n\tconst classes = profileStyles();\r\n\tconst isLoading = useSelector((state: RootState) => state.profile.isLoading);\r\n\tconst isError = useSelector((state: RootState) => state.profile.isError);\r\n\r\n\tuseEffect(() => {\r\n\t\tprofileUserId && dispatch(getUserProfile(profileUserId)) \r\n\t\treturn () => {\r\n\t\t\tdispatch(setIsLoading(true))\r\n\t\t}\r\n\t}, [dispatch, profileUserId])\r\n\r\n\tconst handleClose = () => {\r\n\t\tdispatch(setIsError(''))\r\n\t};\r\n\tconsole.log(isLoading)\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<Snackbar open={!!isError} autoHideDuration={5000} onClose={handleClose} >\r\n\t\t\t\t<Alert onClose={handleClose} severity=\"error\">\r\n\t\t\t\t\tFetch error\r\n\t\t\t\t</Alert>\r\n\t\t\t</Snackbar>\r\n\t\t\t{isLoading ? (<Preloader2 />) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Grid item xs={4}>\r\n\t\t\t\t\t\t<ProfileMain routerId={routerId} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={8} className={classes.rightBlockWrapper}>\r\n\t\t\t\t\t\t{editForm ? (\r\n\t\t\t\t\t\t\t<ProfileEditForm setEditForm={setEditForm} />) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t\t\t\t\t<Grid>\r\n\t\t\t\t\t\t\t\t\t\t\t<ProfileInfo routerId={routerId} setEditForm={setEditForm} />\r\n\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t\t<Grid item xs>\r\n\t\t\t\t\t\t\t\t\t\t\t<ProfileWall />\r\n\t\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default withRouter(ProfilePage);\r\n","import { makeStyles } from \"@material-ui/core\";\r\nexport const chatForm = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tbackgroundColor: '#40444b',\r\n\t\talignItems: 'center',\r\n\t\tmarginTop: 20,\r\n\t\tborderRadius: 7,\r\n\t\twidth: '100%'\r\n\t},\r\n\tinput: {\r\n\t\tcolor: 'white',\r\n\t\tmarginLeft: 15,\r\n\t\twidth: '100%',\r\n\t\tpadding: 8,\r\n\t\tpaddingRight: 40\r\n\t},\r\n}))","import { Grid, InputBase } from '@material-ui/core';\r\nimport { chatForm } from './chatInput_styles';\r\n\r\ninterface IProps {\r\n\thandleSubmit: (e?: React.FormEvent<HTMLFormElement> | undefined) => void,\r\n\tonChange: { (e: React.ChangeEvent<any>): void },\r\n\tvalue: string,\r\n\tdisabled?: boolean\r\n}\r\n\r\nexport const ChatInput: React.FC<IProps> = ({ handleSubmit, ...props}) => {\r\n\tconst classes = chatForm()\r\n\treturn (\r\n\t\t<Grid component='form' onSubmit={handleSubmit} className={classes.root}>\r\n\t\t\t<InputBase inputProps={{...props}}\r\n\t\t\t\tclassName={classes.input}\r\n\t\t\t\ttype='text'\r\n\t\t\t\tautoFocus={true}\r\n\t\t\t\tplaceholder='write a message'\r\n\t\t\t\tname='message'\r\n\t\t\t\tid='message'\r\n\t\t\t/>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\n\r\n\r\n\r\n","import { useFormik } from 'formik';\r\nimport { useSelector } from 'react-redux';\r\nimport { sendMessage } from '../../../../app/reducers/chat-reducer';\r\nimport { RootState } from '../../../../app/store';\r\nimport { useAppDispatch } from '../../../../app/store';\r\nimport { ChatInput } from '../../../../components/ChatInput/ChatInput';\r\n\r\n\r\nexport const ChatForm: React.FC = () => {\r\n\tconst { status } = useSelector((state: RootState) => state.chat);\r\n\tconst dispatch = useAppDispatch()\r\n\tconst { handleSubmit, handleChange, values, resetForm } = useFormik({\r\n\t\tinitialValues: {\r\n\t\t\tmessage: '',\r\n\t\t},\r\n\t\tonSubmit: ({ message }) => {\r\n\t\t\tdispatch(sendMessage(message));\r\n\t\t\tresetForm();\r\n\t\t},\r\n\t});\r\n\treturn (\r\n\t\t<ChatInput\r\n\t\t\thandleSubmit={handleSubmit}\r\n\t\t\tonChange={handleChange}\r\n\t\t\tvalue={values.message}\r\n\t\t\tdisabled={status !== 'ready'}\r\n\t\t/>\r\n\t);\r\n};\r\n","import { makeStyles } from \"@material-ui/core\";\r\n\r\n\r\nexport const chatMessages = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tbackgroundColor: '#36393f',\r\n\t\tpadding: 15,\r\n\r\n\t},\r\n\tsenderName: {\r\n\t\tcolor: 'white',\r\n\t\tfontWeight: 700,\r\n\t},\r\n\tmessageBody: {\r\n\t\tcolor: '#dcddde',\r\n\t\twordBreak: \"break-word\",\r\n\t},\r\n\tmessagesWrapper: {\r\n\t\toverflowY: 'auto',\r\n\t\theight: 500,\r\n\t\tpadding: 8\r\n\t},\r\n\tmessage: {\r\n\t\tpadding: '14px 0',\r\n\t\tborderTop: '1px solid #40444b',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t},\r\n}))","import { Avatar, Grid } from '@material-ui/core';\r\nimport { useRef } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { ChatForm } from './ChatForm/ChatForm';\r\nimport React from 'react';\r\nimport { chatMessages } from './chatMessages_styles';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../../app/store';\r\n\r\nexport const ChatMessages: React.FC = () => {\r\n\tconst messages = useSelector((state: RootState) => state.chat.messages)\r\n\tconst messagesEndRef = useRef<HTMLDivElement>(null);\r\n\tconst classes = chatMessages();\r\n\t//скролл вниз\r\n\tconst scrollToBottom = () => {\r\n\t\tmessagesEndRef.current && messagesEndRef.current.scrollIntoView(false);\r\n\t};\r\n\tuseEffect(() => scrollToBottom(), [messages]);\r\n\r\n\r\n\treturn (\r\n\t\t<Grid item xs className={classes.root}>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Grid className={classes.messagesWrapper}>\r\n\t\t\t\t\t{messages?.map((i, idx) => (\r\n\t\t\t\t\t\t<Grid className={classes.message} key={idx}>\r\n\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t<Avatar alt='avatar' src={i?.photo} />\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Grid item style={{ marginLeft: 10 }}>\r\n\t\t\t\t\t\t\t\t<p className={classes.senderName}> {i.userName}</p>\r\n\t\t\t\t\t\t\t\t<p className={classes.messageBody}>{i.message} </p>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<div ref={messagesEndRef}></div>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<ChatForm />\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","export default __webpack_public_path__ + \"static/media/devs.b3345405.jpg\";","import { makeStyles, Badge, withStyles } from '@material-ui/core';\r\nexport const messengerNavBar = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tpadding: '15px',\r\n\t\tbackground: '#2f3136',\r\n\t\tcolor: 'white',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center',\r\n\t\tborderRadius: '0px 0px 0px 15px',\r\n\t\theight: 600,\r\n\t},\r\n\t\r\n\tpmWrapper: {\r\n\t\toverflowY: 'auto',\r\n\t\tpadding: '0 5px'\r\n\t},\r\n\tchip: {\r\n\t\twidth: 160,\r\n\t\tjustifyContent: 'left',\r\n\t\tmargin: '5px 0',\r\n\t\tbackground: '#40444b',\r\n\t},\r\n}));\r\n\r\nexport const NavBadge = withStyles((theme) => ({\r\n\tbadge: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 21,\r\n\t\tright: 15,\r\n\t},\r\n}))(Badge);\r\n","import { Avatar, Chip } from '@material-ui/core';\r\nimport { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { getDialogs } from '../../app/reducers/dialogs-reducer';\r\nimport { RootState } from '../../app/store';\r\nimport devs from '../../common/assets/img/devs.jpg';\r\nimport { messengerNavBar, NavBadge } from './chatNavBar_styles';\r\nimport { useAppDispatch } from '../../app/store';\r\n\r\nexport const ChatNavBar: React.FC = () => {\r\n\tconst { dialogs } = useSelector((state: RootState) => state.dialogs);\r\n\tconst dispatch = useAppDispatch();\r\n\tuseEffect(() => {\r\n\t\tdispatch(getDialogs());\r\n\t}, []);\r\n\tconst classes = messengerNavBar();\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<h4>Chat rooms: </h4>\r\n\t\t\t<NavLink to={'/messenger'} activeClassName='navchat'>\r\n\t\t\t\t<Avatar src={devs} />\r\n\t\t\t</NavLink>\r\n\t\t\t<h4>PM: </h4>\r\n\t\t\t<div className={classes.pmWrapper}>\r\n\t\t\t\t{dialogs.map((item, idx) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<NavLink to={`/messenger/${item.id}`} key={item.id} activeClassName='navchat'>\r\n\t\t\t\t\t\t\t<NavBadge badgeContent={item.newMessagesCount} color='secondary' >\r\n\t\t\t\t\t\t\t\t<Chip key={idx}\r\n\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\tavatar={<Avatar src={item?.photos?.small} />}\r\n\t\t\t\t\t\t\t\t\tlabel={item?.userName}\r\n\t\t\t\t\t\t\t\t\tclickable\r\n\t\t\t\t\t\t\t\t></Chip>\r\n\t\t\t\t\t\t\t</NavBadge>\r\n\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t);\r\n};\r\n","\r\nimport { useFormik } from 'formik';\r\nimport { sendMessage } from '../../../../app/reducers/dialogs-reducer';\r\nimport { useAppDispatch } from '../../../../app/store';\r\nimport { ChatInput } from '../../../../components/ChatInput/ChatInput';\r\n\r\ntype PropsType = {\r\n\trouterId: number\r\n}\r\n\r\nexport const PrivateForm: React.FC<PropsType> = ({ routerId }) => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst { handleSubmit, handleChange, values, resetForm } = useFormik({\r\n\t\tinitialValues: {\r\n\t\t\tmessage: '',\r\n\t\t},\r\n\t\tonSubmit: ({ message }) => {\r\n\t\t\tdispatch(sendMessage(routerId, message));\r\n\t\t\tresetForm();\r\n\t\t},\r\n\t});\r\n\treturn (\r\n\t\t<ChatInput handleSubmit={handleSubmit} onChange={handleChange} value={values.message} />\r\n\t);\r\n};\r\n","import { makeStyles } from '@material-ui/core';\r\nexport const privateMessages = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tbackgroundColor: '#36393f',\r\n\t\tpadding: 15,\r\n\t},\r\n\tmessagesWrapper: {\r\n\t\toverflowY: 'auto',\r\n\t\theight: 500,\r\n\t\tpadding: 8\r\n\t},\r\n\tmessageBody: {\r\n\t\tcolor: '#dcddde',\r\n\t\twordBreak: 'break-word',\r\n\t},\r\n\tdoneIcon: {\r\n\t\tcolor: 'orange',\r\n\t\tfontSize: 12,\r\n\t},\r\n\tdoneAllIcon: {\r\n\t\tcolor: 'green',\r\n\t\tfontSize: 12,\r\n\r\n\t},\r\n\taddedAt: {\r\n\t\tfontSize: 10,\r\n\t\tcolor: 'grey',\r\n\t},\r\n\tsenderName: {\r\n\t\tcolor: '#fff',\r\n\t\tfontWeight: 700,\r\n\t\tmarginRight: 10\r\n\r\n\t},\r\n\tmessageContent: {\r\n\t\tdisplay: 'flex',\r\n\t\tpadding: '9px 0',\r\n\t\tborderTop: '1px solid #40444b',\r\n\t\talignItems: 'center',\r\n\t\t\"&:hover\": {\r\n\t\t\t\"&>*\": {\r\n\t\t\t\t\"&>*\": {\r\n\t\t\t\t\t\"&>*\": { opacity: 1 }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdeleteIcon: {\r\n\t\tcursor: 'pointer',\r\n\t\topacity: 0,\r\n\t\tfontSize: 15,\r\n\t\tmarginLeft: 5\r\n\r\n\t},\r\n\tmessageTitle: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\t\"&:hover\": {\r\n\t\t\t\"&>*\": { opacity: 1 }\r\n\t\t}\r\n\r\n\t},\r\n\tavatar: {\r\n\t\tmarginRight: 15\r\n\t}\r\n}));","import { Avatar, Grid } from '@material-ui/core';\r\nimport { useRef, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport React from 'react';\r\nimport { PrivateForm } from './PrivateForm/PrivateForm';\r\nimport DoneRoundedIcon from '@material-ui/icons/DoneRounded';\r\nimport DoneAllRoundedIcon from '@material-ui/icons/DoneAllRounded';\r\nimport { deleteMessage, getMessages } from '../../../app/reducers/dialogs-reducer';\r\nimport { dateHelper } from '../../../common/dateHelper';\r\nimport { Preloader2 } from '../../../common/preloader2';\r\nimport { privateMessages } from './privateMessages_styles';\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined';\r\nimport { dialogsArrayType } from '../../../common/types/types';\r\nimport { RootState } from '../../../app/store';\r\nimport { useAppDispatch } from '../../../app/store';\r\nimport { getNewMessagesCount } from '../../../app/reducers/dialogs-reducer';\r\n\r\n\r\ntype PropsType = {\r\n\trouterId: number\r\n\trecipient: dialogsArrayType\r\n\r\n}\r\nexport const PrivateMessages: React.FC<PropsType> = ({ routerId, recipient }) => {\r\n\tconst dispatch = useAppDispatch();\r\n\tconst classes = privateMessages();\r\n\tconst { messagesFething, messages } = useSelector((state: RootState) => state.dialogs);\r\n\tconst { authUser } = useSelector((state: RootState) => state.profile);\r\n\tconst messagesEndRef = useRef<HTMLDivElement>(null);\r\n\t//скролл вниз\r\n\tconst scrollToBottom = () => {\r\n\t\tmessagesEndRef.current && messagesEndRef.current.scrollIntoView(false);\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tif (routerId) {\r\n\t\t\tdispatch(getMessages(routerId));\r\n\r\n\t\t}\r\n\t}, [routerId]);\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(getNewMessagesCount())\r\n\t\tscrollToBottom()\r\n\t}, [messages]);\r\n\r\n\treturn (\r\n\t\t<Grid item xs className={classes.root}>\r\n\r\n\t\t\t<Grid className={classes.messagesWrapper}>\r\n\t\t\t\t{messages && messages.map((item: any, idx: any) => (\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\titem\r\n\t\t\t\t\t\tclassName={classes.messageContent}\r\n\t\t\t\t\t\tkey={idx}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\talt='avatar'\r\n\t\t\t\t\t\t\tclassName={classes.avatar}\r\n\t\t\t\t\t\t\tsrc={item.senderId === authUser?.userId ? authUser?.photos?.large : recipient?.photos?.large}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Grid container >\r\n\t\t\t\t\t\t\t<span className={classes.senderName}>{item.senderName}</span>\r\n\t\t\t\t\t\t\t<Grid className={classes.messageTitle}>\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t{item.senderId === authUser?.userId &&\r\n\t\t\t\t\t\t\t\t\t\t(item.viewed ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<DoneAllRoundedIcon className={classes.doneAllIcon} />\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<DoneRoundedIcon className={classes.doneIcon} />\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className={classes.addedAt}>{dateHelper(item.addedAt)}</span>\r\n\t\t\t\t\t\t\t\t<DeleteOutlineOutlinedIcon onClick={() => dispatch(deleteMessage(item.id, routerId))} className={classes.deleteIcon} color='secondary' />\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t<Grid container spacing={2} alignItems='center' className={classes.messageBody}>\r\n\t\t\t\t\t\t\t\t<Grid item>{item.body}</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t))}\r\n\t\t\t\t<div ref={messagesEndRef}></div>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid container>\r\n\t\t\t\t<PrivateForm routerId={routerId} />\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n","import { makeStyles } from '@material-ui/core';\r\nexport const privateUserInfo = makeStyles((theme) => ({\r\n\troot: {\r\n\t\r\n\t\tbackground: '#2f3136',\r\n\t\tborderRadius: '0 0 15px 0',\r\n\t\tcolor: '#8e9297',\r\n\t\tposition: 'relative',\r\n\t\theight: 600,\r\n\t\t'&:hover': {\r\n\t\t\tcolor: 'orange',\r\n\t\t},\r\n\t\tpadding:30\r\n\t},\r\n\tavatar: {\r\n\t\tborderRadius: '50%',\r\n\t\twidth: 250,\r\n\t\theight: 250,\r\n\t\tpadding:30\r\n\t},\r\n\r\n}));","import { Avatar, Grid } from '@material-ui/core';\r\nimport { Link } from 'react-router-dom';\r\nimport { dateHelper } from '../../../common/dateHelper';\r\nimport { privateUserInfo } from './privateUserInfo_styles';\r\nimport { dialogsArrayType } from '../../../common/types/types';\r\n\r\ntype PropsType = {\r\n\trecipient:dialogsArrayType,\r\n\trouterId:number\r\n}\r\n\r\nexport const PrivateUserInfo:React.FC<PropsType> = ({recipient,routerId}) => {\r\n\tconst classes = privateUserInfo();\r\n\t//* РАБОЧИЙ КОМПОНЕНТ\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Link to={'/profile/' + routerId}>\r\n\t\t\t\t<Grid container direction='column' alignItems='center' justify='space-around' className={classes.root}>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t<h2>{recipient?.userName}</h2>\r\n\t\t\t\t\t\t\t<Avatar alt='profile avatar' src={recipient?.photos.large} className={classes.avatar} />\r\n\t\t\t\t\t\t\t<Grid container direction='column' alignItems='center'>\r\n\t\t\t\t\t\t\t\t<div> Was online:</div>\r\n\t\t\t\t\t\t\t\t<div>{recipient?.lastUserActivityDate && dateHelper(recipient?.lastUserActivityDate)}</div>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\r\n\t\t\t\t</Grid>\r\n\t\t\t</Link>\r\n\t</>\r\n\t);\r\n};\r\n","import { Badge, makeStyles, withStyles } from \"@material-ui/core\";\r\n\r\n\r\nexport const chatUsersList = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tpadding: 15,\r\n\t\tbackground: '#2f3136',\r\n\t\tcolor: 'white',\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center',\r\n\t\tborderRadius: '0 0 15px 0',\r\n\t\theight: 600,\r\n\t},\r\n\tuser: {\r\n\t\tcolor: '#8e9297',\r\n\t\tmargin: 5,\r\n\t\twidth: 250,\r\n\t\tpadding: '10px 20px',\r\n\r\n\t\t'&:hover': {\r\n\t\t\tbackground: 'rgba(79,84,92,0.32)',\r\n\t\t\tcolor: 'white',\r\n\t\t\tborderRadius: 7,\r\n\t\t\tpadding: '10px 20px',\r\n\t\t},\r\n\t},\r\n\tavatar: {\r\n\t\twidth: 30,\r\n\t\theight: 30,\r\n\t},\r\n\tusersWrapper: {\r\n\t\toverflowY: 'auto',\r\n\t\tpadding: 7,\r\n\t\tmargin: '16px auto'\r\n\t},\r\n}));\r\n\r\nexport const StyledBadge = withStyles((theme) => ({\r\n\tbadge: {\r\n\t\tbackgroundColor: '#44b700',\r\n\t\tboxShadow: `0 0 0 1px ${theme.palette.background.paper}`,\r\n\t\t'&::after': {\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '100%',\r\n\t\t\tborderRadius: '50%',\r\n\t\t},\r\n\t},\r\n}))(Badge);","import { Avatar, Grid } from '@material-ui/core';\r\nimport { useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { RootState } from '../../../app/store';\r\nimport { chatUsersList, StyledBadge } from './chatUsersList_styles';\r\n\r\n\r\nexport const ChatUsersList: React.FC = () => {\r\n\tconst { messages } = useSelector((state: RootState) => state.chat);\r\n\tconst usersList = messages.filter(((temp) => (a: any) => !temp[a.userId] && (temp[a.userId] = true))(Object.create(null)));\r\n\r\n\tconst classes = chatUsersList();\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<h4>Users — {usersList?.length}</h4>\r\n\t\t\t<div className={classes.usersWrapper}>\r\n\t\t\t\t{usersList?.map((i, idx) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Link to={`/messenger/${i.userId || i.id}`} key={idx}>\r\n\t\t\t\t\t\t\t<Grid container alignItems='center' className={classes.user}>\r\n\t\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t\t<StyledBadge\r\n\t\t\t\t\t\t\t\t\t\toverlap='circle'\r\n\t\t\t\t\t\t\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\t\t\t\t\t\t\tvertical: 'bottom',\r\n\t\t\t\t\t\t\t\t\t\t\thorizontal: 'right',\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tvariant='dot'>\r\n\t\t\t\t\t\t\t\t\t\t<Avatar alt='Remy Sharp' src={i?.photo} className={classes.avatar} />\r\n\t\t\t\t\t\t\t\t\t</StyledBadge>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<p style={{ marginLeft: 12 }}>\r\n\t\t\t\t\t\t\t\t\t{i.userName}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { Grid } from '@material-ui/core';\r\nimport { useEffect } from 'react';\r\nimport { ChatMessages } from './ChatMessages/ChatMessages';\r\nimport { ChatNavBar } from '../../components/ChatNavBar/ChatNavBar';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { PrivateMessages } from './privateMessages/PrivateMessages';\r\nimport { PrivateUserInfo } from './privateUserInfo/PrivateUserInfo';\r\nimport { ChatUsersList } from './ChatUsersList/ChatUsersList';\r\nimport { startMessagesListening, stopMessagesListening } from '../../app/reducers/chat-reducer';\r\nimport { RootState } from '../../app/store';\r\nimport { useAppDispatch } from '../../app/store';\r\n\r\nconst MessengerPage: React.FC = ({ match }: any) => {\r\n\tconst { dialogs } = useSelector((state: RootState) => state.dialogs);\r\n\tconst routerId = match.params.userId;\r\n\tconst recipient = dialogs.filter((item) => item.id == routerId)[0]\r\n\tconst { status } = useSelector((state: RootState) => state.chat);\r\n\tconst dispatch = useAppDispatch();\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(startMessagesListening());\r\n\t\treturn () => {\r\n\t\t\tdispatch(stopMessagesListening());\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Grid container direction='row' justify='center'>\r\n\t\t\t<Grid item xs={2}>\r\n\t\t\t\t<ChatNavBar />\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={10}>\r\n\t\t\t\t<Grid container >\r\n\t\t\t\t\t{routerId ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<PrivateMessages routerId={routerId} recipient={recipient} />\r\n\t\t\t\t\t\t\t<PrivateUserInfo routerId={routerId} recipient={recipient} />\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{status === 'error' && <div>Some error occured. Please refresh the page</div>}\r\n\t\t\t\t\t\t\t\t<ChatMessages />\r\n\t\t\t\t\t\t\t\t<ChatUsersList />\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nexport default withRouter(MessengerPage);\r\n","import { CircularProgress } from '@material-ui/core';\r\n\r\nexport const Preloader = () => {\r\n\treturn (\r\n\t\t\r\n\t\t\t<CircularProgress\r\n\t\t\t\tsize={200}\r\n\t\t\t\tcolor='primary'\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\t\r\n\t\t\t\t\tposition:'absolute',\r\n\t\t\t\t\ttop: '50%',\r\n\t\t\t\t\tleft: '50%',\r\n\t\t\t\t\tmarginLeft: '-100px',\r\n\t\t\t\t\tmarginTop: '-100px',\r\n\t\t\t\t\t\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\r\n\t);\r\n};\r\n","import { makeStyles } from '@material-ui/core/styles';\r\nexport const header = makeStyles((theme) => ({\r\n\twrapper: {\r\n\t\tcolor: 'white',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tpadding: '5px 30px',\r\n\t\twidth: 1240\r\n\t},\r\n\tauthUserWrapper: {\r\n\t\tjustifyContent: 'flex-end',\r\n\t\talignItems: 'center',\r\n\t},\r\n\troot: {\r\n\t\tbackground: 'linear-gradient(to top, #232526, #414345)',\r\n\t\tborderRadius: '15px 15px 0 0',\r\n\t},\r\n}));","import {  Avatar, Badge, Grid, IconButton } from '@material-ui/core';\r\nimport { logout } from '../../app/reducers/auth-reducer';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getAuthUser } from '../../app/reducers/profile-reducer';\r\nimport LaunchOutlinedIcon from '@material-ui/icons/LaunchOutlined';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport React from 'react';\r\nimport { getNewMessagesCount } from '../../app/reducers/dialogs-reducer';\r\nimport { RootState } from '../../app/store';\r\nimport { header } from './header_styles';\r\n\r\nexport const Header = () => {\r\n\tconst classes = header();\r\n\tconst authUser = useSelector((state: RootState) => state.profile.authUser);\r\n\tconst { isAuth, id } = useSelector((state: RootState) => state.auth);\r\n\tconst dispatch = useDispatch();\r\n\tconst { newMessagesCount } = useSelector((state: RootState) => state.dialogs);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (id) {\r\n\t\t\tdispatch(getAuthUser(id));\r\n\t\t\tdispatch(getNewMessagesCount());\r\n\t\t}\r\n\t}, [dispatch, id]);\r\n\r\n\tconst navTitles = ['profile', 'users', 'messenger'];\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<div className={classes.wrapper}>\r\n\t\t\t\t<Grid container spacing={6}>\r\n\t\t\t\t\t{navTitles.map((item) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Grid item key={item}>\r\n\t\t\t\t\t\t\t\t<NavLink to={'/' + item} activeClassName='header'>\r\n\t\t\t\t\t\t\t\t\t<h2> {item.toLocaleUpperCase()}</h2>\r\n\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t{isAuth && (\r\n\t\t\t\t\t<Grid container spacing={3} className={classes.authUserWrapper}>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<a href='https://docs.google.com/document/d/1ZSXmTzkgq_Kj1VbWuq8fTv_DPD95GFDvPZgqFeIYGoM/edit#'>\r\n\t\t\t\t\t\t\t\t<h2>API</h2>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<Link to={`/profile`}>\r\n\t\t\t\t\t\t\t\t<h4>{authUser?.fullName}</h4>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t{newMessagesCount ? (\r\n\t\t\t\t\t\t\t\t<Link to={`/messenger`}>\r\n\t\t\t\t\t\t\t\t\t<Badge badgeContent={newMessagesCount} color='secondary'>\r\n\t\t\t\t\t\t\t\t\t\t<Avatar alt='Remy Sharp' src={authUser?.photos?.small} />\r\n\t\t\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<Avatar alt='Remy Sharp' src={authUser?.photos?.small} />\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t<IconButton onClick={() => dispatch(logout())}>\r\n\t\t\t\t\t\t\t\t<LaunchOutlinedIcon color='secondary' />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React from 'react';\r\nimport { LoginPage } from './pages/LoginPage/LoginPage';\r\nimport { Users } from './pages/UsersPage/Users';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { init } from './app/reducers/app-reducer';\r\nimport { useEffect } from 'react';\r\nimport { Redirect, Switch, Route } from 'react-router-dom';\r\nimport ProfilePage from './pages/ProfilePage/ProfilePage';\r\nimport MessengerPage from './pages/MessangerPage/MessengerPage';\r\nimport { Preloader } from './common/preloader';\r\nimport { Container} from '@material-ui/core';\r\nimport { Header } from './components/Header/Header';\r\n\r\n//TODO сделать lazy load\r\n//  const Chat = React.lazy(() => import(\"./features/chat\"))\r\nfunction App() {\r\n\tconst isInit = useSelector((state) => state.app.isInit);\r\n\tconst isAuth = useSelector((state) => state.auth.isAuth);\r\n\tconst authUserId = useSelector((state) => state.auth.id);\r\n\tconst dispatch = useDispatch();\r\n\tuseEffect(() => dispatch(init()), [dispatch]);\r\n\r\n\treturn (\r\n\t\t<Container >\r\n\t\t\t{!isInit ? (\r\n\t\t\t\t<Preloader />\r\n\t\t\t) : !isAuth ? (\r\n\t\t\t\t<LoginPage />\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Header />\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route exact path={'/profile/' + authUserId} render={() => <Redirect to={'/profile'} />} />\r\n\t\t\t\t\t\t<Route exact path='/profile/:userId?' render={() => <ProfilePage />} />\r\n\t\t\t\t\t\t<Route exact path='/users' render={() => <Users />} />\r\n\t\t\t\t\t\t<Route exact path={'/messenger/' + authUserId} render={() => <Redirect to={'/messenger'} />} />\r\n\t\t\t\t\t\t<Route exact path='/messenger/:userId?' render={() => <MessengerPage />} />\r\n\t\t\t\t\t\t<Route exact path='*' render={() => <Redirect to={'/profile'} />} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</Container>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n\twindow.location.hostname === 'localhost' ||\r\n\t// [::1] is the IPv6 localhost address.\r\n\twindow.location.hostname === '[::1]' ||\r\n\t// 127.0.0.0/8 are considered localhost for IPv4.\r\n\twindow.location.hostname.match(\r\n\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n\t)\r\n);\r\n\r\nexport function register(config) {\r\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n\t\t// The URL constructor is available in all browsers that support SW.\r\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n\t\tif (publicUrl.origin !== window.location.origin) {\r\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\r\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\r\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('load', () => {\r\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n\t\t\tif (isLocalhost) {\r\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\r\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\r\n\r\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\r\n\t\t\t\t// service worker/PWA documentation.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\r\n\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Is not localhost. Just register service worker\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n\tnavigator.serviceWorker\r\n\t\t.register(swUrl)\r\n\t\t.then(registration => {\r\n\t\t\tregistration.onupdatefound = () => {\r\n\t\t\t\tconst installingWorker = registration.installing;\r\n\t\t\t\tif (installingWorker == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tinstallingWorker.onstatechange = () => {\r\n\t\t\t\t\tif (installingWorker.state === 'installed') {\r\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\r\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\r\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\r\n\t\t\t\t\t\t\t// content until all client tabs are closed.\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\r\n\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\r\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// At this point, everything has been precached.\r\n\t\t\t\t\t\t\t// It's the perfect time to display a\r\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\r\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\r\n\r\n\t\t\t\t\t\t\t// Execute callback\r\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\r\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t})\r\n\t\t.catch(error => {\r\n\t\t\tconsole.error('Error during service worker registration:', error);\r\n\t\t});\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n\t// Check if the service worker can be found. If it can't reload the page.\r\n\tfetch(swUrl, {\r\n\t\theaders: { 'Service-Worker': 'script' },\r\n\t})\r\n\t\t.then(response => {\r\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\r\n\t\t\tconst contentType = response.headers.get('content-type');\r\n\t\t\tif (\r\n\t\t\t\tresponse.status === 404 ||\r\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\r\n\t\t\t) {\r\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\r\n\t\t\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\t\t\tregistration.unregister().then(() => {\r\n\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// Service worker found. Proceed as normal.\r\n\t\t\t\tregisterValidSW(swUrl, config);\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\tconsole.log(\r\n\t\t\t\t'No internet connection found. App is running in offline mode.'\r\n\t\t\t);\r\n\t\t});\r\n}\r\n\r\nexport function unregister() {\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.ready.then(registration => {\r\n\t\t\tregistration.unregister();\r\n\t\t});\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport store from \"./app/store\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter, HashRouter } from \"react-router-dom\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { createMuiTheme, CssBaseline, ThemeProvider } from \"@material-ui/core\";\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\ttype: 'dark',\r\n\t\tprimary: {\r\n\t\t\tmain: \"#00BFFF\",\r\n\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: '#B22222'\r\n\t\t}\r\n\t},\r\n});\r\nconsole.log(theme)\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<BrowserRouter>\r\n\t\t\t<Provider store={store}>\r\n\t\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t\t<HashRouter>\r\n\t\t\t\t\t\t<CssBaseline />\r\n\t\t\t\t\t\t<App />\r\n\t\t\t\t\t</HashRouter>\r\n\t\t\t\t</ThemeProvider>\r\n\t\t\t</Provider>\r\n\t\t</BrowserRouter>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}