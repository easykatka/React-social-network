(this.webpackJsonpsocial_media=this.webpackJsonpsocial_media||[]).push([[0],{189:function(e,t,n){},317:function(e,t,n){},318:function(e,t,n){"use strict";n.r(t);var r,a=n(1),i=n(0),c=n.n(i),s=n(14),o=n.n(s),l=(n(189),n(359)),u=n(361),d=n(383),j=n(319),f=n(10),h=n.n(f),b=n(15),p=n(25),m=n(31),g=n(147),x=n.n(g).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"ca0951c1-2a9d-481e-a273-3d5f60141d92"}}),v={email:"secondjump@bk.ru",password:"qwaszx",rememberMe:!0},O=function(){return x.get("auth/me").then((function(e){return e.data}))},_=function(e){return x.post("/auth/login",v).then((function(e){return e.data}))},w=function(){return x.delete("auth/login").then((function(e){return e.data}))},y=function(){return x.get("security/get-captcha-url").then((function(e){return e.data}))};!function(e){e[e.success=0]="success",e[e.error=1]="error",e[e.captcha=10]="captcha"}(r||(r={}));var N=Object(m.b)({name:"auth",initialState:{id:null,email:null,login:null,isAuth:!1,captchaUrl:null,errorMessage:null},reducers:{setCaptchaUrl:function(e,t){e.captchaUrl=t.payload},setauthUserData:function(e,t){return Object(p.a)(Object(p.a)({},e),t.payload)},setErrorMessage:function(e,t){e.errorMessage=t.payload}}}),k=N.actions,C=k.setCaptchaUrl,I=k.setauthUserData,F=k.setErrorMessage,M=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:(n=e.sent).resultCode===r.success&&t(I(Object(p.a)(Object(p.a)({},n.data),{},{isAuth:!0})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=N.reducer,E=n(7),A=function(e){return x.get("profile/"+e).then((function(e){return e.data}))},L=function(e){return x.get("profile/status/"+e).then((function(e){return e.data}))},P=function(e){return x.put("profile/status/",{status:e}).then((function(e){return e.data}))},D=function(e){var t=new FormData;return t.append("image",e),x.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},U=function(e){return x.get("follow/".concat(e)).then((function(e){return e.data}))},B=function(e){return x.put("profile",e).then((function(e){return e.data}))},R=Object(m.b)({name:"profile",initialState:{authUser:{},profile:{},status:"",posts:[{userId:null,body:"Hello world!",date:"10/10/20",likesCount:14,isLiked:!0},{userId:1,body:"Lorem uae odit blanditiis temporibusinus odio consequatur placeat accusamus ex",date:"8/11/20",likesCount:1,isLiked:!1},{userId:null,body:"Lorem ipsum dolor sit amet, ct blanditiis temporibus hic ipsum eaque, totam magnam minus eum dolorum reprehenderit rem odio consequatur placeat accusamus ex",date:"10/12/20",likesCount:66,isLiked:!1}],isLoading:!0,isError:""},reducers:{setUserProfile:function(e,t){var n=t.payload;e.profile=n},setUserStatus:function(e,t){var n=t.payload;e.status=n},setauthUser:function(e,t){var n=t.payload;e.authUser=n},setNewAvatar:function(e,t){var n=t.payload;e.authUser.photos=e.profile.photos=n},setUserFollowStatus:function(e,t){var n=t.payload;e.profile=Object(p.a)(Object(p.a)({},e.profile),{},{followed:n})},setPost:function(e,t){var n=t.payload;e.posts.push(n)},setLike:function(e,t){var n=t.payload,r=e.posts[n.idx];r.isLiked=n.like.checked,n.like.checked?++r.likesCount:--r.likesCount},setIsLoading:function(e,t){var n=t.payload;e.isLoading=n},setIsError:function(e,t){var n=t.payload;e.isError=n}}}),z=R.actions,T=z.setIsError,W=z.setIsLoading,q=z.setLike,J=z.setPost,Y=z.setUserFollowStatus,V=z.setUserProfile,H=z.setUserStatus,G=z.setauthUser,K=z.setNewAvatar,Z=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){var r,a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(W(!0)),t.next=4,A(e);case 4:return r=t.sent,t.next=7,L(e);case 7:return a=t.sent,t.next=10,U(e);case 10:i=t.sent,n(V(r)),n(H(a)),n(Y(i)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),n(T(t.t0));case 19:return t.prev=19,n(W(!1)),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[0,16,19,22]])})));return function(e){return t.apply(this,arguments)}}()},X=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e);case 2:r=t.sent,n(G(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$=R.reducer,Q=n(153),ee=n.n(Q),te=n(17),ne=function(){return x.get("/dialogs").then((function(e){return e.data}))},re=function(e,t){return x.post("/dialogs/".concat(e,"/messages"),{body:t}).then((function(e){return e.data}))},ae=function(e){return x.get("/dialogs/".concat(e,"/messages")).then((function(e){return e.data}))},ie=function(){return x.get("/dialogs/messages/new/count").then((function(e){return e.data}))},ce=function(e){return x.delete("/dialogs/messages/".concat(e,"\n\t\t")).then((function(e){return e.data}))},se=Object(m.b)({name:"dialogs",initialState:{dialogs:[],messages:[],dialogsFetching:!0,messagesFething:!0,newMessagesCount:null},reducers:{setDialogsFetching:function(e,t){var n=t.payload;e.dialogsFetching=n},setMessagesFetching:function(e,t){var n=t.payload;e.messagesFething=n},setDialogs:function(e,t){var n=t.payload;e.dialogs=n},setMessages:function(e,t){var n=t.payload;e.messages=n.items},setNewMessagesCount:function(e,t){var n=t.payload;e.newMessagesCount=n},setDeletedMessage:function(e,t){var n=t.payload;e.messages=e.messages.filter((function(e){return e.id!==n}))}}}),oe=se.actions,le=oe.setDeletedMessage,ue=oe.setNewMessagesCount,de=oe.setMessagesFetching,je=oe.setDialogsFetching,fe=oe.setDialogs,he=oe.setMessages,be=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:n=e.sent,t(ue(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},pe=function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){var r,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(de(!0)),t.next=3,ae(e);case 3:return r=t.sent,n(de(!1)),n(he(r)),t.next=8,ne();case 8:a=t.sent,n(fe(a));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},me=se.reducer,ge=n(356),xe=Object(ge.a)((function(e){return{header__container:{color:"white",width:1200,margin:"0 auto",display:"flex",alignItems:"center",marginBottom:10,padding:"15px 30px"},header__profile:{justifyContent:"flex-end",alignItems:"center"},header:{background:"linear-gradient(to top, #232526, #414345)"}}})),ve=function(){var e,t,n=xe(),i=Object(E.c)((function(e){return e.profile.authUser})),s=Object(E.c)((function(e){return e.auth})),o=s.isAuth,f=s.id,p=Object(E.b)(),m=Object(E.c)((function(e){return e.dialogs})).newMessagesCount;c.a.useEffect((function(){f&&(p(X(f)),p(be()))}),[p,f]);return Object(a.jsx)("div",{className:n.header,children:Object(a.jsxs)("div",{className:n.header__container,children:[Object(a.jsx)(l.a,{container:!0,spacing:6,children:["profile","users","messenger"].map((function(e){return Object(a.jsx)(l.a,{item:!0,children:Object(a.jsx)(te.d,{to:"/"+e,activeClassName:"header",children:Object(a.jsxs)("h2",{children:[" ",e.toLocaleUpperCase()]})})},e)}))}),o&&Object(a.jsxs)(l.a,{container:!0,spacing:3,className:n.header__profile,children:[Object(a.jsx)(l.a,{item:!0,children:Object(a.jsx)("a",{href:"https://docs.google.com/document/d/1ZSXmTzkgq_Kj1VbWuq8fTv_DPD95GFDvPZgqFeIYGoM/edit#",children:Object(a.jsx)("h2",{children:"API"})})}),Object(a.jsx)(l.a,{item:!0,children:Object(a.jsx)(te.c,{to:"/profile",children:Object(a.jsx)("h4",{children:null===i||void 0===i?void 0:i.fullName})})}),Object(a.jsx)(l.a,{item:!0,children:m?Object(a.jsx)(te.c,{to:"/messenger",children:Object(a.jsx)(u.a,{badgeContent:m,color:"secondary",children:Object(a.jsx)(d.a,{alt:"Remy Sharp",src:null===i||void 0===i||null===(e=i.photos)||void 0===e?void 0:e.small})})}):Object(a.jsx)(d.a,{alt:"Remy Sharp",src:null===i||void 0===i||null===(t=i.photos)||void 0===t?void 0:t.small})}),Object(a.jsx)(l.a,{item:!0,children:Object(a.jsx)(j.a,{onClick:function(){return p(function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:e.sent.resultCode===r.success&&t(I({id:null,email:null,login:null,isAuth:!1}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:Object(a.jsx)(ee.a,{style:{color:"orange"}})})})]})]})})},Oe=n(41),_e=n(320),we=n(379),ye=n(365),Ne=n(381),ke=n(366),Ce=n(160),Ie=n.n(Ce),Fe=n(47),Me=n(159),Se=n.n(Me),Ee=Object(ge.a)((function(e){return{login__formContainer:{padding:e.spacing(5),flexDirection:"column",textAlign:"center",margin:"0 auto",background:"#2f3136",height:"100%",width:500,color:"white",borderRadius:20,"&>*":{paddingBottom:e.spacing(1)}},login__icon:{fontSize:90,width:"100%",color:"#61dafb"},login__captcha:{margin:"0 auto",width:"100px"},login__error:{color:"red"}}})),Ae=n(27),Le=function(e,t,n,r){return x.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n,"&friend=").concat(r)).then((function(e){return e.data}))},Pe=function(e){return x.post("follow/".concat(e)).then((function(e){return e.data}))},De=function(e){return x.delete("follow/".concat(e)).then((function(e){return e.data}))},Ue=Object(m.b)({name:"users",initialState:{users:[],pageSize:100,totalUsersCount:5e3,currentPage:0,isFetching:!0,followingInProgress:[],filter:{searchTerm:"",friend:"null"}},reducers:{setIsFetching:function(e,t){e.isFetching=t.payload},setUsers:function(e,t){e.users=t.payload},setCurrentPage:function(e,t){e.currentPage=t.payload},setTotalUsersCount:function(e,t){e.totalUsersCount=t.payload},toggleFollow:function(e,t){var n=t.payload;e.users=e.users.map((function(e){return e.id===n?Object(p.a)(Object(p.a)({},e),{},{followed:!e.followed}):e}))},setFollowingInProgress:function(e,t){var n=t.payload,r=n.isFetching,a=n.userId;e.followingInProgress=r?[].concat(Object(Ae.a)(e.followingInProgress),[a]):e.followingInProgress.filter((function(e){return e!==a}))},setPageSize:function(e,t){var n=t.payload;e.pageSize=n,e.currentPage=0},setFilter:function(e,t){var n=t.payload;e.currentPage=0,e.filter=Object(p.a)(Object(p.a)({},e.filter),n)}}}),Be=Ue.actions,Re=Be.setFilter,ze=Be.setCurrentPage,Te=Be.setPageSize,We=Be.setIsFetching,qe=Be.setUsers,Je=Be.setTotalUsersCount,Ye=Be.toggleFollow,Ve=Be.setFollowingInProgress,He=function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(r){var a,i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r(Ve({isFetching:!0,userId:e})),t){n.next=7;break}return n.next=4,Pe(e);case 4:n.t0=n.sent,n.next=10;break;case 7:return n.next=9,De(e);case 9:n.t0=n.sent;case 10:return a=n.t0,n.next=13,U(e);case 13:i=n.sent,0===a.resultCode&&(r(Ye(e)),r(Y(i))),r(Ve({isFetching:!1,userId:e}));case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ge=Ue.reducer,Ke=Object(m.b)({name:"app",initialState:{isInit:!1},reducers:{setInit:function(e){e.isInit=!0}}}),Ze=Ke.actions.setInit,Xe=Ke.reducer,$e={"messages-received":[],"status-changed":[]},Qe=null,et=function(){it("pending"),setTimeout(ct,3e3)},tt=function(e){var t=JSON.parse(e.data);$e["messages-received"].forEach((function(e){return e(t)}))},nt=function(){it("ready")},rt=function(){it("error"),console.error("REFRESH PAGE")},at=function(){var e,t,n,r;null===(e=Qe)||void 0===e||e.removeEventListener("close",et),null===(t=Qe)||void 0===t||t.removeEventListener("message",tt),null===(n=Qe)||void 0===n||n.removeEventListener("open",nt),null===(r=Qe)||void 0===r||r.removeEventListener("error",rt)},it=function(e){$e["status-changed"].forEach((function(t){return t(e)}))};function ct(){var e;at(),null===(e=Qe)||void 0===e||e.close(),Qe=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),it("pending"),Qe.addEventListener("close",et),Qe.addEventListener("message",tt),Qe.addEventListener("open",nt),Qe.addEventListener("error",rt)}var st=function(){ct()},ot=function(){var e;$e["messages-received"]=[],$e["status-changed"]=[],at(),null===(e=Qe)||void 0===e||e.close()},lt=function(e,t){return $e[e].push(t),function(){$e[e]=$e[e].filter((function(e){return e!==t}))}},ut=function(e,t){$e[e]=$e[e].filter((function(e){return e!==t}))},dt=function(e){var t;null===(t=Qe)||void 0===t||t.send(e)},jt=n(378),ft=Object(m.b)({name:"chat",initialState:{messages:[],status:"pending"},reducers:{messagesReceived:function(e,t){var n=t.payload;e.messages!=n.length&&(e.messages=[].concat(Object(Ae.a)(e.messages),Object(Ae.a)(n.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{id:Object(jt.a)()})})))).filter((function(e,t,n){return t>=n.length-100})))},statusChanged:function(e,t){var n=t.payload;e.status=n}}}),ht=ft.actions,bt=ht.messagesReceived,pt=ht.statusChanged,mt=null,gt=function(e){return null===mt&&(mt=function(t){e(bt(t))}),mt},xt=null,vt=function(e){return null===xt&&(xt=function(t){e(pt(t))}),xt},Ot=ft.reducer,_t=Object(m.a)({reducer:{app:Xe,users:Ge,chat:Ot,auth:S,profile:$,dialogs:me},middleware:function(e){return e({serializableCheck:!1})}}),wt=function(){return Object(E.b)()},yt=_t,Nt=function(){var e=Object(E.c)((function(e){return e.auth})),t=e.captchaUrl,n=e.errorMessage,i=wt(),c=Ee(),s=Object(Oe.a)({initialValues:{email:"",password:"",rememberMe:!1,captcha:""},validationSchema:Fe.a({email:Fe.b().email("Insert correct email ").required("Required"),password:Fe.b().min(4,"Password must be longer than 4 characters.").max(12,"Password must be shorter than 12 characters.").required("Required")}),onSubmit:function(e){i(function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){var a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e);case 2:(a=t.sent).resultCode===r.success?n(M()):(a.resultCode===r.captcha&&n(function(){var e=Object(b.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:n=e.sent,r=n.url,t(C(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=a.messages.length>0?a.messages[0]:"Some Error",n(F(i)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}}),o=s.handleSubmit,u=s.handleChange,d=s.values,j=s.errors,f=s.touched,p=s.handleBlur;return Object(a.jsxs)(l.a,{container:!0,component:"form",onSubmit:o,className:c.login__formContainer,children:[Object(a.jsx)(Se.a,{className:c.login__icon}),Object(a.jsx)(_e.a,{variant:"h6",className:c.login__error,children:n}),Object(a.jsx)(we.a,{label:"Email",onBlur:p,size:"small",onChange:u,id:"email",name:"email",value:d.email}),j.email&&f.email&&Object(a.jsx)("div",{className:c.login__error,children:j.email}),Object(a.jsx)(we.a,{label:"Password",onBlur:p,size:"small",type:"password",onChange:u,variant:"standard",id:"password",name:"password",value:d.password}),j.password&&f.password&&Object(a.jsx)("div",{className:c.login__error,children:j.password}),Object(a.jsx)(ye.a,{control:Object(a.jsx)(Ne.a,{checked:d.rememberMe,onChange:u,name:"rememberMe",color:"primary"}),label:"Remember me"}),t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{className:c.login__captcha,src:t,width:"100px",alt:"captcha"}),Object(a.jsx)(we.a,{label:"Captcha",onBlur:p,onChange:u,id:"captcha",size:"small",name:"captcha",value:d.captcha})]}),Object(a.jsx)(ke.a,{variant:"contained",startIcon:Object(a.jsx)(Ie.a,{}),size:"large",type:"submit",color:"primary",children:"Log In"}),Object(a.jsx)("p",{children:"\u0414\u043b\u044f \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0430\u0440\u0443 \u043b\u043e\u0433\u0438\u043d/\u043f\u0430\u0440\u043e\u043b\u044c: "}),Object(a.jsx)("p",{children:" free@samuraijs.com / free"})]})},kt=(n(317),function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"\ud83d\udce6"}),Object(a.jsx)("div",{className:"\ud83d\udce6"}),Object(a.jsx)("div",{className:"\ud83d\udce6"}),Object(a.jsx)("div",{className:"\ud83d\udce6"}),Object(a.jsx)("div",{className:"\ud83d\udce6"})]})}),Ct=n.p+"static/media/defaultAvatar.832028ea.png",It=n(367),Ft=n(368),Mt=n(369),St=n(370),Et=function(e){var t=e.id,n=e.followed,r=Object(E.c)((function(e){return e.users.followingInProgress})),i=Object(E.b)();return Object(a.jsx)(a.Fragment,{children:n?Object(a.jsx)(ke.a,{color:"secondary",variant:"contained",fullWidth:!0,disabled:r.some((function(e){return e===t})),onClick:function(){i(He(t,!0))},children:"UNFRIEND"}):Object(a.jsx)(ke.a,{color:"primary",fullWidth:!0,variant:"contained",disabled:r.some((function(e){return e===t})),onClick:function(){i(He(t,!1))},children:"FREIND"})})},At=Object(ge.a)((function(e){return{users__name:{color:"black",fontSize:15,textAlign:"center"},users__cards:{overflowY:"scroll",width:"100%",height:430,paddingLeft:30},users__card:{height:150,"&>:hover":{background:"linear-gradient(to right, #8e9eab, #eef2f3)"}},users__cardmedia:{height:90}}})),Lt=c.a.memo((function(e){var t=e.users,n=e.isFetching,r=At();return n?Object(a.jsx)(kt,{}):Object(a.jsxs)(l.a,{container:!0,spacing:4,className:r.users__cards,children:[0===t.length&&Object(a.jsx)("div",{style:{color:"white",textAlign:"center",fontSize:50,margin:"0 auto"},children:"User not found"}),t&&t.map((function(e){return Object(a.jsx)(l.a,{item:!0,xs:2,children:Object(a.jsxs)(It.a,{children:[Object(a.jsx)("div",{className:r.users__card,children:Object(a.jsx)(Ft.a,{children:Object(a.jsxs)(te.d,{to:"/profile/"+e.id,children:[Object(a.jsx)(Mt.a,{className:r.users__cardmedia,image:(null===e||void 0===e?void 0:e.photos.large)||Ct,title:"user photo"}),Object(a.jsx)(St.a,{children:Object(a.jsx)("span",{className:r.users__name,children:null===e||void 0===e?void 0:e.name})})]})})}),Object(a.jsx)(Et,{id:e.id,followed:e.followed})]})},e.id)}))]})})),Pt=n(364),Dt=n(385),Ut=n(377),Bt=n(375),Rt=n(32),zt=function(e,t){var n=Object(i.useState)(e),r=Object(Rt.a)(n,2),a=r[0],c=r[1];return Object(i.useEffect)((function(){var n=setTimeout((function(){c(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a},Tt=function(){var e=Object(E.c)((function(e){return e.users})),t=e.currentPage,n=e.pageSize,r=e.totalUsersCount,c=e.filter,s=Object(E.b)(),o=zt(c.searchTerm,1e3),u=zt(t,500);Object(i.useEffect)((function(){s(function(e,t,n,r){return function(){var a=Object(b.a)(h.a.mark((function a(i){var c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i(We(!0)),i(ze(e)),a.next=4,Le(e+1,t,n,r);case 4:c=a.sent,i(We(!1)),i(qe(c.items)),i(Je(c.totalCount));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(u,n,o,c.friend))}),[s,u,n,o,c.friend]);return Object(a.jsxs)(l.a,{container:!0,direction:"column",alignItems:"center",style:{padding:10},children:[Object(a.jsx)(we.a,{label:"Search people",onChange:function(e){s(Re({searchTerm:e.target.value}))},id:"searchTerm",name:"searchTerm",value:c.searchTerm}),Object(a.jsx)(Pt.a,{onChange:function(e){s(Re({friend:e.target.value}))},component:"fieldset",children:Object(a.jsx)(Dt.a,{row:!0,"aria-label":"position",name:"position",value:c.friend,children:[{value:"null",label:"All"},{value:"true",label:"Friends"},{value:"false",label:"Without friend"}].map((function(e){return Object(a.jsx)(ye.a,{style:{color:"white"},value:e.value,control:Object(a.jsx)(Ut.a,{size:"small",color:"primary"}),label:e.label},e.label)}))})}),Object(a.jsx)(Bt.a,{component:"div",count:r,page:t,onChangePage:function(e,t){s(ze(t))},rowsPerPage:n,onChangeRowsPerPage:function(e){s(Te(parseInt(e.target.value,10)))}})]})},Wt=function(){var e=Object(E.c)((function(e){return e.users})),t=e.users,n=e.isFetching;return Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsxs)("div",{style:{background:"#2f3136",borderRadius:15,height:600,position:"relative"},children:[Object(a.jsx)(Tt,{}),Object(a.jsx)(Lt,{users:t,isFetching:n})]})]})},qt=n(20),Jt=Object(ge.a)((function(e){return{profileMain__container:{background:"#2f3136",color:"white",borderRadius:"15px 0px 0px 15px",height:600,alignItems:"center",padding:15},profileMain__name:{fontWeight:700,fontSize:20,textAlign:"center",wordBreak:"break-all"},profileMain__footer:{borderTop:"1px solid grey",paddingTop:5,width:"100%"},profileMain__profileFriendBtn:{margin:20,width:200},profileMain__profilePmBtn:{margin:20,color:"black",backgroundColor:"orange",width:200}}})),Yt=Object(ge.a)((function(e){return{profileFreinds__friendsContainer:{margin:"15px 0",alignItems:"flex-start"},profileFreinds__friendName:{textAlign:"center",wordBreak:"break-word"},profileFreinds__friendAvatar:{width:50,height:50},profileFreinds__friendItem:{color:"grey",padding:10,flexDirection:"column",alignItems:"center","&:hover":{color:"#61fbfb"}},profileFreinds__friendsLabel:{color:"grey",textAlign:"center",fontSize:13,fontWeight:700}}})),Vt=c.a.memo((function(){var e=Object(E.c)((function(e){return e.users.users})),t=e&&function(e,t){var n=e.slice().sort((function(){return Math.random()-.5}));return n.length=t,n}(e,6),n=wt();c.a.useEffect((function(){var e;n((e="true",function(){var t=Object(b.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(We(!0)),t.next=3,Le(1,100,"",e);case 3:r=t.sent,n(qe(r.items)),n(We(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[]);var r=Yt();return Object(a.jsxs)(l.a,{container:!0,justify:"center",children:[Object(a.jsxs)("p",{className:r.profileFreinds__friendsLabel,children:[" Friends: ",Object(a.jsx)(te.c,{onClick:function(){return n(Re({friend:"true"}))},to:"/users",children:e.length})," "]}),Object(a.jsx)(l.a,{container:!0,className:r.profileFreinds__friendsContainer,children:t.map((function(e){var t;return Object(a.jsx)(l.a,{item:!0,xs:4,children:Object(a.jsx)(te.c,{to:"/profile/".concat(e.id),children:Object(a.jsxs)(l.a,{container:!0,className:r.profileFreinds__friendItem,children:[Object(a.jsx)("div",{children:Object(a.jsx)(d.a,{className:r.profileFreinds__friendAvatar,src:null===(t=e.photos)||void 0===t?void 0:t.large})}),Object(a.jsx)("div",{className:r.profileFreinds__friendName,children:e.name})]})})},e.id)}))})]})})),Ht=n(161),Gt=n.n(Ht),Kt=n(5),Zt=Object(ge.a)((function(e){return{profileAvatar__avatar:{width:150,height:150},profileAvatar__uploadBtn:{"&:hover":{color:"orange"}}}})),Xt=Object(Kt.a)((function(e){return{badge:{backgroundColor:"transparent",position:"absolute",top:140,right:5}}}))(u.a),$t=c.a.memo((function(e){var t,n,i=e.profile,c=e.routerId,s=Zt(),o=wt();return Object(a.jsx)(a.Fragment,{children:c?Object(a.jsx)(d.a,{className:s.profileAvatar__avatar,alt:"user foto",src:null===(n=i.photos)||void 0===n?void 0:n.large}):Object(a.jsx)(Xt,{badgeContent:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{accept:"image/*",id:"contained-button-file",type:"file",style:{display:"none"},onChange:function(e){return e.target.files&&o((t=e.target.files[0],function(){var e=Object(b.a)(h.a.mark((function e(n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:(a=e.sent).resultCode===r.success&&n(K(a.data.photos));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t}}),Object(a.jsx)("label",{htmlFor:"contained-button-file",children:Object(a.jsx)(j.a,{color:"primary",className:s.profileAvatar__uploadBtn,component:"span",children:Object(a.jsx)(Gt.a,{})})})]}),color:"secondary",children:Object(a.jsx)(d.a,{className:s.profileAvatar__avatar,alt:"user foto",src:null===(t=i.photos)||void 0===t?void 0:t.large})})})})),Qt=n(162),en=n.n(Qt),tn=n(164),nn=n.n(tn),rn=n(163),an=n.n(rn),cn=n(175),sn=function(){var e=Object(i.useState)(!1),t=Object(Rt.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(null),s=Object(Rt.a)(c,2),o=s[0],l=s[1],u=Object(E.c)((function(e){return e.profile.status})),d=wt();Object(i.useEffect)((function(){l(u)}),[u]);return[function(e){l(e.currentTarget.value)},function(e){return function(){e?(a(!1),d(function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e);case 2:t.sent.resultCode===r.success&&n(H(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(o))):(l(u),a(!1))}},n,a,o,u]},on=Object(ge.a)((function(e){return{profileAvatar__status:{textAlign:"center",cursor:"pointer",fontSize:16,"&:hover":{color:"orange"},color:"#61fbfb",wordBreak:"break-word",padding:5},profileAvatar__editIcon:{marginLeft:10,fontSize:16},profileAvatar__input:{width:220,padding:10}}})),ln=c.a.memo((function(e){var t=e.routerId,n=sn(),r=Object(Rt.a)(n,6),i=r[0],c=r[1],s=r[2],o=r[3],u=r[4],d=r[5],f=on();return Object(a.jsx)(l.a,{container:!0,justify:"space-around",children:Object(a.jsx)(l.a,{item:!0,children:s&&!t?Object(a.jsx)(l.a,{component:"form",onSubmit:c(!0),children:Object(a.jsx)(cn.a,{className:f.profileAvatar__input,autoFocus:!0,onChange:i,value:u,endAdornment:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{onClick:c(!0),children:Object(a.jsx)(en.a,{fontSize:"small",color:"primary"})}),Object(a.jsx)(j.a,{color:"inherit",onClick:c(!1),children:Object(a.jsx)(an.a,{fontSize:"small",color:"secondary"})})]})})}):Object(a.jsx)(l.a,{children:Object(a.jsxs)("span",{className:f.profileAvatar__status,onClick:function(){o(!0)},children:[d,Object(a.jsx)("span",{children:!t&&Object(a.jsx)(nn.a,{className:f.profileAvatar__editIcon,color:"inherit"})})]})})})})})),un=function(e){var t,n=e.routerId,r=Object(E.c)((function(e){return e.profile.profile})),i=Jt();return Object(a.jsxs)(l.a,{container:!0,className:i.profileMain__container,direction:"column",justify:"space-around",children:[Object(a.jsx)($t,{profile:r,routerId:n}),Object(a.jsx)(l.a,{item:!0,className:i.profileMain__name,children:null===(t=r.fullName)||void 0===t?void 0:t.toUpperCase()}),Object(a.jsxs)(l.a,{children:[" ",Object(a.jsx)(ln,{routerId:n})]}),n?Object(a.jsx)(l.a,{item:!0,children:n&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:i.profileMain__profileFriendBtn,children:Object(a.jsx)(Et,{id:n,followed:r.followed})}),Object(a.jsx)("div",{children:Object(a.jsx)(te.c,{to:"/messenger/".concat(n),children:Object(a.jsx)(ke.a,{color:"primary",variant:"contained",className:i.profileMain__profilePmBtn,children:"White a message"})})})]})}):Object(a.jsx)(l.a,{item:!0,className:i.profileMain__footer,children:Object(a.jsx)(Vt,{})})]})},dn=n(165),jn=n.n(dn),fn=Object(ge.a)((function(e){return{profileInfo__container:{height:600,maxWidth:300,padding:2,justifyContent:"space-around",alignItems:"center",flexDirection:"column",color:"grey",textAlign:"center"},profileInfo__label:{color:"orange",fontSize:16,fontWeight:700}}})),hn=c.a.memo((function(e){var t=e.setEditForm,n=e.routerId,r=Object(E.c)((function(e){return e.profile.profile})),i=r.contacts&&Object.values(r.contacts).find((function(e){return!!e})),c=fn();return Object(a.jsxs)(l.a,{container:!0,className:c.profileInfo__container,children:[(null===r||void 0===r?void 0:r.aboutMe)&&Object(a.jsxs)(l.a,{item:!0,children:[Object(a.jsx)("p",{className:c.profileInfo__label,children:"About me:"}),Object(a.jsx)("p",{children:null===r||void 0===r?void 0:r.aboutMe})]}),(null===r||void 0===r?void 0:r.lookingForAJobDescription)&&Object(a.jsxs)(l.a,{item:!0,children:[Object(a.jsx)("p",{className:c.profileInfo__label,children:" Skills: "}),Object(a.jsx)("p",{children:null===r||void 0===r?void 0:r.lookingForAJobDescription}),Object(a.jsx)(ye.a,{value:"best",control:Object(a.jsx)(Ut.a,{checked:null===r||void 0===r?void 0:r.lookingForAJob,color:"primary",disabled:!0}),label:"Looking for a job"})]}),i&&Object(a.jsxs)(l.a,{item:!0,children:[Object(a.jsx)("p",{className:c.profileInfo__label,children:"Contacts:"}),r.contacts&&Object.keys(r.contacts).map((function(e){return r.contacts[e]&&Object(a.jsx)(l.a,{item:!0,children:Object(a.jsxs)("a",{href:"//".concat(r.contacts[e]),children:[r.contacts[e]," "]})},e)}))]}),!n&&Object(a.jsx)(l.a,{item:!0,children:Object(a.jsx)(j.a,{onClick:function(){t(!0)},color:"secondary",children:Object(a.jsx)(jn.a,{})})})]})})),bn=n(167),pn=n.n(bn),mn=n(166),gn=n.n(mn),xn=Object(ge.a)((function(e){return{profileEditForm__container:{alignItems:"center",height:600,width:"100%",display:"flex",justifyContent:"space-around",flexDirection:"column"},profileEditForm__leftBlock:{display:"flex",flexDirection:"column",color:"white",textAlign:"center",justifyContent:"space-around","&>*":{margin:30}},profileEditForm__rightBlock:{display:"flex",flexDirection:"column",color:"white",textAlign:"center",justifyContent:"space-around"},profileEditForm__contacts:{margin:30},profileEditForm__job:{color:"white"},profileEditForm__error:{color:"red"},profileEditForm__buttons:{margin:20}}})),vn=function(e){var t=e.setEditForm,n=Object(E.c)((function(e){return e.profile})).profile,i=Object(E.b)(),c=xn(),s=Object(Oe.a)({initialValues:n,onSubmit:function(e){i(function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e);case 2:t.sent.resultCode===r.success&&(n(Z(e.userId)),n(X(e.userId)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),t(!1)},validationSchema:Fe.a({fullName:Fe.b().min(4,"Name must be longer than 4 characters.").max(30,"Name must be shorter than 30 characters.").required("Required"),aboutMe:Fe.b().max(100,"Description must be shorter than 100 characters.").required("Required"),lookingForAJobDescription:Fe.b().max(100,"Description must be shorter than 100 characters.").required("Required")})}),o=s.handleSubmit,u=s.handleChange,d=s.values,f=s.errors,p=s.touched,m=s.handleBlur;return Object(a.jsxs)(l.a,{component:"form",onSubmit:o,className:c.profileEditForm__container,children:[Object(a.jsxs)(l.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[Object(a.jsxs)("div",{className:c.profileEditForm__leftBlock,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:" Name: "}),Object(a.jsx)(we.a,{value:null===d||void 0===d?void 0:d.fullName,onChange:u,placeholder:"Enter your name",id:"fullName",onBlur:m}),f.fullName&&p.fullName&&Object(a.jsx)("div",{className:c.profileEditForm__error,children:f.fullName})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:" About: "}),Object(a.jsx)(we.a,{onBlur:m,rowsMax:2,required:!0,type:"text",value:null===d||void 0===d?void 0:d.aboutMe,multiline:!0,onChange:u,id:"aboutMe"}),f.aboutMe&&p.aboutMe&&Object(a.jsx)("div",{className:c.profileEditForm__error,children:f.aboutMe})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:" Skills: "}),Object(a.jsx)(we.a,{type:"text",size:"small",multiline:!0,rowsMax:2,required:!0,value:null===d||void 0===d?void 0:d.lookingForAJobDescription,onChange:u,id:"lookingForAJobDescription",onBlur:m}),f.lookingForAJobDescription&&p.lookingForAJobDescription&&Object(a.jsx)("div",{className:c.profileEditForm__error,children:f.lookingForAJobDescription})]})]}),Object(a.jsxs)("div",{className:c.profileEditForm__rightBlock,children:[Object(a.jsx)("h2",{children:"Contacts:"}),["vk","facebook","github"].map((function(e){return Object(a.jsx)(we.a,{className:c.profileEditForm__contacts,value:(null===d||void 0===d?void 0:d.contacts[e])||"",name:"contacts."+e,id:e,type:"text",size:"small",label:e,onChange:u},e)}))]})]}),Object(a.jsx)("div",{children:Object(a.jsx)(ye.a,{className:c.profileEditForm__job,labelPlacement:"start",control:Object(a.jsx)(Ne.a,{size:"small",checked:null===d||void 0===d?void 0:d.lookingForAJob,onChange:u,color:"primary",id:"lookingForAJob"}),label:"Are you looking for a job?"})}),Object(a.jsx)("div",{className:c.profileEditForm__buttons,children:Object(a.jsxs)(l.a,{container:!0,justify:"center",children:[Object(a.jsx)(j.a,{type:"submit",children:Object(a.jsx)(gn.a,{color:"primary"})}),Object(a.jsx)(j.a,{onClick:function(){return t(!1)},type:"submit",children:Object(a.jsx)(pn.a,{color:"secondary"})})]})})]})},On=n(168),_n=n.n(On),wn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:108e5,n=new Date(e).getTime(),r=new Date(n+t).toLocaleTimeString("ru",{hour:"2-digit",minute:"2-digit"}),a=new Date(n+t).toLocaleDateString(),i=(new Date).toLocaleDateString(),c=new Date(Date.now()-864e5+t).toLocaleDateString(),s=a===i?"today "+r:a===c?"yesterday "+r:a;return s},yn=n(371),Nn=n(372),kn=Object(ge.a)((function(e){return{profilePosts__container:{overflowY:"auto",height:450,width:"100%"},profilePosts__content:{paddingRight:30,color:"grey",display:"flex",flexDirection:"column-reverse",justifyContent:"flex-end",overflowY:"auto",width:"100%",wordBreak:"break-word"},profilePosts__item:{width:"100%",display:"flex",backgroundColor:"#202225",padding:10,marginTop:20,borderRadius:5},profilePosts__date:{color:"orange",fontSize:10},profilePosts__body:{width:"100%"},profilePosts__avatar:{marginRight:20}}})),Cn=function(){var e=Object(E.c)((function(e){return e.profile})),t=e.authUser,n=e.posts,r=e.profile,i=wt(),c=kn();return Object(a.jsx)("div",{className:c.profilePosts__container,children:Object(a.jsx)("div",{className:c.profilePosts__content,children:null===n||void 0===n?void 0:n.map((function(e,n){var s,o;return Object(a.jsxs)("div",{className:c.profilePosts__item,children:[Object(a.jsx)(d.a,{className:c.profilePosts__avatar,src:e.userId?null===(s=t.photos)||void 0===s?void 0:s.small:null===(o=r.photos)||void 0===o?void 0:o.small}),Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:c.profilePosts__date,children:wn(e.date,0)}),Object(a.jsx)("span",{className:c.profilePosts__body,children:e.body}),Object(a.jsx)(l.a,{container:!0,alignItems:"center",children:Object(a.jsx)(ye.a,{onChange:function(e){return i(q({like:e.target,idx:n}))},control:Object(a.jsx)(Ne.a,{checked:e.isLiked,icon:Object(a.jsx)(yn.a,{}),checkedIcon:Object(a.jsx)(Nn.a,{}),name:"checkedH\t"}),label:e.likesCount})})]})]},e.date)}))})})},In=Object(ge.a)((function(e){return{profileWall__container:{backgroundColor:"#2f3136",height:600,padding:30,borderRadius:"0px 15px 15px 0"},profileWall__content:{backgroundColor:"#202225",marginBottom:20,color:"white",padding:10,width:"95%",borderRadius:8,wordBreak:"break-word"},profileWall__input:{width:"90%",marginLeft:20},profileWall__inputWrapper:{marginLeft:20}}})),Fn=c.a.memo((function(){var e,t=Object(E.c)((function(e){return e.profile.authUser})),n=wt(),r=In(),i=Object(Oe.a)({initialValues:{body:""},onSubmit:function(e){var r=e.body;n(J({userId:t.userId,body:r,date:(new Date).toJSON(),likesCount:0,isLiked:!1})),u()}}),c=i.handleSubmit,s=i.handleChange,o=i.values,u=i.resetForm;return Object(a.jsxs)(l.a,{className:r.profileWall__container,children:[Object(a.jsxs)(l.a,{container:!0,direction:"row",alignItems:"center",className:r.profileWall__content,children:[Object(a.jsx)(d.a,{src:null===(e=t.photos)||void 0===e?void 0:e.small}),Object(a.jsx)(l.a,{item:!0,xs:!0,component:"form",className:r.profileWall__inputWrapper,onSubmit:c,children:Object(a.jsx)(cn.a,{placeholder:"Write something",type:"text",onChange:s,color:"primary",name:"body",className:r.profileWall__input,value:o.body,endAdornment:Object(a.jsx)(j.a,{type:"submit",children:Object(a.jsx)(_n.a,{color:"inherit",fontSize:"small"})})})})]}),Object(a.jsx)(Cn,{})]})})),Mn=Object(ge.a)((function(e){return{profileStyles__container:{backgroundColor:"#36393f",borderRadius:15,position:"relative",width:"100%",height:600,justifyContent:"center",display:"flex",flexDirection:"row"},profileStyles__rightblock:{height:600}}})),Sn=n(382),En=n(376);function An(e){return Object(a.jsx)(En.a,Object(p.a)({elevation:6,variant:"filled"},e))}var Ln=Object(qt.g)((function(e){var t=e.match,n=Object(E.c)((function(e){return e.auth.id})),r=t.params.userId,c=r||n,s=wt(),o=Object(i.useState)(!1),u=Object(Rt.a)(o,2),d=u[0],j=u[1],f=Mn(),h=Object(E.c)((function(e){return e.profile.isLoading})),b=Object(E.c)((function(e){return e.profile.isError}));Object(i.useEffect)((function(){c&&s(Z(c))}),[s,c]);var p=function(){s(T(""))};return Object(a.jsxs)("div",{className:f.profileStyles__container,children:[Object(a.jsx)(Sn.a,{open:!!b,autoHideDuration:5e3,onClose:p,children:Object(a.jsx)(An,{onClose:p,severity:"error",children:"Fetch error"})}),h?Object(a.jsx)(kt,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(l.a,{item:!0,xs:4,children:Object(a.jsx)(un,{routerId:r})}),Object(a.jsx)(l.a,{item:!0,xs:8,className:f.profileStyles__rightblock,children:d?Object(a.jsx)(vn,{setEditForm:j}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(l.a,{container:!0,children:[Object(a.jsx)(l.a,{children:Object(a.jsx)(hn,{routerId:r,setEditForm:j})}),Object(a.jsx)(l.a,{item:!0,xs:!0,children:Object(a.jsx)(Fn,{})})]})})})]})]})})),Pn=Object(ge.a)((function(e){return{chatForm__container:{backgroundColor:"#40444b",alignItems:"center",marginTop:20,borderRadius:7,width:"100%"},chatForm__input:{color:"white",marginLeft:15,width:"100%",padding:8,paddingRight:40}}})),Dn=function(){var e=Object(E.c)((function(e){return e.chat})).status,t=wt(),n=Pn(),r=Object(Oe.a)({initialValues:{message:""},onSubmit:function(e){var n=e.message;t(function(e){return Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:dt(e);case 1:case"end":return t.stop()}}),t)})))}(n)),o()}}),i=r.handleSubmit,c=r.handleChange,s=r.values,o=r.resetForm;return Object(a.jsx)(l.a,{container:!0,children:Object(a.jsx)(l.a,{component:"form",onSubmit:i,className:n.chatForm__container,children:Object(a.jsx)(cn.a,{className:n.chatForm__input,disabled:"ready"!==e,type:"text",autoFocus:!0,placeholder:"write a message",name:"message",onChange:c,value:s.message,id:"message__input"})})})},Un=Object(ge.a)((function(e){return{chatMessage__container:{backgroundColor:"#36393f",padding:15},chatMessage__senderName:{color:"white",fontWeight:700},chatMessage__body:{color:"#dcddde",wordBreak:"break-word"},chatMessage__messagesContainer:{overflowY:"auto",height:500,padding:8},chatMessage__item:{padding:"14px 0",borderTop:"1px solid #40444b",display:"flex",flexDirection:"row"}}})),Bn=function(){var e=Object(E.c)((function(e){return e.chat.messages})),t=Object(i.useRef)(null),n=Un();return Object(i.useEffect)((function(){t.current&&t.current.scrollIntoView(!1)}),[e]),Object(a.jsx)(l.a,{item:!0,xs:!0,className:n.chatMessage__container,children:Object(a.jsxs)(l.a,{item:!0,children:[Object(a.jsx)(l.a,{className:n.chatMessage__messagesContainer,children:null===e||void 0===e?void 0:e.map((function(e,r){return Object(a.jsxs)(l.a,{className:n.chatMessage__item,children:[Object(a.jsx)(l.a,{item:!0,children:Object(a.jsx)(d.a,{alt:"avatar",src:null===e||void 0===e?void 0:e.photo})}),Object(a.jsxs)(l.a,{item:!0,style:{marginLeft:10},children:[Object(a.jsxs)("p",{className:n.chatMessage__senderName,children:[" ",e.userName]}),Object(a.jsxs)("p",{className:n.chatMessage__body,children:[e.message," "]})]}),Object(a.jsx)("div",{ref:t})]},r)}))}),Object(a.jsx)(Dn,{})]})})},Rn=n(386),zn=n.p+"static/media/devs.b3345405.jpg",Tn=Object(ge.a)((function(e){return{chatNavBar__container:{padding:"15px",background:"#2f3136",color:"white",display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"15px 0px 0px 15px",height:600},chatNavBar__avatar:{margin:11,"&:hover":{}},chatNavBar__pmContainer:{overflowY:"auto",padding:"0 5px"},chatNavBar__chip:{width:160,justifyContent:"left",margin:"5px 0",background:"#40444b"}}})),Wn=Object(Kt.a)((function(e){return{badge:{position:"absolute",top:21,right:15}}}))(u.a),qn=function(){var e=Object(E.c)((function(e){return e.dialogs})).dialogs,t=wt();Object(i.useEffect)((function(){t(function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(je(!0)),e.next=3,ne();case 3:n=e.sent,t(je(!1)),t(fe(n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var n=Tn();return Object(a.jsxs)("div",{className:n.chatNavBar__container,children:[Object(a.jsx)("h4",{children:"Chat rooms: "}),Object(a.jsx)(te.d,{to:"/messenger",activeClassName:"navchat",children:Object(a.jsx)(d.a,{src:zn,className:n.chatNavBar__avatar})}),Object(a.jsx)("h4",{children:"PM: "}),Object(a.jsx)("div",{className:n.chatNavBar__pmContainer,children:e.map((function(e,t){var r;return Object(a.jsx)(te.d,{to:"/messenger/".concat(e.id),activeClassName:"navchat",children:Object(a.jsx)(Wn,{badgeContent:e.newMessagesCount,color:"secondary",children:Object(a.jsx)(Rn.a,{className:n.chatNavBar__chip,avatar:Object(a.jsx)(d.a,{src:null===e||void 0===e||null===(r=e.photos)||void 0===r?void 0:r.small}),label:null===e||void 0===e?void 0:e.userName,clickable:!0},t)})},e.id)}))})]})},Jn=Object(ge.a)((function(e){return{chatForm__container:{backgroundColor:"#40444b",alignItems:"center",marginTop:20,borderRadius:7,width:"100%"},chatForm__input:{color:"white",marginLeft:15,width:"100%",padding:8,paddingRight:40}}})),Yn=function(e){var t=e.routerId,n=wt(),r=Jn(),i=Object(Oe.a)({initialValues:{message:""},onSubmit:function(e){var r,a,i=e.message;n((r=t,a=i,function(){var e=Object(b.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(r,a);case 2:return t(pe(r)),e.next=5,ne();case 5:n=e.sent,t(fe(n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),u()}}),c=i.handleSubmit,s=i.handleChange,o=i.values,u=i.resetForm;return Object(a.jsx)(l.a,{component:"form",onSubmit:c,className:r.chatForm__container,children:Object(a.jsx)(cn.a,{className:r.chatForm__input,type:"text",autoFocus:!0,placeholder:"write a message",name:"message",onChange:s,value:o.message,id:"message"})})},Vn=n(170),Hn=n.n(Vn),Gn=n(169),Kn=n.n(Gn),Zn=Object(ge.a)((function(e){return{privateMessages__container:{backgroundColor:"#36393f",padding:15,position:"relative"},privateMessages__messagesList:{overflowY:"auto",height:500,padding:8},privateMessages__messageBody:{color:"#dcddde",wordBreak:"break-word"},privateMessages__doneIcon:{color:"orange",fontSize:12},privateMessages__doneAllIcon:{color:"green",fontSize:12},privateMessages__addedAt:{fontSize:10,color:"grey"},privateMessages__senderName:{color:"#fff",fontWeight:700,marginRight:10},privateMessages__messageContent:{display:"flex",padding:"9px 0",borderTop:"1px solid #40444b",alignItems:"center","&:hover":{"&>*":{"&>*":{"&>*":{opacity:1}}}}},privateMessages__deleteIcon:{cursor:"pointer",opacity:0,fontSize:15,marginLeft:5},privateMessages__messageTitle:{display:"flex",alignItems:"center","&:hover":{"&>*":{opacity:1}}},privateMessages__avatar:{marginRight:15}}})),Xn=n(171),$n=n.n(Xn),Qn=function(e){var t=e.routerId,n=e.recipient,r=wt(),c=Zn(),s=Object(E.c)((function(e){return e.dialogs})),o=(s.messagesFething,s.messages),u=Object(E.c)((function(e){return e.profile})).authUser,j=Object(i.useRef)(null);return Object(i.useEffect)((function(){t&&r(pe(t))}),[t]),Object(i.useEffect)((function(){r(be()),j.current&&j.current.scrollIntoView(!1)}),[o]),Object(a.jsx)(l.a,{item:!0,xs:!0,className:c.privateMessages__container,children:(null===o||void 0===o?void 0:o.length)<0?Object(a.jsx)(kt,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(l.a,{className:c.privateMessages__messagesList,children:[o&&o.map((function(e,i){var s,o;return Object(a.jsxs)(l.a,{item:!0,className:c.privateMessages__messageContent,onClick:function(){return r((n=e.id,a=t,function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(n);case 2:0===e.sent.resultCode&&(t(pe(a)),t(le(n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n,a},children:[Object(a.jsx)(d.a,{alt:"avatar",className:c.privateMessages__avatar,src:e.senderId===(null===u||void 0===u?void 0:u.userId)?null===u||void 0===u||null===(s=u.photos)||void 0===s?void 0:s.large:null===n||void 0===n||null===(o=n.photos)||void 0===o?void 0:o.large}),Object(a.jsxs)(l.a,{container:!0,children:[Object(a.jsx)("span",{className:c.privateMessages__senderName,children:e.senderName}),Object(a.jsxs)(l.a,{className:c.privateMessages__messageTitle,children:[Object(a.jsx)("span",{children:e.senderId===(null===u||void 0===u?void 0:u.userId)&&(e.viewed?Object(a.jsx)(Kn.a,{className:c.privateMessages__doneAllIcon}):Object(a.jsx)(Hn.a,{className:c.privateMessages__doneIcon}))}),Object(a.jsx)("span",{className:c.privateMessages__addedAt,children:wn(e.addedAt)}),Object(a.jsx)($n.a,{className:c.privateMessages__deleteIcon,color:"secondary"})]}),Object(a.jsx)(l.a,{container:!0,spacing:2,alignItems:"center",className:c.privateMessages__messageBody,children:Object(a.jsx)(l.a,{item:!0,children:e.body})})]})]},i)})),Object(a.jsx)("div",{ref:j})]}),Object(a.jsx)(l.a,{container:!0,children:Object(a.jsx)(Yn,{routerId:t})})]})})},er=Object(ge.a)((function(e){return{privateUserInfo__container:{background:"#2f3136",borderRadius:"0 15px 15px 0px",height:600,color:"#8e9297",position:"relative","&:hover":{color:"orange"},padding:30},privateUserInfo__avatar:{borderRadius:"50%",width:250,height:250,padding:30}}})),tr=function(e){var t=e.recipient,n=e.routerId,r=er();return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(te.c,{to:"/profile/"+n,children:Object(a.jsxs)(l.a,{container:!0,direction:"column",alignItems:"center",justify:"space-around",className:r.privateUserInfo__container,children:[Object(a.jsx)("h2",{children:null===t||void 0===t?void 0:t.userName}),Object(a.jsx)(d.a,{alt:"profile avatar",src:null===t||void 0===t?void 0:t.photos.large,className:r.privateUserInfo__avatar}),Object(a.jsxs)(l.a,{container:!0,direction:"column",alignItems:"center",children:[Object(a.jsx)("div",{children:" Was online:"}),Object(a.jsx)("div",{children:(null===t||void 0===t?void 0:t.lastUserActivityDate)&&wn(null===t||void 0===t?void 0:t.lastUserActivityDate)})]})]})})})},nr=Object(ge.a)((function(e){return{chatList__container:{padding:15,background:"#2f3136",color:"white",display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"0 15px 15px 0px",height:600},chatList__item:{color:"#8e9297",margin:5,width:250,padding:"10px 20px","&:hover":{background:"rgba(79,84,92,0.32)",color:"white",borderRadius:7,padding:"10px 20px"}},chatList__avatar:{width:30,height:30},chatList__usersContainer:{overflowY:"auto",padding:7,margin:"16px auto"}}})),rr=Object(Kt.a)((function(e){return{badge:{backgroundColor:"#44b700",boxShadow:"0 0 0 1px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%"}}}}))(u.a),ar=function(){var e,t=Object(E.c)((function(e){return e.chat})).messages.filter((e=Object.create(null),function(t){return!e[t.userId]&&(e[t.userId]=!0)})),n=nr();return Object(a.jsxs)("div",{className:n.chatList__container,children:[Object(a.jsxs)("h4",{children:["Users \u2014 ",null===t||void 0===t?void 0:t.length]}),Object(a.jsx)("div",{className:n.chatList__usersContainer,children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(a.jsx)(te.c,{to:"/messenger/".concat(e.userId||e.id),children:Object(a.jsxs)(l.a,{container:!0,alignItems:"center",className:n.chatList__item,children:[Object(a.jsx)(l.a,{item:!0,children:Object(a.jsx)(rr,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(a.jsx)(d.a,{alt:"Remy Sharp",src:null===e||void 0===e?void 0:e.photo,className:n.chatList__avatar})})}),Object(a.jsx)("p",{style:{marginLeft:12},children:e.userName})]})},t)}))})]})},ir=Object(qt.g)((function(e){var t=e.match,n=Object(E.c)((function(e){return e.dialogs})).dialogs,r=t.params.userId,c=n.filter((function(e){return e.id==r}))[0],s=Object(E.c)((function(e){return e.chat})).status,o=wt();return Object(i.useEffect)((function(){return o(function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:st(),lt("messages-received",gt(t)),lt("status-changed",vt(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){o(function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ut("messages-received",gt(t)),ut("status-changed",vt(t)),ot();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),[]),Object(a.jsxs)(l.a,{container:!0,direction:"row",justify:"center",children:[Object(a.jsx)(l.a,{item:!0,xs:2,children:Object(a.jsx)(qn,{})}),Object(a.jsx)(l.a,{item:!0,xs:10,children:Object(a.jsx)(l.a,{container:!0,children:r?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Qn,{routerId:r,recipient:c}),Object(a.jsx)(tr,{routerId:r,recipient:c})]}):Object(a.jsxs)(a.Fragment,{children:["error"===s&&Object(a.jsx)("div",{children:"Some error occured. Please refresh the page"}),Object(a.jsx)(Bn,{}),Object(a.jsx)(ar,{})]})})})]})})),cr=Object(ge.a)((function(e){return{app__container:{width:1200,margin:"0 auto",padding:"0 30px"},app__wrapper:{width:"100vw",height:"100vh"}}}));var sr=function(){var e=Object(E.c)((function(e){return e.app.isInit})),t=Object(E.c)((function(e){return e.auth.isAuth})),n=Object(E.c)((function(e){return e.auth.id})),r=Object(E.b)();Object(i.useEffect)((function(){return r((function(e){e(M()).then((function(){e(Ze())}))}))}),[r]);var c=cr();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:c.app__wrapper,children:[Object(a.jsx)(ve,{}),Object(a.jsx)("div",{className:c.app__container,children:e?t?Object(a.jsxs)(qt.d,{children:[Object(a.jsx)(qt.b,{exact:!0,path:"/profile/"+n,render:function(){return Object(a.jsx)(qt.a,{to:"/profile"})}}),Object(a.jsx)(qt.b,{exact:!0,path:"/profile/:userId?",render:function(){return Object(a.jsx)(Ln,{})}}),Object(a.jsx)(qt.b,{exact:!0,path:"/users",render:function(){return Object(a.jsx)(Wt,{})}}),Object(a.jsx)(qt.b,{exact:!0,path:"/messenger/"+n,render:function(){return Object(a.jsx)(qt.a,{to:"/messenger"})}}),Object(a.jsx)(qt.b,{exact:!0,path:"/messenger/:userId?",render:function(){return Object(a.jsx)(ir,{})}}),Object(a.jsx)(qt.b,{exact:!0,path:"*",render:function(){return Object(a.jsx)(qt.a,{to:"/profile"})}})]}):Object(a.jsx)(Nt,{}):Object(a.jsx)(kt,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var or=n(172),lr=n(373),ur=Object(or.a)({palette:{type:"dark",primary:{main:"#61dafb"}}});o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(te.a,{children:Object(a.jsx)(E.a,{store:yt,children:Object(a.jsx)(lr.a,{theme:ur,children:Object(a.jsx)(te.b,{children:Object(a.jsx)(sr,{})})})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[318,1,2]]]);
//# sourceMappingURL=main.cf3e82e2.chunk.js.map